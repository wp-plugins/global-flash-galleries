/**
 * altgallery, jQuery Plugin
 *
 * @version 0.6.1
 * @copyright 2011-2012 Flash-Gallery.com
 */

if(void 0===JSON){var JSON;JSON||(JSON={});(function(){function b(b){return 10>b?"0"+b:b}function a(b){q.lastIndex=0;return q.test(b)?'"'+b.replace(q,function(b){var t=e[b];return"string"===typeof t?t:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function c(b,d){var t,f,G,z,q=l,J,e=d[b];e&&"object"===typeof e&&"function"===typeof e.toJSON&&(e=e.toJSON(b));"function"===typeof x&&(e=x.call(d,b,e));switch(typeof e){case "string":return a(e);case "number":return isFinite(e)?""+
e:"null";case "boolean":case "null":return""+e;case "object":if(!e)return"null";l+=g;J=[];if("[object Array]"===Object.prototype.toString.apply(e)){z=e.length;for(t=0;t<z;t+=1)J[t]=c(t,e)||"null";G=0===J.length?"[]":l?"[\n"+l+J.join(",\n"+l)+"\n"+q+"]":"["+J.join(",")+"]";l=q;return G}if(x&&"object"===typeof x){z=x.length;for(t=0;t<z;t+=1)"string"===typeof x[t]&&(f=x[t],(G=c(f,e))&&J.push(a(f)+(l?": ":":")+G))}else for(f in e)Object.prototype.hasOwnProperty.call(e,f)&&(G=c(f,e))&&J.push(a(f)+(l?": ":
":")+G);G=0===J.length?"{}":l?"{\n"+l+J.join(",\n"+l)+"\n"+q+"}":"{"+J.join(",")+"}";l=q;return G}}if("function"!==typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
q=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,g,e={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x;if("function"!==typeof JSON.stringify)JSON.stringify=function(b,a,t){var f;g=l="";if("number"===typeof t)for(f=0;f<t;f+=1)g+=" ";else"string"===typeof t&&(g=t);if((x=a)&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return c("",
{"":b})};if("function"!==typeof JSON.parse)JSON.parse=function(b,a){function t(b,f){var c,d,q=b[f];if(q&&"object"===typeof q)for(c in q)Object.prototype.hasOwnProperty.call(q,c)&&(d=t(q,c),void 0!==d?q[c]=d:delete q[c]);return a.call(b,f,q)}var f,b=""+b;d.lastIndex=0;d.test(b)&&(b=b.replace(d,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+b+")"),"function"===typeof a?t({"":f},""):f;throw new SyntaxError("JSON.parse");}})()}
(function(b,a){function c(a,c){var g=a.nodeName.toLowerCase();if("area"===g){var g=a.parentNode,e=g.name;if(!a.href||!e||"map"!==g.nodeName.toLowerCase())return!1;g=b("img[usemap=#"+e+"]")[0];return!!g&&d(g)}return(/input|select|textarea|button|object/.test(g)?!a.disabled:"a"==g?a.href||c:c)&&d(a)}function d(a){return!b(a).parents().andSelf().filter(function(){return"hidden"===b.curCSS(this,"visibility")||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),b.fn.extend({propAttr:b.fn.prop||b.fn.attr,_focus:b.fn.focus,focus:function(a,c){return"number"===typeof a?this.each(function(){var d=
this;setTimeout(function(){b(d).focus();c&&c.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,
"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(c){if(c!==a)return this.css("zIndex",c);if(this.length)for(var c=b(this[0]),d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),b.each(["Width","Height"],function(c,d){function g(a,t,f,G){b.each(e,function(){t-=parseFloat(b.curCSS(a,"padding"+this,!0))||0;f&&(t-=parseFloat(b.curCSS(a,"border"+this+"Width",!0))||0);G&&(t-=parseFloat(b.curCSS(a,"margin"+this,!0))||0)});return t}var e="Width"===d?["Left","Right"]:["Top","Bottom"],x=d.toLowerCase(),y={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,
outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(c){return c===a?y["inner"+d].call(this):this.each(function(){b(this).css(x,g(this,c)+"px")})};b.fn["outer"+d]=function(a,t){return"number"!==typeof a?y["outer"+d].call(this,a):this.each(function(){b(this).css(x,g(this,a,!0,t)+"px")})}}),b.extend(b.expr[":"],{data:function(a,c,d){return!!b.data(a,d[3])},focusable:function(a){return c(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var d=b.attr(a,"tabindex"),g=isNaN(d);
return(g||0<=d)&&c(a,!g)}}),b(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));b.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===c.offsetHeight;b.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"}),b.extend(b.ui,{plugin:{add:function(a,c,d){var a=b.ui[a].prototype,e;for(e in d)a.plugins[e]=a.plugins[e]||[],a.plugins[e].push([c,d[e]])},call:function(b,a,c){if((a=b.plugins[a])&&b.element[0].parentNode)for(var d=
0;d<a.length;d++)b.options[a[d][0]]&&a[d][1].apply(b.element,c)}},contains:function(b,a){return document.compareDocumentPosition?b.compareDocumentPosition(a)&16:b!==a&&b.contains(a)},hasScroll:function(a,c){if("hidden"===b(a).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;if(0<a[d])return!0;a[d]=1;e=0<a[d];a[d]=0;return e},isOverAxis:function(b,a,c){return b>a&&b<a+c},isOver:function(a,c,d,e,x,y){return b.ui.isOverAxis(a,d,x)&&b.ui.isOverAxis(c,e,y)}}))})(jQuery);
(function(b,a){if(b.cleanData){var c=b.cleanData;b.cleanData=function(a){for(var d=0,g;null!=(g=a[d]);d++)try{b(g).triggerHandler("remove")}catch(e){}c(a)}}else{var d=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){c||(!a||b.filter(a,[this]).length)&&b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(a){}});return d.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],x,a=a.split(".")[1];x=e+"-"+a;if(!d)d=c,c=b.Widget;b.expr[":"][x]=
function(c){return!!b.data(c,a)};b[e]=b[e]||{};b[e][a]=function(b,a){arguments.length&&this._createWidget(b,a)};c=new c;c.options=b.extend(!0,{},c.options);b[e][a].prototype=b.extend(!0,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:x},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(c,d){b.fn[c]=function(g){var e="string"===typeof g,x=Array.prototype.slice.call(arguments,1),y=this,g=!e&&x.length?b.extend.apply(null,[!0,g].concat(x)):g;
if(e&&"_"===g.charAt(0))return y;e?this.each(function(){var d=b.data(this,c),t=d&&b.isFunction(d[g])?d[g].apply(d,x):d;if(t!==d&&t!==a)return y=t,!1}):this.each(function(){var a=b.data(this,c);a?a.option(g||{})._init():b.data(this,c,new d(g,this))});return y}};b.Widget=function(b,a){arguments.length&&this._createWidget(b,a)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(!0,
{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var g=c;if(0===arguments.length)return b.extend({},this.options);if("string"===typeof c){if(d===a)return this.options[c];g={};g[c]=d}this._setOptions(g);return this},_setOptions:function(a){var c=this;b.each(a,function(b,a){c._setOption(b,a)});return this},_setOption:function(b,a){this.options[b]=a;"disabled"===b&&this.widget()[a?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
a);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,c,d){var e,x=this.options[a],d=d||{},c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(e in a)e in c||(c[e]=a[e]);this.element.trigger(c,d);return!(b.isFunction(x)&&!1===x.call(this.element[0],c,d)||c.isDefaultPrevented())}}})(jQuery);
(function(b){var a=!1;b(document).mouseup(function(){a=!1});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(d){if(!0===b.data(d.target,a.widgetName+".preventClickEvent"))return b.removeData(d.target,a.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(c){if(!a){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var d=this,q=1==c.which,l="string"==typeof this.options.cancel&&c.target.nodeName?b(c.target).closest(this.options.cancel).length:!1;if(!q||l||!this._mouseCapture(c))return!0;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=
!1!==this._mouseStart(c),!this._mouseStarted))return c.preventDefault(),!0;!0===b.data(c.target,this.widgetName+".preventClickEvent")&&b.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return d._mouseMove(b)};this._mouseUpDelegate=function(b){return d._mouseUp(b)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return a=!0}},_mouseMove:function(a){if(b.browser.msie&&
!(9<=document.documentMode)&&!a.button)return this._mouseUp(a);if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=
!1,a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a);return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){if("original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position=
"relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var c=this.options;if(this.helper||c.disabled||b(a.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(a);if(!this.handle)return!1;c.iframeFix&&b(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")});return!0},_mouseStart:function(a){var c=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(b.ui.ddmanager)b.ui.ddmanager.current=
this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;
this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",a))return this._clear(),!1;this._cacheHelperProportions();b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,!0);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,a);return!0},_mouseDrag:function(a,c){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!c){var d=this._uiHash();if(!1===this._trigger("drag",a,d))return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);return!1},_mouseStop:function(a){var c=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&(c=b.ui.ddmanager.drop(this,a));if(this.dropped)c=this.dropped,this.dropped=
!1;if((!this.element[0]||!this.element[0].parentNode)&&"original"==this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",a)&&d._clear()})}else!1!==this._trigger("stop",a)&&this._clear();return!1},_mouseUp:function(a){!0===
this.options.iframeFix&&b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,a);return b.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var c=!this.options.handle||!b(this.options.handle,this.element).length?!0:!1;b(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(c=
!0)});return c},_createHelper:function(a){var c=this.options,a=b.isFunction(c.helper)?b(c.helper.apply(this.element[0],[a])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));b.isArray(a)&&(a={left:+a[0],top:+a[1]||
0});if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if("parent"==a.containment)a.containment=this.helper[0].parentNode;if("document"==a.containment||"window"==a.containment)this.containment=["document"==a.containment?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==a.containment?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==a.containment?0:b(window).scrollLeft())+b("document"==a.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==a.containment?0:b(window).scrollTop())+(b("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var a=b(a.containment),c=a[0];if(c){a.offset();var d="hidden"!=b(c).css("overflow");this.containment=[(parseInt(b(c).css("borderLeftWidth"),10)||0)+(parseInt(b(c).css("paddingLeft"),
10)||0),(parseInt(b(c).css("borderTopWidth"),10)||0)+(parseInt(b(c).css("paddingTop"),10)||0),(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b(c).css("borderLeftWidth"),10)||0)-(parseInt(b(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b(c).css("borderTopWidth"),10)||0)-(parseInt(b(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,c){if(!c)c=this.position;var d="absolute"==a?1:-1,q="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(q[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():l?0:q.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():l?0:q.scrollLeft())*d)}},_generatePosition:function(a){var c=this.options,d="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
q=/(html|body)/i.test(d[0].tagName),l=a.pageX,g=a.pageY;if(this.originalPosition){var e;if(this.containment)this.relative_container?(e=this.relative_container.offset(),e=[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):e=this.containment,a.pageX-this.offset.click.left<e[0]&&(l=e[0]+this.offset.click.left),a.pageY-this.offset.click.top<e[1]&&(g=e[1]+this.offset.click.top),a.pageX-this.offset.click.left>e[2]&&(l=e[2]+this.offset.click.left),
a.pageY-this.offset.click.top>e[3]&&(g=e[3]+this.offset.click.top);c.grid&&(g=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,g=e?!(g-this.offset.click.top<e[1]||g-this.offset.click.top>e[3])?g:!(g-this.offset.click.top<e[1])?g-c.grid[1]:g+c.grid[1]:g,l=c.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,l=e?!(l-this.offset.click.left<e[0]||l-this.offset.click.left>e[2])?l:!(l-this.offset.click.left<
e[0])?l-c.grid[0]:l+c.grid[0]:l)}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():q?0:d.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():q?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,c,d){d=d||this._uiHash();b.ui.plugin.call(this,a,[c,d]);if("drag"==a)this.positionAbs=this._convertPositionTo("absolute");return b.Widget.prototype._trigger.call(this,a,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.extend(b.ui.draggable,{version:"1.8.18"});
b.ui.plugin.add("draggable","connectToSortable",{start:function(a,c){var d=b(this).data("draggable"),q=d.options,l=b.extend({},c,{item:d.element});d.sortables=[];b(q.connectToSortable).each(function(){var c=b.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",a,l))})},stop:function(a,c){var d=b(this).data("draggable"),q=b.extend({},c,{item:d.element});b.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;d.cancelHelperRemoval=!0;this.instance.cancelHelperRemoval=!1;if(this.shouldRevert)this.instance.options.revert=!0;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})}else this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,q)})},drag:function(a,c){var d=b(this).data("draggable"),q=this;b.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;
this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver)this.instance.isOver=1,this.instance.currentItem=b(q).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,
!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",a),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d;this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver)this.instance.isOver=
0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",a),d.dropped=!1})}});b.ui.plugin.add("draggable","cursor",{start:function(){var a=b("body"),c=b(this).data("draggable").options;if(a.css("cursor"))c._cursor=
a.css("cursor");a.css("cursor",c.cursor)},stop:function(){var a=b(this).data("draggable").options;a._cursor&&b("body").css("cursor",a._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(a,c){var d=b(c.helper),q=b(this).data("draggable").options;if(d.css("opacity"))q._opacity=d.css("opacity");d.css("opacity",q.opacity)},stop:function(a,c){var d=b(this).data("draggable").options;d._opacity&&b(c.helper).css("opacity",d._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(){var a=
b(this).data("draggable");if(a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName)a.overflowOffset=a.scrollParent.offset()},drag:function(a){var c=b(this).data("draggable"),d=c.options,q=!1;if(c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName){if(!d.axis||"x"!=d.axis)if(c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity)c.scrollParent[0].scrollTop=q=c.scrollParent[0].scrollTop+d.scrollSpeed;else if(a.pageY-c.overflowOffset.top<d.scrollSensitivity)c.scrollParent[0].scrollTop=
q=c.scrollParent[0].scrollTop-d.scrollSpeed;if(!d.axis||"y"!=d.axis)if(c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity)c.scrollParent[0].scrollLeft=q=c.scrollParent[0].scrollLeft+d.scrollSpeed;else if(a.pageX-c.overflowOffset.left<d.scrollSensitivity)c.scrollParent[0].scrollLeft=q=c.scrollParent[0].scrollLeft-d.scrollSpeed}else{if(!d.axis||"x"!=d.axis)a.pageY-b(document).scrollTop()<d.scrollSensitivity?q=b(document).scrollTop(b(document).scrollTop()-d.scrollSpeed):
b(window).height()-(a.pageY-b(document).scrollTop())<d.scrollSensitivity&&(q=b(document).scrollTop(b(document).scrollTop()+d.scrollSpeed));if(!d.axis||"y"!=d.axis)a.pageX-b(document).scrollLeft()<d.scrollSensitivity?q=b(document).scrollLeft(b(document).scrollLeft()-d.scrollSpeed):b(window).width()-(a.pageX-b(document).scrollLeft())<d.scrollSensitivity&&(q=b(document).scrollLeft(b(document).scrollLeft()+d.scrollSpeed))}!1!==q&&b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(c,a)}});
b.ui.plugin.add("draggable","snap",{start:function(){var a=b(this).data("draggable"),c=a.options;a.snapElements=[];b(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=b(this),q=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:q.top,left:q.left})})},drag:function(a,c){for(var d=b(this).data("draggable"),q=d.options,l=q.snapTolerance,g=c.offset.left,e=g+d.helperProportions.width,x=c.offset.top,y=x+d.helperProportions.height,
M=d.snapElements.length-1;0<=M;M--){var t=d.snapElements[M].left,f=t+d.snapElements[M].width,G=d.snapElements[M].top,z=G+d.snapElements[M].height;if(t-l<g&&g<f+l&&G-l<x&&x<z+l||t-l<g&&g<f+l&&G-l<y&&y<z+l||t-l<e&&e<f+l&&G-l<x&&x<z+l||t-l<e&&e<f+l&&G-l<y&&y<z+l){if("inner"!=q.snapMode){var B=Math.abs(G-y)<=l,J=Math.abs(z-x)<=l,E=Math.abs(t-e)<=l,R=Math.abs(f-g)<=l;if(B)c.position.top=d._convertPositionTo("relative",{top:G-d.helperProportions.height,left:0}).top-d.margins.top;if(J)c.position.top=d._convertPositionTo("relative",
{top:z,left:0}).top-d.margins.top;if(E)c.position.left=d._convertPositionTo("relative",{top:0,left:t-d.helperProportions.width}).left-d.margins.left;if(R)c.position.left=d._convertPositionTo("relative",{top:0,left:f}).left-d.margins.left}var U=B||J||E||R;if("outer"!=q.snapMode){B=Math.abs(G-x)<=l;J=Math.abs(z-y)<=l;E=Math.abs(t-g)<=l;R=Math.abs(f-e)<=l;if(B)c.position.top=d._convertPositionTo("relative",{top:G,left:0}).top-d.margins.top;if(J)c.position.top=d._convertPositionTo("relative",{top:z-d.helperProportions.height,
left:0}).top-d.margins.top;if(E)c.position.left=d._convertPositionTo("relative",{top:0,left:t}).left-d.margins.left;if(R)c.position.left=d._convertPositionTo("relative",{top:0,left:f-d.helperProportions.width}).left-d.margins.left}!d.snapElements[M].snapping&&(B||J||E||R||U)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,a,b.extend(d._uiHash(),{snapItem:d.snapElements[M].item}));d.snapElements[M].snapping=B||J||E||R||U}else d.snapElements[M].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,
a,b.extend(d._uiHash(),{snapItem:d.snapElements[M].item})),d.snapElements[M].snapping=!1}}});b.ui.plugin.add("draggable","stack",{start:function(){var a=b(this).data("draggable").options,a=b.makeArray(b(a.stack)).sort(function(a,c){return(parseInt(b(a).css("zIndex"),10)||0)-(parseInt(b(c).css("zIndex"),10)||0)});if(a.length){var c=parseInt(a[0].style.zIndex)||0;b(a).each(function(b){this.style.zIndex=c+b});this[0].style.zIndex=c+a.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(a,
c){var d=b(c.helper),q=b(this).data("draggable").options;if(d.css("zIndex"))q._zIndex=d.css("zIndex");d.css("zIndex",q.zIndex)},stop:function(a,c){var d=b(this).data("draggable").options;d._zIndex&&b(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
jQuery.effects||function(b,a){function c(a){var f;return a&&a.constructor==Array&&3==a.length?a:(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]:(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(f[1]),2.55*parseFloat(f[2]),2.55*parseFloat(f[3])]:(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(f[1],16),parseInt(f[2],
16),parseInt(f[3],16)]:(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?x.transparent:x[b.trim(a).toLowerCase()]}function d(){var b=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},a,c;if(b&&b.length&&b[0]&&b[b[0]])for(var d=b.length;d--;)a=b[d],"string"==typeof b[a]&&(c=a.replace(/\-(\w)/g,function(b,a){return a.toUpperCase()}),f[c]=b[a]);else for(a in b)"string"===
typeof b[a]&&(f[a]=b[a]);return f}function q(a){var f,c;for(f in a)c=a[f],(null==c||b.isFunction(c)||f in M||/scrollbar/.test(f)||!/color/i.test(f)&&isNaN(parseFloat(c)))&&delete a[f];return a}function l(b,a){var c={_:0},d;for(d in a)b[d]!=a[d]&&(c[d]=a[d]);return c}function g(a,f,c,d){if("object"==typeof a)d=f,c=null,f=a,a=f.effect;b.isFunction(f)&&(d=f,c=null,f={});if("number"==typeof f||b.fx.speeds[f])d=c,c=f,f={};b.isFunction(c)&&(d=c,c=null);f=f||{};c=c||f.duration;c=b.fx.off?0:"number"==typeof c?
c:c in b.fx.speeds?b.fx.speeds[c]:b.fx.speeds._default;d=d||f.complete;return[a,f,c,d]}function e(a){return!a||"number"===typeof a||b.fx.speeds[a]||"string"===typeof a&&!b.effects[a]?!0:!1}b.effects={};b.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,borderColor,color,outlineColor".split(","),function(a,f){b.fx.step[f]=function(a){if(!a.colorInit){var d;d=a.elem;var t=f,e;do{e=b.curCSS(d,t);if(""!=e&&"transparent"!=e||b.nodeName(d,"body"))break;t="backgroundColor"}while(d=
d.parentNode);d=c(e);a.start=d;a.end=c(a.end);a.colorInit=!0}a.elem.style[f]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var x={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],
maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},y=["add","remove","toggle"],M={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};b.effects.animateClass=function(a,f,c,z){b.isFunction(c)&&(z=c,c=null);return this.queue(function(){var B=b(this),e=B.attr("style")||
" ",g=q(d.call(this)),x,M=B.attr("class");b.each(y,function(b,f){if(a[f])B[f+"Class"](a[f])});x=q(d.call(this));B.attr("class",M);B.animate(l(g,x),{queue:!1,duration:f,easing:c,complete:function(){b.each(y,function(b,f){if(a[f])B[f+"Class"](a[f])});"object"==typeof B.attr("style")?(B.attr("style").cssText="",B.attr("style").cssText=e):B.attr("style",e);z&&z.apply(this,arguments);b.dequeue(this)}})})};b.fn.extend({_addClass:b.fn.addClass,addClass:function(a,f,c,d){return f?b.effects.animateClass.apply(this,
[{add:a},f,c,d]):this._addClass(a)},_removeClass:b.fn.removeClass,removeClass:function(a,f,c,d){return f?b.effects.animateClass.apply(this,[{remove:a},f,c,d]):this._removeClass(a)},_toggleClass:b.fn.toggleClass,toggleClass:function(c,f,d,z,B){return"boolean"==typeof f||f===a?d?b.effects.animateClass.apply(this,[f?{add:c}:{remove:c},d,z,B]):this._toggleClass(c,f):b.effects.animateClass.apply(this,[{toggle:c},f,d,z])},switchClass:function(a,f,c,d,B){return b.effects.animateClass.apply(this,[{add:f,
remove:a},c,d,B])}});b.extend(b.effects,{version:"1.8.16",save:function(b,a){for(var c=0;c<a.length;c++)null!==a[c]&&b.data("ec.storage."+a[c],b[0].style[a[c]])},restore:function(b,a){for(var c=0;c<a.length;c++)null!==a[c]&&b.css(a[c],b.data("ec.storage."+a[c]))},setMode:function(b,a){"toggle"==a&&(a=b.is(":hidden")?"show":"hide");return a},getBaseline:function(b,a){var c,d;switch(b[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=b[0]/a.height}switch(b[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=b[1]/a.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var f={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},c=b("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),d=document.activeElement;a.wrap(c);(a[0]===d||b.contains(a[0],d))&&b(d).focus();c=a.parent();"static"==a.css("position")?
(c.css({position:"relative"}),a.css({position:"relative"})):(b.extend(f,{position:a.css("position"),zIndex:a.css("z-index")}),b.each(["top","left","bottom","right"],function(b,c){f[c]=a.css(c);isNaN(parseInt(f[c],10))&&(f[c]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return c.css(f).show()},removeWrapper:function(a){var f,c=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(f=a.parent().replaceWith(a),(a[0]===c||b.contains(a[0],c))&&b(c).focus(),
f):a},setTransition:function(a,f,c,d){d=d||{};b.each(f,function(b,f){unit=a.cssUnit(f);0<unit[0]&&(d[f]=unit[0]*c+unit[1])});return d}});b.fn.extend({effect:function(a,f,c,d){var B=g.apply(this,arguments),e={options:B[1],duration:B[2],callback:B[3]},B=e.options.mode,l=b.effects[a];return b.fx.off||!l?B?this[B](e.duration,e.callback):this.each(function(){e.callback&&e.callback.call(this)}):l.call(this,e)},_show:b.fn.show,show:function(b){if(e(b))return this._show.apply(this,arguments);var a=g.apply(this,
arguments);a[1].mode="show";return this.effect.apply(this,a)},_hide:b.fn.hide,hide:function(b){if(e(b))return this._hide.apply(this,arguments);var a=g.apply(this,arguments);a[1].mode="hide";return this.effect.apply(this,a)},__toggle:b.fn.toggle,toggle:function(a){if(e(a)||"boolean"===typeof a||b.isFunction(a))return this.__toggle.apply(this,arguments);var c=g.apply(this,arguments);c[1].mode="toggle";return this.effect.apply(this,c)},cssUnit:function(a){var c=this.css(a),d=[];b.each(["em","px","%",
"pt"],function(b,a){0<c.indexOf(a)&&(d=[parseFloat(c),a])});return d}});b.easing.jswing=b.easing.swing;b.extend(b.easing,{def:"easeOutQuad",swing:function(a,c,d,z,e){return b.easing[b.easing.def](a,c,d,z,e)},easeInQuad:function(b,a,c,d,e){return d*(a/=e)*a+c},easeOutQuad:function(b,a,c,d,e){return-d*(a/=e)*(a-2)+c},easeInOutQuad:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c},easeInCubic:function(b,a,c,d,e){return d*(a/=e)*a*a+c},easeOutCubic:function(b,a,c,d,e){return d*((a=
a/e-1)*a*a+1)+c},easeInOutCubic:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a*a+c:d/2*((a-=2)*a*a+2)+c},easeInQuart:function(b,a,c,d,e){return d*(a/=e)*a*a*a+c},easeOutQuart:function(b,a,c,d,e){return-d*((a=a/e-1)*a*a*a-1)+c},easeInOutQuart:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a*a*a+c:-d/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(b,a,c,d,e){return d*(a/=e)*a*a*a*a+c},easeOutQuint:function(b,a,c,d,e){return d*((a=a/e-1)*a*a*a*a+1)+c},easeInOutQuint:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*
a*a*a*a*a+c:d/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(b,a,c,d,e){return-d*Math.cos(a/e*(Math.PI/2))+d+c},easeOutSine:function(b,a,c,d,e){return d*Math.sin(a/e*(Math.PI/2))+c},easeInOutSine:function(b,a,c,d,e){return-d/2*(Math.cos(Math.PI*a/e)-1)+c},easeInExpo:function(b,a,c,d,e){return 0==a?c:d*Math.pow(2,10*(a/e-1))+c},easeOutExpo:function(b,a,c,d,e){return a==e?c+d:d*(-Math.pow(2,-10*a/e)+1)+c},easeInOutExpo:function(b,a,c,d,e){return 0==a?c:a==e?c+d:1>(a/=e/2)?d/2*Math.pow(2,10*(a-1))+c:d/
2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(b,a,c,d,e){return-d*(Math.sqrt(1-(a/=e)*a)-1)+c},easeOutCirc:function(b,a,c,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+c},easeInOutCirc:function(b,a,c,d,e){return 1>(a/=e/2)?-d/2*(Math.sqrt(1-a*a)-1)+c:d/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(b,a,c,d,e){var b=1.70158,l=0,g=d;if(0==a)return c;if(1==(a/=e))return c+d;l||(l=0.3*e);g<Math.abs(d)?(g=d,b=l/4):b=l/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/
l))+c},easeOutElastic:function(b,a,c,d,e){var b=1.70158,l=0,g=d;if(0==a)return c;if(1==(a/=e))return c+d;l||(l=0.3*e);g<Math.abs(d)?(g=d,b=l/4):b=l/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*a)*Math.sin((a*e-b)*2*Math.PI/l)+d+c},easeInOutElastic:function(b,a,c,d,e){var b=1.70158,l=0,g=d;if(0==a)return c;if(2==(a/=e/2))return c+d;l||(l=e*0.3*1.5);g<Math.abs(d)?(g=d,b=l/4):b=l/(2*Math.PI)*Math.asin(d/g);return 1>a?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/l)+c:0.5*g*Math.pow(2,
-10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/l)+d+c},easeInBack:function(b,c,d,e,l,g){g==a&&(g=1.70158);return e*(c/=l)*c*((g+1)*c-g)+d},easeOutBack:function(b,c,d,e,l,g){g==a&&(g=1.70158);return e*((c=c/l-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(b,c,d,e,l,g){g==a&&(g=1.70158);return 1>(c/=l/2)?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(a,c,d,e,g){return e-b.easing.easeOutBounce(a,g-c,0,e,g)+d},easeOutBounce:function(b,a,c,d,e){return(a/=e)<1/2.75?
d*7.5625*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(a,c,d,e,g){return c<g/2?0.5*b.easing.easeInBounce(a,2*c,0,e,g)+d:0.5*b.easing.easeOutBounce(a,2*c-g,0,e,g)+0.5*e+d}})}(jQuery);var altgallery,altbox;
(function(b,a){function c(b){var a=[],m,c;for(m=0;m<b.length;m++)for(c=0;c<b[m].items.length;c++)a.push(b[m].items[c]);return a}function d(){return navigator.userAgent.match(/(iPhone|iPod|Android 2)/i)?!0:!1}function q(b){return"object"==typeof b&&b.length!==a}function l(a){b(a).css({display:"block",position:"static",cssFloat:"none",clear:"none",left:"auto",right:"auto",top:"auto",bottom:"auto",width:"auto",height:"auto",minWidth:"none",minHeight:"none",maxWidth:"none",maxHeight:"none",overflow:"visible",
margin:0,padding:0,border:"none",background:"none",color:"#000000",fontFamily:"serif",fontSize:"16px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:"normal",lineHeight:"normal",opacity:1,outline:"none",textAlign:"left",textIndent:0,textShadow:"none",visibility:"visible",whiteSpace:"normal",cursor:"inherit"})}function g(b,a){if("object"==typeof b)a=b.target,b=b.link;a||(a="_self");switch(a){case "_blank":window.open(b);break;case "_parent":parent.location.href=b;break;case "_self":location.href=
b;break;case "_top":top.location.href=b;break;default:top.frames[a].location.href=b}}function e(){var b=document.getElementsByTagName("script");return b[b.length-1].src||location.href}function x(b){return'url("'+b+'")'}function y(b){if("number"==typeof b)return"#"+sprintf("%06x",b);if("string"==typeof b){var a;return(a=b.match(/[0-9a-f]{3,6}$/i))?3==a[0].length?"#"+a[0]+a[0]+a[1]+a[1]+a[2]+a[2]:"#"+a[0]:(a=b.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))?"#"+sprintf("%02x",a[1])+sprintf("%02x",
a[2])+sprintf("%02x",a[3]):b}}function M(b){return y(b).match(/[0-9a-f]{6}$/i)?!0:!1}function t(b,h){var b=y(b),m=b.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i);if(m){for(var c=[],d=1;3>=d;d++)c.push(parseInt(m[d],16));return h!==a?"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+h+")":"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}return"transparent"}function f(b){for(var a in b)"object"==typeof b[a]?b[a]=f(b[a]):"true"==b[a]?b[a]=!0:"false"==b[a]?b[a]=!1:b[a]==parseInt(b[a])&&(b[a]=parseInt(b[a]));return b}function G(b){var a=
"",m,c=b.length;for(m=0;m<c;m++)a+=b.charCodeAt(m).toString(16);return a}function z(a,h){function m(b,a,h){for(var m in b)m.match("-")?b[a+m]=b[m]:b[h+m.charAt(0).toUpperCase()+m.slice(1)]=b[m]}b.browser.mozilla?m(h,"-moz-","Moz"):b.browser.webkit?m(h,"-webkit-","webkit"):b.browser.opera?m(h,"-o-","O"):b.browser.msie&&m(h,"-ms-","ms");b(a).css(h)}function B(c,h){if(h===a)return h={},b(c).data("transform")||{};b(c).each(function(){var a=[],c;for(c in h)a.push(c+"("+h[c]+")");a=a.join(" ");b(this).data("transform",
h).css({"-moz-transform":a,"-webkit-transform":a,"-khtml-transform":a,"-o-transform":a,"-ms-transform":a,transform:a})});return b(c)}function J(){if(W===a){var c=location.hostname.toString().replace(/^www\./i,"");W=!location.hostname||-1!=b.inArray(G(c),aa)}return W}function E(b,h,m){m===a&&"number"==typeof h&&(m=h,h=a);m=m||10;if(b&&O[b]===a){var c=new Image;O[b]=c;O[b].loaded=!1;O[b].callbacks=[];"function"==typeof h&&O[b].callbacks.push(h);setTimeout(function(){c.onload=function(){O[b].loaded=
!0;for(var a=0;a<O[b].callbacks.length;a++)O[b].callbacks[a](O[b])};c.src=b},m)}else O[b].loaded?"function"==typeof h&&h(O[b]):"function"==typeof h&&O[b].callbacks.push(h)}function R(c,h,m,A){m===a&&"number"==typeof h&&(m=h,h=a);m=m||10;if("string"==typeof c)return E(c,h,m);if(q(c)){var A=A||[],d=c.slice();setTimeout(function(){var a=d.shift(),a="string"==typeof a?a:a.source||a.src||b(a).attr("src");E(a,function(b){d.length?(A.push(b),R(d,h,m,A)):"function"==typeof h&&h(A)})},m)}}function U(a,h){h=
h||{};b(a).each(function(){var a=!1,c=!1;b(this).mousedown(function(){a=!0;return!1}).mousemove(function(b){a&&(c?"function"==typeof h.touchmove&&h.touchmove(b):(c=!0,"function"==typeof h.touchstart&&h.touchstart(b)));return!1}).mouseup(function(b){a=!1;c&&(c=!1,"function"==typeof h.touchend&&h.touchend(b));return!1}).mouseleave(function(b){a=!1;c&&(c=!1,"function"==typeof h.touchcancel&&h.touchcancel(b))})})}function P(a){function h(b){w||(w=!0,s=b.changedTouches[0],e=window.setTimeout(function(){w=
!1;var b=s,a=document.createEvent("MouseEvent");a.initMouseEvent("mouseup",!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("mousedown",!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,2,null);b.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("contextmenu",!0,!0,window,1,b.screenX+50,b.screenY+5,b.clientX+50,b.clientY+5,!1,!1,!1,!1,2,null);b.target.dispatchEvent(a);
v=!0;s=null},800))}function m(){w&&(window.clearTimeout(e),w=!1,s=null)}function c(b){var a=b.changedTouches[0],m="mouseover",r=document.createEvent("MouseEvent");r.initMouseEvent(m,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(r);m="mousedown";r=document.createEvent("MouseEvent");r.initMouseEvent(m,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(r);k?(window.clearTimeout(n),a.target==I?(I=null,k=
!1,m="click",r=document.createEvent("MouseEvent"),r.initMouseEvent(m,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(r),m="dblclick",r=document.createEvent("MouseEvent"),r.initMouseEvent(m,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(r)):(I=a.target,k=!0,n=window.setTimeout(function(){k=!1},600),h(b))):(I=a.target,k=!0,n=window.setTimeout(function(){k=!1},600),h(b))}function d(a){var h="";if(!(1<
a.touches.length)){switch(a.type){case "touchstart":if(b(a.changedTouches[0].target).is("select"))return;c(a);a.preventDefault();return!1;case "touchmove":m();h="mousemove";a.preventDefault();break;case "touchend":if(v)return v=!1,a.preventDefault(),!1;m();h="mouseup";break;default:return}var a=a.changedTouches[0],r=document.createEvent("MouseEvent");r.initMouseEvent(h,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(r);"mouseup"==h&&k&&a.target==I&&
(r=document.createEvent("MouseEvent"),r.initMouseEvent("click",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(r))}}var I=null,k=!1,n=null,w=!1,s=null,e=null,v=!1;b.support.touch&&b(a).each(function(){this.addEventListener("touchstart",d,!1);this.addEventListener("touchmove",d,!1);this.addEventListener("touchend",d,!1);this.addEventListener("touchcancel",d,!1)})}function $(c,h){this.init=function(){var a=b('<div class="altgallery-canvas"></div>');
l(a);a.css({display:"block",position:"relative",width:h.width,height:h.height,cursor:"default"});z(a,{userSelect:"none"});this.element=b("<div></div>");this.element.css({display:"block",position:"relative",width:h.width,height:h.height,overflow:"hidden",margin:0,padding:0,background:h.background});a.append(this.element);var d=b('<a href="http://www.flash-gallery.com/" target="_blank" style="display:block;position:absolute;left:0;top:0;z-index:9999;width:90px;height:20px;overflow:hidden;font-family:Tahoma,Arial,Helvetica,sans-serif;font-size:9px;line-height:12px;text-align:left;text-decoration:none;text-shadow:none;color:#fff;background:rgba(0,0,0,0.7);opacity:0.7;border-radius:4px;"><span style="display:block;padding:4px 10px;text-transform:uppercase;font-size:8px;font-weight:bold;white-space:nowrap;">Photo Gallery</span><span style="display:block;padding:5px 10px 10px;font-size:9px;background:rgba(0,0,0,0.5);border-bottom-left-radius:4px;border-bottom-right-radius:4px;opacity:0;">Download free version of this gallery from Flash-Gallery.com</span></a>');
Y=736;if(!J()){var o=d.width();b.browser.opera&&d.css({width:100}).find("span:first").css({letterSpacing:"-1px"});b.browser.msie&&9>b.browser.version?(d.css({background:"#444"}).find("span:last").css({background:"#222"}),d.hover(function(){b(this).stop().animate({width:120},"fast",function(){b(this).animate({height:70},"fast",function(){b(this).find("span:last").show()})})},function(){b(this).find("span:last").hide();b(this).stop().animate({height:20},"fast",function(){b(this).animate({width:o},"fast")})})):
d.hover(function(){b(this).stop().animate({width:120},"fast",function(){b(this).animate({height:70,opacity:1},"fast",function(){b(this).find("span:last").animate({opacity:1},"slow")})})},function(){b(this).find("span:last").animate({opacity:0},"fast");b(this).stop().animate({height:20},"fast",function(){b(this).animate({width:o,opacity:0.7},"fast")})});a.append(d)}b(c).empty().append(a)};this.init();this.empty=function(){this.element.empty()};this.width=function(b){return b===a?this.element.width():
this.element.width(b)};this.height=function(b){return b===a?this.element.height():this.element.height(b)};this.append=function(b){return this.element.append(b)};this.drawImage=function(h,c,r){var c=b.extend({left:0,top:0,width:120,height:90,scaleMode:"fill",background:"none"},c),r=r===a?this.element:b(r,this.element),d=new Image;d.onload=function(){var a=document.createElement("a");b(a).attr({href:h.source});b(a).css({display:"block",position:"absolute",left:c.x,top:c.y,zIndex:c.z,width:c.width,height:c.height,
overflow:"hidden",background:c.background});b(a).click(c.onclick);b(a).hover(c.onmouseover,c.onmouseout);var n=document.createElement("img");n.src=d.src;var w;"fit"==c.scaleMode?w=F.fit(this.width,this.height,c.width,c.height):"fill"==c.scaleMode&&(w=F.fill(this.width,this.height,c.width,c.height));b(n).css({marginTop:w.top,marginRight:0,marginBottom:0,marginLeft:w.left,width:w.width,height:w.height,padding:0,border:"none",maxWidth:"none",maxHeight:"none",opacity:c.opacity});b(a).append(n);r.append(a)};
d.src=h.thumb}}function T(a,h,m){var d=this;this.canvas=a;this.albums=h;this.items=c(h);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.onOpen=function(){};d.onOpenItem={};this.settings=b.extend(!0,{image:{scaleMode:"fit",cornerRadius:10,align:"center",transitionEffect:"fade",transitionDuration:1,useShadow:!0},caption:{visibleMode:"onRollOver",position:"bottom",bgColor:0,bgAlpha:30,color:16777215,fontName:"Arial",fontSize:11},thumbBar:{useThumbBar:!0,position:"bottom",
scrollSpeed:10},thumbnail:{width:80,height:60,cornerRadius:10,alpha:70,outlineColor:3355443,outlineColorOnRollOver:6710886,outlineColorOnClick:10066329,useShadow:!0},slideshow:{start:!1,delay:2.5,loop:!0,stopAutoOnClick:!0}},m);this.settings=f(this.settings);(new Image).src=p.images.loader;d.settings.slideshow.start&&setTimeout(function(){d.slideshowStart()},500*d.settings.image.transitionDuration);this.render()}function L(a,h,m){this.canvas=a;this.albums=h;this.items=c(h);this.currentItem=-1;this.getCurrentItem=
function(){return this.items[this.currentItem]};this.defaultSettings={image:{scaleMode:"fill",padding:0,bgTintColor:16777215},thumbnail:{width:80,height:60,alpha:70},caption:{showCaption:!0},buttons:{showImageNavigationButtons:!0,showLinkButton:!0,showFacebookButton:!0,showTwitterButton:!0,showSlideshowButton:!0,showFullscreenButton:!0},slideshow:{start:!1,delay:2.5},translation:{image:"Image",clickToView:"Click to view",getLink:"Get link",shareWithFacebook:"Share with Facebook",tweet:"Tweet",startSlideshow:"Start slideshow",
stopSlideshow:"Stop slideshow",fullscreenMode:"Fullscreen mode"}};this.settings=b.extend(!0,this.defaultSettings,m);this.settings=f(this.settings);this.init()}function Q(a,h,m){this.canvas=a;this.albums=h;this.items=c(h);this.currentItem=-1;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={thumbnail:{width:120,height:90,alpha:85},colorScheme:{thumbsFrameColor:16777215,imageBGColor:1118481,useShadow:!0},imageCaption:{position:"top",color:16777215,bgColor:0,bgAlpha:30,
fontName:"Arial",fontSize:11,visibleMode:"always"}};this.settings=b.extend(!0,this.defaultSettings,m);this.settings=f(this.settings);this.page=0;E(p.images.loader,500);this.render()}function H(a,h,m){this.canvas=a;this.albums=h;this.items=c(h);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={initialState:"Load Image",slideshowDelay:2,showCaption:!0,base:{color:4080713,visibleFrame:5},buttons:{showSlideshowButton:!0,showThumbnailsButton:!0,
bgColor:15066854}};this.settings=b.extend(!0,this.defaultSettings,m);this.settings=f(this.settings);this.enableThumbnailsHover=!0;this.drag=!1;E(p.images.loader,500);this.init()}function S(a,h,m){var A=this;this.canvas=a;this.albums=h;this.settings=b.extend(!0,{imageAngle:30,maxImageWidth:0,useHighlight:!0,useScrollBar:!0,showReflections:!0,solidReflection:!0,reflectionAlpha:80,slideShow:!1,slideShowDelay:2,flipDuration:1,startPosition:"center",colorScheme:"custom",preloader:{stripesAlpha:45,barColor:0,
barAlpha:30,bgColor:0,bgAlpha:20,innerShadow:20,dropShadow:30},scrollbar:{bgColor:0,bgAlpha:40,handleColor:0,handleAlpha:40,arrowsColor:0,arrowsAlpha:40,innerShadow:20,dropShadow:20},caption:{textColor:16777215,bgColor:0,bgAlpha:80,frameColor:16777215,frameAlpha:40,shadowAlpha:50,multilingual:!1,multilingualFontSize:12},background:{bgColor:16777215,transparentBG:!0}},m);this.settings=f(this.settings);if(!this.settings.maxImageWidth)this.settings.maxImageWidth=parseInt(a.element.width()/2);if(d())this.settings.useScrollBar=
!1;this.showReflections=this.settings.showReflections&&M(this.canvas.element.css("backgroundColor"))&&!(b.browser.msie&&9>b.browser.version);this.items=c(h);this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.getItemX=function(b){return-(this.currentItem-b)};this.getItemZ=function(b){return parseInt(this.items.length/2)-Math.abs(this.getItemX(b))};this.currentItem="left"==this.settings.startPosition?0:"right"==this.settings.startPosition?this.items.length:Math.floor((this.items.length-
1)/2);(new Image).src=p.images.loader;this.scene=b('<div class="altgallery-scene"></div>');this.scene.css({position:"relative",width:a.width(),height:a.height()});this.canvas.element.append(this.scene);var o;U(this.scene,{touchstart:function(b){A.drag=!0;o=b.pageX},touchend:function(b){var b=b.pageX-o,a=Math.abs(b)>A.canvas.width()/2?2:1;30<b?(setTimeout(function(){A.drag=!1},100),A.prev(a)):-30>b?(setTimeout(function(){A.drag=!1},100),A.next(a)):A.drag=!1},touchcancel:function(){setTimeout(function(){A.drag=
!1},100)}});P(this.scene);this.render()}function N(a,h,c){this.canvas=a;this.albums=h;this.currentAlbum=0;this.getCurrentAlbum=function(){return this.albums[this.currentAlbum]};this.currentItem=0;this.getCurrentItem=function(){return this.getCurrentAlbum().items[this.currentItem]};this.settings=b.extend(!0,{initialState:"Show Albums",imageScaleMode:"fill",frameSize:5,frameColor:"#ffffff",backgroundColor:"#aac5d8",cornerRadius:7,iconWidth:90,iconHeight:55,iconPadding:10,panelBackgroundAlpha:50,showCaption:"always",
captionBackgroundAlpha:40,showButtons:"always",buttonsBackgroundAlpha:40,showAlbumsButton:!0,showThumbnailsButton:!0,showSlideshowButton:!0,showNavigationButton:!0,useEmbeddedFont:!0,fontName:"Arial",fontSize:11,translation:{Album:"Album",Albums:"Albums",Image:"Image",Images:"Images",Close:"CLOSE",BackToAlbums:"BACK TO ALBUMS",LoadingImage:"Loading Image",Of:"of"}},c);this.settings=f(this.settings);if(this.settings.useEmbeddedFont)this.settings.fontName="Tahoma",this.settings.fontSize=9;E(p.images.loader,
500);this.cache=function(){if(0<=this.currentItem){var b=this.getCurrentAlbum().items,a=[],h,c;for(c=this.currentItem+1;c<this.currentItem+3;c++)(h=b[(b.length+c)%b.length])&&(h=h.source)&&a.push(h);for(c=this.currentItem-1;c>this.currentItem-2;c--)(h=b[(b.length+c)%b.length])&&(h=h.source)&&a.push(h);a.length&&R(a,100)}};this.render()}function ba(c,h,m){c=b(c);p=h;var d,o,e,k=J(),n=15;o=new $(c,h);d=h.config||{};(function(h){function m(a,h){var c=this;this.user=a;this.albumId=h;this.data={};this.title=
"";this.items=[];this.getData=function(a){b.ajax({url:"https://picasaweb.google.com/data/feed/base/user/"+this.user+"/albumid/"+this.albumId+"?alt=json",dataType:"json",success:function(b){c.data=b;if(b.feed){if(b.feed.title)c.title=b.feed.title.$t;if(b.feed.entry){c.items=[];for(var h=0;h<b.feed.entry.length;h++)c.items.push({source:b.feed.entry[h].content.src,thumb:b.feed.entry[h].media$group.media$thumbnail[1].url})}}"function"==typeof a&&a(c.data)},error:function(){"function"==typeof a&&a()}})}}
function o(){"function"==typeof h&&h(I)}function e(b,a,h,c){h=h||"";c=c||"";b.items=b.items||[];for(var m=b.items.length,d=0;d<a.length&&(k||d<n);d++)b.items[m]={id:m,source:h+a[d].source,thumb:a[d].thumb?c+a[d].thumb:h+a[d].source,description:a[d].description||"",link:a[d].link||"",target:a[d].target||""},m++}function u(b,h,c,m,r){m===a&&(m=d.settings.imagesFolder?d.settings.imagesFolder.replace(/\/+$/,"")+"/":"");r===a&&(r=r||d.settings.thumbnailsFolder?d.settings.thumbnailsFolder.replace(/\/+$/,
"")+"/":m);I[b]={id:b,description:c};e(I[b],h,m,r)}var I=[];if(q(d.albums)&&d.albums.length){for(var f=0,D=0;D<d.albums.length&&(k||3>D);D++)u(D,d.albums[D].items,d.albums[D].description,d.albums[D].imagesFolder,d.albums[D].thumbnailsFolder),d.albums[D].picasa&&d.albums[D].picasa.user&&d.albums[D].picasa.albumID&&(f++,function(b){setTimeout(function(){var a=new m(d.albums[b].picasa.user,d.albums[b].picasa.albumID);a.getData(function(){a.items.length&&e(I[b],a.items);f--})},10*f)}(D));if(f)var K=setInterval(function(){1>
f&&(clearInterval(K),o())},100);else o()}else if(q(d.items)&&d.items.length)if(u(0,d.items),d.settings&&d.settings.picasa&&d.settings.picasa.user&&d.settings.picasa.albumID){var g=new m(d.settings.picasa.user,d.settings.picasa.albumID);g.getData(function(){e(I[0],g.items);o()})}else o();else d.settings&&d.settings.picasa&&d.settings.picasa.user&&d.settings.picasa.albumID?(u(0,[]),g=new m(d.settings.picasa.user,d.settings.picasa.albumID),g.getData(function(){e(I[0],g.items);o()})):(u(0,function(a){var h=
[];b(a).find("img").each(function(){h.push({source:b(this).parent("a").attr("href")||b(this).attr("src"),thumb:b(this).attr("src"),description:this.title})});return h}(c)),o())})(function(a){function c(){function b(a){if(a.match(/Art/i))return"art";if(a.match(/Aura/i))return"aura";if(a.match(/Box/i))return"box";if(a.match(/Cubic/i))return"cubic";if(a.match(/PhotoFlow/i))return"photoflow";if(a.match(/Zen/i))return"zen"}Y!=32*ca&&(a=[]);switch(h.type?h.type.toLowerCase():d.galleryName?h.type=b(d.galleryName):
h.type="box"){case "art":case "promo":e=new T(o,a,d.settings||{});break;case "aura":e=new L(o,a,d.settings||{});break;default:case "box":e=new Q(o,a,d.settings||{});break;case "cubic":e=new H(o,a,d.settings||{});break;case "photoflow":e=new S(o,a,d.settings||{});break;case "zen":e=new N(o,a,d.settings||{})}"function"==typeof m&&m(e)}b(document).ready(function(){setTimeout(function(){c()},100)})})}window.altgallery_id=window.altgallery_id||0;var aa=["3132372e302e302e31","6c6f63616c686f7374","666c6173682d67616c6c6572792e636f6d"];
sprintfWrapper={init:function(){if("undefined"==typeof arguments||1>arguments.length||"string"!=typeof arguments[0]||"undefined"==typeof RegExp)return null;for(var b=arguments[0],a=RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),c=[],d=[],o=0,e=0,k=0,e=0,n="",w=null;w=a.exec(b);)w[9]&&(o+=1),k=a.lastIndex-w[0].length,d[d.length]=b.substring(e,k),e=a.lastIndex,c[c.length]={match:w[0],left:w[3]?!0:!1,sign:w[4]||"",pad:w[5]||" ",min:w[6]||0,precision:w[8],code:w[9]||"%",negative:0>
parseInt(arguments[o])?!0:!1,argument:""+arguments[o]};d[d.length]=b.substring(e);if(0==c.length)return b;if(arguments.length-1<o)return null;b=null;for(b=0;b<c.length;b++)"%"==c[b].code?substitution="%":"b"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(2),substitution=sprintfWrapper.convert(c[b],!0)):"c"==c[b].code?(c[b].argument=""+String.fromCharCode(parseInt(Math.abs(parseInt(c[b].argument)))),substitution=sprintfWrapper.convert(c[b],!0)):"d"==c[b].code?(c[b].argument=
""+Math.abs(parseInt(c[b].argument)),substitution=sprintfWrapper.convert(c[b])):"f"==c[b].code?(c[b].argument=""+Math.abs(parseFloat(c[b].argument)).toFixed(c[b].precision?c[b].precision:6),substitution=sprintfWrapper.convert(c[b])):"o"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(8),substitution=sprintfWrapper.convert(c[b])):"s"==c[b].code?(c[b].argument=c[b].argument.substring(0,c[b].precision?c[b].precision:c[b].argument.length),substitution=sprintfWrapper.convert(c[b],
!0)):"x"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(16),substitution=sprintfWrapper.convert(c[b])):"X"==c[b].code?(c[b].argument=""+Math.abs(parseInt(c[b].argument)).toString(16),substitution=sprintfWrapper.convert(c[b]).toUpperCase()):substitution=c[b].match,n+=d[b],n+=substitution;return n+=d[b]},convert:function(b,a){b.sign=a?"":b.negative?"-":b.sign;var c=b.min-b.argument.length+1-b.sign.length,c=Array(0>c?0:c).join(b.pad);return b.left?"0"==b.pad||a?b.sign+b.argument+
c.replace(/0/g," "):b.sign+b.argument+c:"0"==b.pad||a?b.sign+c+b.argument:c+b.sign+b.argument}};sprintf=sprintfWrapper.init;var Y;location.href.match(/#jsgallerydebug$/);var W,O={};b.extend(b.support,{touch:"ontouchstart"in document});e();var Z=e().replace(/[^\/]*$/,""),F={fit:function(a,c,d,A,o){var e,k,n=a/c,o=b.extend({noEnlarge:!1,minWidth:16,minHeight:16},o);e=d;k=d/n;k>A&&(k=A,e=k*n);if(e<o.minWidth)e=o.minWidth,k=e/n;if(k<o.minHeight)k=o.minHeight,e=k*n;if(o.noEnlarge&&(e>a||k>c))e=a,k=c;a=
(A-k)/2;return{left:Math.round((d-e)/2),top:Math.round(a),width:Math.round(e),height:Math.round(k),margin:0}},fill:function(b,a,c,d){var o=b/a,b=c,a=c/o;a<d&&(a=d,b=a*o);d=(d-a)/2;return{left:Math.round((c-b)/2),top:Math.round(d),width:Math.round(b),height:Math.round(a),margin:0}}},C=function(){function b(a,c,h){a.addEventListener?a.addEventListener(c,h,!1):a.attachEvent&&a.attachEvent("on"+c,h)}function a(c){var h=!1,d=function(){h||(h=!0,c())};document.write('<script defer src="//:" id="__onload_ie_pixastic__"><\/script>');
var m=document.getElementById("__onload_ie_pixastic__");m.onreadystatechange=function(){"complete"==m.readyState&&(m.parentNode.removeChild(m),d())};document.addEventListener&&document.addEventListener("DOMContentLoaded",d,!1);b(window,"load",d)}function c(){for(var b=d("pixastic",null,"img"),a=d("pixastic",null,"canvas"),h=b.concat(a),m=0;m<h.length;m++)(function(){for(var b=h[m],a=[],c=b.className.split(" "),d=0;d<c.length;d++){var r=c[d];"pixastic-"==r.substring(0,9)&&(r=r.substring(9),""!=r&&
a.push(r))}if(a.length)if("img"==b.tagName.toLowerCase())if(c=new Image,c.src=b.src,c.complete)for(c=0;c<a.length;c++)(d=C.applyAction(b,b,a[c],null))&&(b=d);else c.onload=function(){for(var c=0;c<a.length;c++){var h=C.applyAction(b,b,a[c],null);h&&(b=h)}};else setTimeout(function(){for(var c=0;c<a.length;c++){var h=C.applyAction(b,b,a[c],null);h&&(b=h)}},1)})()}function d(b,a,c){var h=[];null==a&&(a=document);null==c&&(c="*");a=a.getElementsByTagName(c);c=a.length;b=RegExp("(^|\\s)"+b+"(\\s|$)");
for(i=0,j=0;i<c;i++)b.test(a[i].className)&&(h[j]=a[i],j++);return h}function o(b,a){if(C.debug)try{switch(a){case "warn":console.warn("Pixastic:",b);break;case "error":console.error("Pixastic:",b);break;default:console.log("Pixastic:",b)}}catch(c){}}"undefined"!=typeof pixastic_parseonload&&pixastic_parseonload&&a(c);var e=function(){var b=document.createElement("canvas"),a=!1;try{a=!!("function"==typeof b.getContext&&b.getContext("2d"))}catch(c){}return function(){return a}}(),k=function(){var b=
document.createElement("canvas"),a=!1,c;try{if("function"==typeof b.getContext&&(c=b.getContext("2d")))a="function"==typeof c.getImageData}catch(h){}return function(){return a}}(),n=function(){var b=!1,a=document.createElement("canvas");if(e()&&k()){a.width=a.height=1;a=a.getContext("2d");a.fillStyle="rgb(255,0,0)";a.fillRect(0,0,1,1);var c=document.createElement("canvas");c.width=c.height=1;var h=c.getContext("2d");h.fillStyle="rgb(0,0,255)";h.fillRect(0,0,1,1);a.globalAlpha=0.5;a.drawImage(c,0,
0);b=255!=a.getImageData(0,0,1,1).data[2]}return function(){return b}}();return{parseOnLoad:!1,debug:!1,applyAction:function(b,a,c,h){var h=h||{},d="canvas"==b.tagName.toLowerCase();if(d&&C.Client.isIE())return C.debug&&o("Tried to process a canvas element but browser is IE."),!1;var m,r,A=!1;C.Client.hasCanvas()&&(A=!!h.resultCanvas,m=h.resultCanvas||document.createElement("canvas"),r=m.getContext("2d"));var k=b.offsetWidth,e=b.offsetHeight;if(d)k=b.width,e=b.height;if(0==k||0==e)if(null==b.parentNode){var n=
b.style.position,I=b.style.left;b.style.position="absolute";b.style.left="-9999px";document.body.appendChild(b);k=b.offsetWidth;e=b.offsetHeight;document.body.removeChild(b);b.style.position=n;b.style.left=I}else{C.debug&&o("Image has 0 width and/or height.");return}if(-1<c.indexOf("(")&&(n=c,c=n.substr(0,n.indexOf("(")),n=n.match(/\((.*?)\)/),n[1])){n=n[1].split(";");for(I=0;I<n.length;I++)if(thisArg=n[I].split("="),2==thisArg.length)if("rect"==thisArg[0]){var f=thisArg[1].split(",");h[thisArg[0]]=
{left:parseInt(f[0],10)||0,top:parseInt(f[1],10)||0,width:parseInt(f[2],10)||0,height:parseInt(f[3],10)||0}}else h[thisArg[0]]=thisArg[1]}h.rect?(h.rect.left=Math.round(h.rect.left),h.rect.top=Math.round(h.rect.top),h.rect.width=Math.round(h.rect.width),h.rect.height=Math.round(h.rect.height)):h.rect={left:0,top:0,width:k,height:e};n=!1;C.Actions[c]&&"function"==typeof C.Actions[c].process&&(n=!0);if(!n)return C.debug&&o('Invalid action "'+c+'". Maybe file not included?'),!1;if(!C.Actions[c].checkSupport())return C.debug&&
o('Action "'+c+'" not supported by this browser.'),!1;if(C.Client.hasCanvas()){if(m!==b)m.width=k,m.height=e;if(!A)m.style.width=k+"px",m.style.height=e+"px";r.drawImage(a,0,0,k,e);b.__pixastic_org_image?(m.__pixastic_org_image=b.__pixastic_org_image,m.__pixastic_org_width=b.__pixastic_org_width,m.__pixastic_org_height=b.__pixastic_org_height):(m.__pixastic_org_image=b,m.__pixastic_org_width=k,m.__pixastic_org_height=e)}else if(C.Client.isIE()&&"undefined"==typeof b.__pixastic_org_style)b.__pixastic_org_style=
b.style.cssText;a={image:b,canvas:m,width:k,height:e,useData:!0,options:h};if(!C.Actions[c].process(a))return!1;if(C.Client.hasCanvas()){a.useData&&C.Client.hasCanvasImageData()&&(m.getContext("2d").putImageData(a.canvasData,h.rect.left,h.rect.top),m.getContext("2d").fillRect(0,0,0,0));if(!h.leaveDOM){m.title=b.title;m.imgsrc=b.imgsrc;if(!d)m.alt=b.alt;if(!d)m.imgsrc=b.src;m.className=b.className;m.style.cssText=b.style.cssText;m.name=b.name;m.tabIndex=b.tabIndex;m.id=b.id;b.parentNode&&b.parentNode.replaceChild&&
b.parentNode.replaceChild(m,b)}return h.resultCanvas=m}return b},prepareData:function(b,a){var c=b.canvas.getContext("2d"),h=b.options.rect,c=c.getImageData(h.left,h.top,h.width,h.height),h=c.data;if(!a)b.canvasData=c;return h},process:function(b,a,c,h){if("img"==b.tagName.toLowerCase()){var d=new Image;d.src=b.src;if(d.complete){var m=C.applyAction(b,d,a,c);h&&h(m);return m}d.onload=function(){var m=C.applyAction(b,d,a,c);h&&h(m)}}if("canvas"==b.tagName.toLowerCase())return m=C.applyAction(b,b,a,
c),h&&h(m),m},revert:function(b){if(C.Client.hasCanvas()){if("canvas"==b.tagName.toLowerCase()&&b.__pixastic_org_image)return b.width=b.__pixastic_org_width,b.height=b.__pixastic_org_height,b.getContext("2d").drawImage(b.__pixastic_org_image,0,0),b.parentNode&&b.parentNode.replaceChild&&b.parentNode.replaceChild(b.__pixastic_org_image,b),b}else if(C.Client.isIE()&&"undefined"!=typeof b.__pixastic_org_style)b.style.cssText=b.__pixastic_org_style},Client:{hasCanvas:e,hasCanvasImageData:k,hasGlobalAlpha:n,
isIE:function(){return!!document.all&&!!window.attachEvent&&!window.opera}},Actions:{}}}();C.Actions.blurfast={process:function(b){var a=parseFloat(b.options.amount)||0,c=!!(b.options.clear&&"false"!=b.options.clear),a=Math.max(0,Math.min(5,a));if(C.Client.hasCanvas()){var d=b.options.rect,o=b.canvas.getContext("2d");o.save();o.beginPath();o.rect(d.left,d.top,d.width,d.height);o.clip();var e=Math.round(b.width/2),k=Math.round(b.height/2),n=document.createElement("canvas");n.width=e;n.height=k;for(var c=
!1,a=Math.round(20*a),w=n.getContext("2d"),s=0;s<a;s++){var f=Math.max(1,Math.round(e-s)),v=Math.max(1,Math.round(k-s));w.clearRect(0,0,e,k);w.drawImage(b.canvas,0,0,b.width,b.height,0,0,f,v);c&&o.clearRect(d.left,d.top,d.width,d.height);o.drawImage(n,0,0,f,v,0,0,b.width,b.height)}o.restore();b.useData=!1;return!0}if(C.Client.isIE())return c=10*a,b.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius="+c+")",b.image.style.marginLeft=(parseInt(b.image.style.marginLeft,10)||0)-Math.round(c)+
"px",b.image.style.marginTop=(parseInt(b.image.style.marginTop,10)||0)-Math.round(c)+"px",!0},checkSupport:function(){return C.Client.hasCanvas()||C.Client.isIE()}};var ca=23;T.prototype.render=function(){function a(){var r=c.thumbBar=b('<div class="altgallery-thumbBar"></div>'),k,e,w,s,f,v={};switch(d.thumbBar.position.toLowerCase()){default:case "bottom":k="horizontal";e=A.width()-20;w=d.thumbnail.height+4;s=o.length*(d.thumbnail.width+5)-5;f=w;v.left=10;v.bottom=7;v.width=e;v.height=w;break;case "top":k=
"horizontal";e=A.width()-20;w=d.thumbnail.height+4;s=o.length*(d.thumbnail.width+5)-5;f=w;v.left=10;v.top=9;v.width=e;v.height=w;break;case "left":k="vertical";e=d.thumbnail.width+4;w=A.height()-20;s=e;f=o.length*(d.thumbnail.height+5)-5;v.left=9;v.top=10;v.width=e;v.height=w;break;case "right":k="vertical",e=d.thumbnail.width+4,w=A.height()-20,s=e,f=o.length*(d.thumbnail.height+5)-5,v.right=8,v.top=10,v.width=e,v.height=w}v.position="absolute";v.overflow="hidden";r.css(v);var u=b("<div></div>");
u.css({position:"relative",width:s,height:f});for(v=0;v<o.length;v++)(function(a){var A=b('<a href="'+o[a].source+'"></a>');A.css({position:"absolute",left:"horizontal"==k?a*(d.thumbnail.width+5):1,top:"horizontal"==k?1:a*(d.thumbnail.height+5),width:d.thumbnail.width-4,height:d.thumbnail.height-4,overflow:"hidden",border:"2px solid",borderColor:y(d.thumbnail.outlineColor),"-moz-border-radius":d.thumbnail.cornerRadius/2,"-webkit-border-radius":d.thumbnail.cornerRadius/2,"-khtml-border-radius":d.thumbnail.cornerRadius/
2,borderRadius:d.thumbnail.cornerRadius/2,opacity:d.thumbnail.alpha/100});A.hover(function(){var a=b(this);a.hasClass("altgallery-active")||(a.data("style",{opacity:a.css("opacity"),borderColor:a.css("borderTopColor")}),a.css({borderColor:y(d.thumbnail.outlineColorOnRollOver),opacity:1}))},function(){var a=b(this);a.hasClass("altgallery-active")||a.css(a.data("style"))});c.onOpenItem[a]=function(){var b=r.find("a").eq(a);b.parent().find("a").removeClass("altgallery-active").css({opacity:d.thumbnail.alpha/
100,borderColor:y(d.thumbnail.outlineColor)});b.addClass("altgallery-active").data("style",{opacity:1,borderColor:y(d.thumbnail.outlineColorOnClick)}).css(b.data("style"));(function(){var b;if("horizontal"==k&&e<s){var c=0-(a*(d.thumbnail.width+5)-e/2+d.thumbnail.width/2),h=0-s+e;0<c&&(c=0);c<h&&(c=h);u.animate({left:c});u.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){u.animate({left:c},1E3)},1E3)})}else w<f&&(c=0-(a*(d.thumbnail.height+5)-w/2+d.thumbnail.height/2),h=0-f+w,0<
c&&(c=0),c<h&&(c=h),u.animate({top:c}),u.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){u.animate({top:c},1E3)},1E3)}));u.unbind("mouseenter").mouseenter(function(){clearTimeout(b)})})()};A.click(function(){if(!c.drag)c.currentItem=a,b(this).hasClass("altgallery-active")||c.open(o[a]);return!1});u.append(A);var v=new Image;v.onload=function(){var c=b('<img src="'+o[a].thumb+'" alt="" />');l(c);c.css({position:"absolute",border:"none"});c.css(F.fill(this.width,this.height,d.thumbnail.width-
4,d.thumbnail.height-4));d.thumbnail.useShadow&&A.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});A.append(c)};v.src=o[a].thumb})(v);r.append(u);(function(){function a(){p=!0;u.stop();l=setInterval(function(){var b=parseInt(u.css("left"))+parseInt(d.thumbBar.scrollSpeed);0<b?(u.css("left",0),g()):u.css("left",b)},25)}function A(){p=!0;u.stop();
l=setInterval(function(){var b=parseInt(u.css("left"))-parseInt(d.thumbBar.scrollSpeed),a=0-s+e;b<a?(u.css("left",a),g()):u.css("left",b)},25)}function o(){p=!0;u.stop();l=setInterval(function(){var b=parseInt(u.css("top"))+parseInt(d.thumbBar.scrollSpeed);0<b?(u.css("top",0),g()):u.css("top",b)},25)}function v(){p=!0;u.stop();l=setInterval(function(){var b=parseInt(u.css("top"))-parseInt(d.thumbBar.scrollSpeed),a=0-f+w;b<a?(u.css("top",a),g()):u.css("top",b)},25)}function g(){clearInterval(l);p=
!1}var l,p=!1;"horizontal"==k&&e<s?(r.mousemove(function(d){c.drag||(d=d.pageX-b(this).offset().left,30>d?p||a():d>e-30?p||A():g())}),u.draggable({axis:"x",start:function(){c.drag=!0},stop:function(b,a){var d=a.position.left,m=0-s+e;0<d?u.animate({left:0},"fast"):d<m&&u.animate({left:m},"fast");setTimeout(function(){c.drag=!1},100)}})):w<f&&(r.mousemove(function(a){c.drag||(a=a.pageY-b(this).offset().top,30>a?p||o():a>w-30?p||v():g())}),u.draggable({axis:"y",start:function(){c.drag=!0},stop:function(b,
a){var d=a.position.top,m=0-f+w;0<d?u.animate({top:0},"fast"):d<m&&u.animate({top:m},"fast");setTimeout(function(){c.drag=!1},100)}}));P(u);r.mouseleave(function(){g()})})();A.element.append(r)}var c=this,d=this.settings,A=this.canvas,o=this.items;(function(){var a=b('<div class="altgallery-imageFrame" style="position:absolute;"></div>'),r={},e;if(d.thumbBar.useThumbBar)switch(d.thumbBar.position.toLowerCase()){default:case "bottom":e=!0;r.left=10;r.top=10;r.width=A.width()-20;r.height=A.height()-
d.thumbnail.height-30;break;case "top":e=!0;r.left=10;r.bottom=10;r.width=A.width()-20;r.height=A.height()-d.thumbnail.height-30;break;case "left":e=!1;r.right=10;r.top=10;r.width=A.width()-d.thumbnail.width-30;r.height=A.height()-20;break;case "right":e=!1,r.left=10,r.top=10,r.width=A.width()-d.thumbnail.width-30,r.height=A.height()-20}else r.left=10,r.top=10,r.width=A.width()-20,r.height=A.height()-20;a.css(r);A.element.append(a);var o,f;U(a,{touchstart:function(b){c.drag=!0;o=b.pageX;f=b.pageY},
touchend:function(b){b=e?b.pageX-o:b.pageY-f;30<b?(setTimeout(function(){c.drag=!1},100),c.prev()):-30>b?(setTimeout(function(){c.drag=!1},100),c.next()):c.drag=!1},touchcancel:function(){c.drag=!1}});P(a)})();d.thumbBar.useThumbBar?(a(),A.element.find(".altgallery-thumbBar a").eq(c.currentItem).click()):c.open(c.getCurrentItem())};T.prototype.open=function(a){var c=this,d=this.settings,A=this.canvas,e=A.element.find(".altgallery-imageFrame"),f=b('<img class="altgallery-preloader" src="'+p.images.loader+
'" alt="" />');l(f);f.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});E(a.source,function(k){f.hide();A.element.find(".altgallery-preloader").remove();var n=d.image.scaleMode.toLowerCase(),w="fill"==n?F.fill(k.width,k.height,e.width(),e.height()):F.fit(k.width,k.height,e.width(),e.height()),s;a.link?(s=b("<a></a>"),s.attr("href",a.link),a.target&&s.attr("target",a.target)):s=b("<div></div>");s.click(function(){if(c.drag)return!1});s.css({display:"block",position:"absolute",
left:"fill"==n?0:w.left,top:"fill"==n?0:w.top,width:"fill"==n?e.width():w.width,height:"fill"==n?e.height():w.height,overflow:"hidden","-moz-border-radius":d.image.cornerRadius/2,"-webkit-border-radius":d.image.cornerRadius/2,"-khtml-border-radius":d.image.cornerRadius/2,borderRadius:d.image.cornerRadius/2});d.image.useShadow&&s.css({"-moz-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"1px 1px 2px rgba(0, 0, 0, 0.5)",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)"});
var g=b('<img src="'+k.src+'" alt="" />');l(g);g.css({position:"absolute",left:"fill"==n?w.left:0,top:"fill"==n?w.top:0,width:w.width,height:w.height});s.append(g);if(a.description&&"never"!=d.caption.visibleMode.toLowerCase()){var v=b("<div></div>");v.html(a.description);v.css({position:"absolute",left:0,width:w.width,padding:"9px 10px",fontFamily:d.caption.fontName,fontSize:d.caption.fontSize,lineHeight:1.25,color:y(d.caption.color),background:t(d.caption.bgColor,d.caption.bgAlpha/100)});if("top"==
d.caption.position.toLowerCase()){if(v.css({top:0,borderBottom:"1px solid",borderBottomColor:t("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==d.caption.visibleMode.toLowerCase()){var u=1.25*d.caption.fontSize+18;v.css({top:-u}).hide();g.hover(function(){v.show().stop().animate({top:0},p.animation.duration)},function(){v.animate({top:-u},p.animation.duration,function(){v.hide()})})}}else v.css({bottom:0,borderTop:"1px solid",borderTopColor:t("#000000",(d.caption.bgAlpha+10)/100)}),"onrollover"==
d.caption.visibleMode.toLowerCase()&&(u=1.25*d.caption.fontSize+18,v.css({bottom:-u}).hide(),g.hover(function(){v.show().stop().animate({bottom:0},p.animation.duration)},function(){v.animate({bottom:-u},p.animation.duration,function(){v.hide()})}));s.append(v)}switch(d.image.transitionEffect.toLowerCase()){default:case "fade":e.animate({opacity:0},{duration:500*d.image.transitionDuration,easing:"linear",complete:function(){e.empty();e.append(s);e.animate({opacity:1},{duration:500*d.image.transitionDuration,
easing:"swing",complete:function(){c.onOpen(k)}})}});break;case "xfade":case "crossfade":e.css({opacity:1}),n=e.find("div"),n.size()?(n.animate({opacity:0},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){b(this).remove();c.onOpen(k)}}),e.append(s),s.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,easing:"linear"})):(e.append(s),s.css({opacity:0}).animate({opacity:1},{duration:1E3*d.image.transitionDuration,easing:"linear",complete:function(){c.onOpen(k)}}))}c.onOpenItem[parseInt(a.id)]()});
setTimeout(function(){A.element.find(".altgallery-preloader").remove();e.append(f)},500)};T.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};T.prototype.next=function(){this.currentItem<this.items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};T.prototype.slideshowStart=function(){var b=this;b.slideshow=!0;b.onOpen=function(){b.slideshowTimer&&clearInterval(b.slideshowTimer);b.slideshowTimer=
setTimeout(function(){b.next()},1E3*b.settings.slideshow.delay)};if(b.settings.slideshow.stopAutoOnClick){var a=function(){b.slideshowStop();b.canvas.element.unbind("click",a).find("a").unbind("click",a)};b.canvas.element.bind("click",a).find("a").bind("click",a)}};T.prototype.slideshowStop=function(){this.onOpen=function(){};this.slideshow=!1;clearInterval(this.slideshowTimer)};L.prototype.init=function(){var b=this,a=b.settings;b.initPreloader();b.initImage();b.initNavigation();b.initThumbnails();
b.initCaption();b.initButtons();var c,d=0;if((c=location.hash.match(/#galleryPhotoNumber=(\d+)/))||(c=location.href.match(/[?&]galleryPhotoNumber=(\d+)/)))d=c[1]-1;b.open(b.items[d],function(){a.slideshow.start&&b.slideshowStart()})};L.prototype.initPreloader=function(){var a=this.canvas;E(p.images.loader,500);var c=this.preloader=b('<img alt="" />');c.attr({src:p.images.loader}).css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});a.append(c)};L.prototype.initImage=
function(){var a=this,c=a.canvas,d=a.settings;if(0==d.image.padding)a.zeroPadding=!0,d.image.padding=10;var A=b("<div />");A.css({position:"absolute",left:0,top:0,width:c.width(),height:c.height()});c.append(A);if(!a.zeroPadding){var e=a.background=b("<div />");e.css({position:"absolute",left:0,top:0,zIndex:0,width:c.width(),height:c.height(),overflow:"hidden",background:y(d.image.bgTintColor)});A.append(e)}e=a.imageFrame=b("<div />");e.css({position:"absolute",left:d.image.padding,top:d.image.padding,
zIndex:1,width:c.width()-2*d.image.padding,height:c.height()-2*d.image.padding,overflow:"visible"});A.append(e);var f;U(A,{touchstart:function(b){a.drag=!0;f=b.pageX},touchend:function(b){b=b.pageX-f;30<b?(setTimeout(function(){a.drag=!1},100),a.prev()):-30>b?(setTimeout(function(){a.drag=!1},100),a.next()):a.drag=!1},touchcancel:function(){setTimeout(function(){a.drag=!1},100)}});P(A)};L.prototype.initNavigation=function(){this.settings.buttons.showImageNavigationButtons&&(this.initPrevButton(),
this.initNextButton())};L.prototype.initPrevButton=function(){var a=this,c=a.canvas,d=a.prevButton=b("<div></div>");d.css({position:"absolute",left:-10,top:(c.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center 0",backgroundImage:x(p.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){b(this).css({opacity:1})},function(){b(this).css({opacity:0.5})}).click(function(){a.prev();return!1});c.append(d)};L.prototype.initNextButton=function(){var a=this,c=
a.canvas,d=a.nextButton=b("<div></div>");d.css({position:"absolute",right:-10,top:(c.height()-69)/2,zIndex:1,width:72,height:69,background:"no-repeat center -75px",backgroundImage:x(p.images.folder+"aura-arrows.png"),opacity:0.5,cursor:"pointer"}).hover(function(){b(this).css({opacity:1})},function(){b(this).css({opacity:0.5})}).click(function(){a.next();return!1});c.append(d)};L.prototype.initThumbnails=function(){function a(){l||(l=!0,u=setInterval(function(){var b=parseInt(g.css("left"))+10;0<
b&&(b=0);g.css({left:b})},25))}function c(){l||(l=!0,u=setInterval(function(){var b=parseInt(g.css("left"))-10,a=-(v-o.width()+10);b<a&&(b=a);g.css({left:b})},25))}function d(){l=!1;clearInterval(u)}var e=this,o=e.canvas,f=e.settings,k=e.items,n=o.width(),w=e.thumbBar=b("<div />");w.css({position:"absolute",left:0,bottom:0,zIndex:1,width:n,height:f.thumbnail.height+50,background:"rgba(0,0,0,0.5)"});var s=b("<div />");s.css({position:"absolute",left:0,top:29,width:o.width(),height:1,background:"#fff",
opacity:0.7});z(s,{boxShadow:"0 1px 0 #000"});w.append(s);var g=b('<div class="altgallery-thumbnails" />');g.css({position:"absolute",left:0,bottom:10});var v=k.length*(f.thumbnail.width+10),s=Math.ceil(v/n),n=1<s?0:(n-v)/2-5,u,l=!1;o.element.mouseover(function(){w.stop().animate({opacity:1})});o.element.mouseleave(function(){d();w.stop().animate({opacity:0})});1<s&&(w.mousemove(function(e){e=e.pageX-b(this).offset().left;50>e?a():e>o.width()-50?c():d()}).mouseleave(function(){d()}),g.draggable({axis:"x",
start:function(){e.drag=!0},stop:function(b,a){var c=a.position.left,d=-(v-o.width()+10);0<c?g.animate({left:0},"fast"):c<d&&g.animate({left:d},"fast");setTimeout(function(){e.drag=!1},100)}}));for(s=0;s<k.length;s++){var p=b("<a></a>");p.attr({href:k[s].source}).css({position:"absolute",left:10+s*(f.thumbnail.width+10)+n,bottom:0,width:f.thumbnail.width,height:f.thumbnail.height,overflow:"hidden",opacity:parseInt(f.thumbnail.alpha)/100});(function(a,c){c.hover(function(){b(this).css({opacity:1});
z(this,{boxShadow:"0 0 6px #fff"})},function(){a!=e.currentItem&&(b(this).css({opacity:parseInt(f.thumbnail.alpha)/100}),z(this,{boxShadow:"none"}))}).click(function(){e.drag||e.open(k[a],function(){});return!1});E(k[a].thumb,function(a){var d=b('<img alt="" />');d.attr({src:a.src});d.css({position:"absolute"});d.css(F.fill(a.width,a.height,f.thumbnail.width,f.thumbnail.height));c.append(d)},50*a)})(s,p);g.append(p)}w.append(g);o.append(w);P(w)};L.prototype.initCaption=function(){var a=this.caption=
b("<div />");this.settings.caption.showCaption&&(a.css({position:"absolute",left:10,top:10,fontFamily:'"Times New Roman", Times, serif',fontSize:"12px",fontWeight:"bold",color:"#fff",textShadow:"0 1px 0 #000"}),this.thumbBar.append(a))};L.prototype.initButtons=function(){function a(){b(this).css({opacity:1})}function c(){b(this).css({opacity:0.5})}var d=this,e=d.settings,o=b("<div />");o.css({position:"absolute",right:5,top:7});var f={cssFloat:"left",width:16,height:16,margin:"0 0 0 4px",backgroundImage:x(p.images.folder+
"aura-buttons.png"),backgroundRepeat:"no-repeat",opacity:0.5,cursor:"pointer"},k=d.linkButton=b("<div />");e.buttons.showLinkButton&&(k.prop({title:e.translation.getLink}).css(f).css({backgroundPosition:"0 -40px"}).click(function(){var b=d.getCurrentItem();b.link&&g(b.link,b.target||"_blank")}).hover(a,c),o.append(k));e.buttons.showFacebookButton&&(k=b("<div />"),k.prop({title:e.translation.shareWithFacebook}).css(f).css({backgroundPosition:"0 -60px"}).click(function(){g("http://www.facebook.com/sharer.php?u="+
location.href+"%23galleryPhotoNumber="+(d.currentItem+1)+"&t="+d.getCurrentItem().description||"","_blank")}).hover(a,c),o.append(k));e.buttons.showTwitterButton&&(k=b("<div />"),k.prop({title:e.translation.tweet}).css(f).css({backgroundPosition:"0 -80px"}).click(function(){g("https://twitter.com/intent/tweet?url="+location.href+"%23galleryPhotoNumber="+(d.currentItem+1)+"&text="+d.getCurrentItem().description||"","_blank")}).hover(a,c),o.append(k));if(e.buttons.showLinkButton||e.buttons.showFacebookButton||
e.buttons.showTwitterButton)k=b("<div />"),k.css({cssFloat:"left",width:1,height:14,margin:"0 3px 0 5px",background:"#fff"}),o.append(k);e.buttons.showSlideshowButton&&(k=b("<div />"),k.prop({title:e.translation.startSlideshow}).css(f).css({backgroundPosition:"0 0"}).click(function(){d.slideshow?(d.slideshowStop(),b(this).css({backgroundPosition:"0 0"})):(d.slideshowStart(),b(this).css({backgroundPosition:"0 -20px"}))}).hover(a,c),o.append(k));d.thumbBar.append(o)};L.prototype.update=function(){this.updateThumbnails();
this.updateNavigation();this.updateCaption()};L.prototype.updateThumbnails=function(){var a=this,c=0;a.thumbBar.find(".altgallery-thumbnails a").each(function(){var d=b(this);c==a.currentItem?(d.css({opacity:1}),z(d,{boxShadow:"0 0 6px #fff"})):(d.css({opacity:parseInt(a.settings.thumbnail.alpha)/100}),z(d,{boxShadow:"none"}));c++})};L.prototype.updateNavigation=function(){this.settings.buttons.showImageNavigationButtons&&(0==this.currentItem?this.prevButton.hide():this.prevButton.show(),this.currentItem==
this.items.length-1?this.nextButton.hide():this.nextButton.show())};L.prototype.updateCaption=function(b){this.caption.html(b||this.getCurrentItem().description||this.settings.translation.image+" "+(this.currentItem+1)+"/"+this.items.length)};L.prototype.open=function(a,c){var d=this,e=d.canvas,o=d.settings;if(d.currentItem!=a.id){d.currentItem=a.id;d.getCurrentItem().link?d.linkButton.show():d.linkButton.hide();var f=setTimeout(function(){d.preloader.show()},500);E(a.source,function(a){clearTimeout(f);
d.preloader.hide();(function(){var c=b('<img alt="" />');c.attr({src:a.src}).css({position:"absolute"});var h,e=d.imageFrame.width(),r=d.imageFrame.height();if("fill"==o.image.scaleMode){h=F.fill(a.width,a.height,e,r);if(h.width>e)h.width=e,h.left=0;if(h.height>r)h.height=r,h.top=0}else h=F.fit(a.width,a.height,e,r);c.css(F.fill(a.width,a.height,h.width,h.height));var A=d.imageFrame.find("div"),e=b("<div />");e.css({position:"absolute",overflow:"hidden"}).css(h).hide();z(e,{boxShadow:"0 6px 6px rgba(0,0,0,0.6)"});
e.append(c);d.imageFrame.append(e);A.animate({opacity:"hide"},p.animation.duration);e.animate({opacity:"show"},p.animation.duration,function(){A.remove()})})();d.zeroPadding||function(){var c=b('<img alt="" />');c.attr({src:a.src}).css({position:"absolute"});c.css(F.fill(a.width,a.height,e.width(),e.height()));var h=d.background.find("div"),r=b("<div />");r.css({opacity:0});r.append(c);d.background.append(r);C.process(c.get(0),"blurfast",{amount:1.5});h.animate({opacity:0},2*p.animation.duration);
r.animate({opacity:0.5},2*p.animation.duration,function(){h.remove()})}();"function"==typeof c&&c(a);E(d.items[(d.currentItem+1)%d.items.length].source)});d.update()}};L.prototype.prev=function(b){0<this.currentItem?this.open(this.items[this.currentItem-1],b):this.open(this.items[this.items.length-1],b)};L.prototype.next=function(b){this.currentItem<this.items.length-1?this.open(this.items[this.currentItem+1],b):this.open(this.items[0],b)};L.prototype.slideshowStart=function(){var b=this,a=b.settings;
if(!b.slideshow){var c=function(){b.slideshowTimeoutId=setTimeout(function(){b.next(c)},1E3*a.slideshow.delay+2E3)};b.slideshow=!0;setTimeout(function(){b.next(c)},1E3*a.slideshow.delay)}};L.prototype.slideshowStop=function(){if(this.slideshow)this.slideshow=!1,clearTimeout(this.slideshowTimeoutId)};Q.prototype.render=function(c){var d=this,m=this.canvas,e=this.items,o=this.settings;if(c===a)c=d.page;m.element.empty();var f=m.width(),k=m.height(),n=parseInt(o.thumbnail.width),g=parseInt(o.thumbnail.height),
s=Math.floor((f-40)/n);1>s&&(s=1);var l=Math.floor((k-40)/g);1>l&&(l=1);c=Math.ceil(e.length/s);l>c&&(l=c);var v=s*l,u=d.pagesCount=Math.ceil(e.length/v),V=Math.floor(o.thumbnail.width)+2,q=Math.floor(o.thumbnail.height)+2,D=Math.floor((f-V*s)/2-8),K=Math.floor((k-q*l)/2-8),t=d.pageWidth=V*s,c=d.pageHeight=q*l,B=b('<div class="altgallery-frame" />'),k={position:"absolute",left:D,top:K,width:Math.floor(f-2*(D+8))+14,height:Math.floor(k-2*(K+8))+14,background:y(o.colorScheme.thumbsFrameColor),"-moz-border-radius":"4px",
"-webkit-border-radius":"4px","-khtml-border-radius":"4px",borderRadius:"4px"};o.colorScheme.useShadow&&(k=b.extend(k,{"-moz-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)","-khtml-box-shadow":"0 0 10px rgba(0, 0, 0, 0.5)",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)"}));B.css(k);m.element.append(B);f=b('<div class="altgallery-frameMask" />');k.background="#000";k.opacity=0.6;k.zIndex=20;k["-moz-box-shadow"]="none";k["-webkit-box-shadow"]="none";k["-khtml-box-shadow"]=
"none";k.boxShadow="none";f.css(k).hide();m.element.append(f);m=b("<div />");m.css({position:"absolute",left:8,top:8,width:t-2,height:c-2,overflow:"hidden"});var C=d.imagesContainer=b("<div />");C.css({position:"relative",left:0,top:0,width:V*s*u-2,height:q*l-2});m.append(C);B.append(m);d.drag=!1;var X=0;C.draggable({axis:"x",distance:30,start:function(b,a){X=a.position.left;d.drag=!0},stop:function(b,a){30<Math.abs(Math.abs(X)-Math.abs(a.position.left))?X<a.position.left?d.prevPage():d.nextPage():
d.placePage();setTimeout(function(){d.drag=!1},100)}});P(C);for(m=0;m<e.length;m++)u=m%s*V+Math.floor(m/v)*t,f=Math.floor(m/s)%l*q,function(a,c,m){var r=b("<img />"),k=b("<a />");k.attr({href:e[a].source}).css({display:"block",position:"absolute",left:Math.floor(c),top:Math.floor(m+0.5*g),width:n,height:g,overflow:"hidden",opacity:0,background:y(o.colorScheme.imageBGColor),border:"none",margin:0,padding:0}).click(function(){return!1});C.append(k);var f=function(){k.click(function(){if(!d.drag)d.currentItem=
a,d.open(e[a],{left:a%s*V+D,top:m+K});return!1}).mouseover(function(){r.stop().animate({opacity:1},p.animation.duration/2)}).mouseleave(function(){r.stop().animate({opacity:o.thumbnail.alpha/100},p.animation.duration/2)})};a<v?setTimeout(function(){k.animate({top:m,opacity:1},{duration:p.animation.duration,complete:f})},200*a):(k.css({top:m,opacity:1}),f());E(e[a].thumb,function(b){r.attr({src:b.src}).css({display:"block",position:"absolute",margin:0,padding:0,border:"none",opacity:o.thumbnail.alpha/
100}).css(F.fill(b.width,b.height,parseInt(o.thumbnail.width),parseInt(o.thumbnail.height)));k.append(r)},200*a)}(m,u,f);l=d.prevPageButton=b("<div />");l.css({position:"absolute",left:5,top:c/2-10,width:30,height:30,background:x(p.images.folder+"/left.png"),cursor:"pointer"});z(l,{borderRadius:"4px"});l.click(function(){d.prevPage()});B.append(l);l=d.nextPageButton=b("<div />");l.css({position:"absolute",right:5,top:c/2-10,width:30,height:30,background:x(p.images.folder+"/right.png"),cursor:"pointer"});
z(l,{borderRadius:"4px"});l.click(function(){d.nextPage()});B.append(l);B.mouseover(function(){d.showControls()});B.mouseleave(function(){d.hideControls()});d.hideControls();d.showControls()};Q.prototype.hideControls=function(){this.prevPageButton.hide();this.nextPageButton.hide()};Q.prototype.showControls=function(){0<this.page&&this.prevPageButton.show();this.page<this.pagesCount-1&&this.nextPageButton.show()};Q.prototype.open=function(c,d){var m=this,e=this.settings,o=b('<img class="altgallery-preloader" src="'+
p.images.loader+'" alt="" />');l(o);o.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});var f=b('<img src="'+c.thumb+'" />');E(c.thumb,function(k){b(".altgallery-imageFrame",m.canvas.element).remove();b(".altgallery-frameMask",m.canvas.element).fadeIn(p.animation.duration);var n=document.createElement("div");b(n).addClass("altgallery-imageFrame").css({position:"absolute",padding:8,background:y(e.colorScheme.imageBGColor),zIndex:30});b(n).hide();var g=F.fit(k.width,
k.height,m.canvas.width()-48,m.canvas.height()-48),l={left:g.left+16+g.width/3,top:g.top+16+g.height/3,width:g.width/3,height:g.height/3};if(d!==a){if(d.left!==a)l.left=d.left;if(d.top!==a)l.top=d.top}b(n).css(l);var k=F.fit(k.width,k.height,m.canvas.width()-48,m.canvas.height()-48),q={left:k.left+16+k.width/3,top:k.top+16+k.height/3,width:k.width/3,height:k.height/3,margin:0,padding:0,border:"none",maxWidth:"none",maxHeight:"none",cursor:"pointer"};f.css(q);b(n).append(f);m.canvas.element.append(n);
f.animate(k,p.animation.duration);b(n).animate({opacity:"show",left:g.left+16,top:g.top+16,width:g.width,height:g.height},p.animation.duration,function(){var a=b('<div class="captionContainer"></div>');a.css({position:"absolute",left:8,top:8,width:g.width,height:g.height,overflow:"hidden",cursor:"pointer"});b(n).append(a);if(c.description){var d=parseInt(e.imageCaption.fontSize),d=d||m.defaultSettings.imageCaption.fontSize,h=b("<div><div>"+c.description+"</div></div>");h.css({position:"absolute",
left:0,width:g.width,fontFamily:e.imageCaption.fontName,fontSize:d+"px",lineHeight:1.25,color:y(e.imageCaption.color),background:t(e.imageCaption.bgColor,e.imageCaption.bgAlpha/100)});a.append(h);"bottom"==e.imageCaption.position.toLowerCase()?(h.css({bottom:"-33px",borderTop:"1px solid "+t(e.imageCaption.bgColor,(e.imageCaption.bgAlpha+10)/100)}),h.children("div").css({padding:"8px 10px 10px"}),h.animate({bottom:0})):(h.css({top:"-33px",borderBottom:"1px solid "+t(e.imageCaption.bgColor,(e.imageCaption.bgAlpha+
10)/100)}),h.children("div").css({padding:"10px 10px 8px"}),h.animate({top:0}))}var k=b('<a class="altgallery-close" style="position:absolute; right:-15px; top:-13px; width:30px; height:30px; z-index:40; background:no-repeat center; cursor:pointer;"></a>');k.css({backgroundImage:x(p.images.close)});k.click(function(){b(this).remove();h&&h.remove();l.opacity="hide";b(n).animate(l,p.animation.duration,function(){b(this).remove()});f.animate(q,p.animation.duration);b(".altgallery-frameMask",m.canvas.element).fadeOut(p.animation.duration)});
b(n).append(k);a.click(function(){k.remove();h&&h.remove();l.opacity="hide";b(n).animate(l,p.animation.duration,function(){b(this).remove();m.next()});f.animate(q,p.animation.duration)});setTimeout(function(){b(n).append(o)},500)})});E(c.source,function(){o.hide();m.canvas.element.find(".altgallery-preloader").remove();b(f).attr("src",c.source)})};Q.prototype.prev=function(){this.currentItem--;if(0>this.currentItem)this.currentItem=this.items.length-1;this.open(this.getCurrentItem())};Q.prototype.next=
function(){this.currentItem++;if(this.currentItem>=this.items.length)this.currentItem=0;this.open(this.getCurrentItem())};Q.prototype.placePage=function(){var b=this;b.hideControls();b.imagesContainer.animate({left:-(b.page*b.pageWidth)},{duration:p.animation.duration,complete:function(){b.showControls()}})};Q.prototype.prevPage=function(){this.page--;if(0>this.page)this.page=0;this.placePage()};Q.prototype.nextPage=function(){this.page++;if(this.page>=this.pagesCount)this.page=this.pagesCount-1;
this.placePage()};H.prototype.init=function(){var b=this.settings;this.initFrame();this.initNavigation();this.initCaption();this.initButtons();this.initThumbnails();this.initImage();switch(b.initialState.toLowerCase()){case "show thumbnails":this.showThumbnails();break;default:case "load image":case "show image":this.showImage();break;case "start slideshow":this.showImage(),this.slideshowStart()}};H.prototype.initFrame=function(){var a=this.canvas,c=this.settings,d=this.frame=b("<div></div>"),e=a.width()-
10,o=a.height()-10;d.css({position:"absolute",left:5,top:5,width:e,height:o,overflow:"hidden",background:y(c.buttons.bgColor)});z(d,{borderRadius:"5px",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)"});var f=this.content=b("<div></div>"),e=this.contentWidth=e-18,o=this.contentHeight=o-43;f.css({position:"absolute",left:9,top:9,width:e,height:o,background:y(c.base.color)});z(f,{borderRadius:"4px"});d.append(f);c=this.preloader=b('<img alt="" />');c.attr("src",p.images.loader);c.css({position:"absolute",left:"50%",
top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});f.append(c);a.append(d)};H.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};H.prototype.initPrevButton=function(){var a=this.settings,c=b("<div></div>");c.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:y(a.buttons.bgColor),cursor:"default"});z(c,{borderRadius:"10px",boxShadow:"5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(c);prevOverlay=b("<div></div>");prevOverlay.css({position:"absolute",
left:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:y(a.buttons.bgColor),cursor:"default"});this.frame.append(prevOverlay);var d=this.prevButton=b('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+p.images.folder+'cubic-buttons.png) no-repeat -8px -8px;"></div></div>');d.css({position:"absolute",left:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(d);var e;this.canvas.element.hover(function(){clearTimeout(e);
c.stop().show().css({opacity:1}).animate({left:0});d.stop().animate({left:0,opacity:1})},function(){e=setTimeout(function(){c.stop().animate({left:-12},function(){c.fadeOut()});d.stop().animate({left:-12,opacity:0})},100)});this.hidePrevButton=function(){c.css({visibility:"hidden"});prevOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showPrevButton=function(){c.css({visibility:"visible"});prevOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};H.prototype.initNextButton=
function(){var a=this.settings,c=b("<div></div>");c.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,background:y(a.buttons.bgColor),cursor:"default"});z(c,{borderRadius:"10px",boxShadow:"-5px 0 15px rgba(0, 0, 0, 0.5)"});this.frame.append(c);nextOverlay=b("<div></div>");nextOverlay.css({position:"absolute",right:0,top:this.contentHeight/2-30,zIndex:10,width:9,height:80,background:y(a.buttons.bgColor),cursor:"default"});this.frame.append(nextOverlay);var d=
this.nextButton=b('<div><div style="margin:25px 0 0 6px; width:9px; height:9px; background:url('+p.images.folder+'cubic-buttons.png) no-repeat -8px -33px;"></div></div>');d.css({position:"absolute",right:0,top:this.contentHeight/2-20,zIndex:10,width:21,height:60,cursor:"pointer"});this.frame.append(d);var e;this.canvas.element.hover(function(){clearTimeout(e);c.stop().show().css({opacity:1}).animate({right:0});d.stop().animate({right:0,opacity:1})},function(){e=setTimeout(function(){c.stop().animate({right:-12},
function(){c.fadeOut()});d.stop().animate({right:-12,opacity:0})},100)});this.hideNextButton=function(){c.css({visibility:"hidden"});nextOverlay.css({visibility:"hidden"});d.css({visibility:"hidden"})};this.showNextButton=function(){c.css({visibility:"visible"});nextOverlay.css({visibility:"visible"});d.css({visibility:"visible"})}};H.prototype.initCaption=function(){var a=this.caption=b("<div></div>");a.css({position:"absolute",left:10,bottom:10,width:this.contentWidth-60,overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",
fontSize:"11px",color:"#777"});this.frame.append(a)};H.prototype.initButtons=function(){var a=this,c=a.settings,d=function(){b(this).css({borderColor:"#fff #bbb #bbb #fff"});z(this,{boxShadow:"0 0 2px rgba(0, 0, 0, 0.2)"})},e=function(){b(this).css({borderColor:"transparent"});z(this,{boxShadow:"none"})};if(c.buttons.showSlideshowButton){var o=a.slideshowButton=b("<div></div>");o.css({position:"absolute",right:c.buttons.showThumbnailsButton?29:5,bottom:5,width:23,height:23,background:x(p.images.folder+
"cubic-buttons.png")+" no-repeat 0px -51px",border:"1px solid",borderColor:"transparent",cursor:"pointer"});z(o,{borderRadius:"3px 4px 3px 4px"});o.hover(d,e);o.click(function(){a.showImage();a.slideshowStart()});a.frame.append(o)}if(c.buttons.showThumbnailsButton)c=a.showThumbnailsButton=b("<div></div>"),c.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:x(p.images.folder+"cubic-buttons.png")+" no-repeat -1px -126px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),
z(c,{borderRadius:"3px 4px 3px 4px"}),c.hover(d,e),c.click(function(){a.showThumbnails()}),a.frame.append(c),c=a.showImagesButton=b("<div></div>"),c.css({position:"absolute",right:5,bottom:5,width:23,height:23,background:x(p.images.folder+"cubic-buttons.png")+" no-repeat -1px -101px",border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),z(c,{borderRadius:"3px 4px 3px 4px"}),c.hover(d,e),c.click(function(){a.showImage()}),a.frame.append(c)};H.prototype.initImage=function(){var a=this.imageWidth=
this.contentWidth-2*this.settings.base.visibleFrame,c=this.imageHeight=this.contentHeight-2*this.settings.base.visibleFrame,d=this.imagesFrame=b("<div></div>");d.css({position:"absolute",left:this.settings.base.visibleFrame,top:this.settings.base.visibleFrame,width:a,height:c,overflow:"hidden"}).hide();z(d,{borderRadius:"3px"});this.content.append(d);a=this.imagesContainer=b("<div></div>");a.css({position:"relative",left:0,top:0});d.append(a)};H.prototype.showImage=function(b){var a=this,c=function(){function b(){setTimeout(function(){a.drag=
!1},100)}a.cleanup();a.thumbnailsFrame.hide();a.imagesFrame.show();a.showImagesButton.hide();a.showThumbnailsButton.show();a.showPrevButton();a.showNextButton();a.prevButton.unbind("click").click(function(){a.slideshowStop();a.prev()});a.nextButton.unbind("click").click(function(){a.slideshowStop();a.next()});var c=0;a.imagesContainer.draggable({axis:"x",distance:30,start:function(b,d){a.drag=!0;c=d.position.left},stop:function(d,e){30<Math.abs(Math.abs(c)-Math.abs(e.position.left))?c<e.position.left?
a.prev(p.animation.duration,b):a.next(p.animation.duration,b):a.place(p.animation.duration,b)}});a.imagesContainer.unbind("dblclick").dblclick(function(){a.showThumbnails()});P(a.imagesContainer)};!1!==b?(a.hidePrevButton(),a.hideNextButton(),a.open(a.getCurrentItem(),c)):c()};H.prototype.initThumbnails=function(){function a(){c.cleanup()}var c=this,d=c.canvas,e=c.thumbnailsWidth=c.contentWidth-2*c.settings.base.visibleFrame,o=c.thumbnailsHeight=c.contentHeight-2*c.settings.base.visibleFrame,f=c.thumbnailsFrame=
b("<div></div>");f.css({position:"absolute",left:c.settings.base.visibleFrame,top:c.settings.base.visibleFrame,width:e,height:o,overflow:"hidden"}).hide();z(f,{borderRadius:"3px"});c.content.append(f);var k=c.thumbnailsContainer=b('<div class="thumbnailsContainer"></div>');k.css({position:"relative",left:0,top:0,width:e*Math.ceil(c.items.length/20),height:o});f.append(k);for(var n=Math.round((e-5)/5),g=Math.round((o-4)/4),s=Math.round((e-5*n)/10),p=Math.round((o-4*g)/8),o=0;o<c.items.length;o++)(function(o,
f){E(f.thumb,function(I){var q=o%5,D=Math.floor(o%20/5),K=b('<a class="altgallery-thumbnail altgallery-thumbnail-'+o+'"></a>');l(K);K.attr({href:f.source}).css({display:"block",position:"absolute",left:q*n+Math.floor(o/20)*e+1*q+s,top:D*g+1*D+p,width:n,height:g,overflow:"hidden",cursor:"pointer",zIndex:Math.floor(o%20/5)});z(K,{boxShadow:"0px 3px 3px rgba(0, 0, 0, 0.5)"});K.mouseover(function(){if(c.enableThumbnailsHover&&!c.drag){var l=0;0==q?l=n/8:4==q&&(l=-n/8);var s=0;0==D?s=g/8:3==D&&(s=-g/8);
c.updateCaption(f.description||"Image "+(o+1)+" / "+c.items.length);c.cleanup();d.element.find(".altgallery-thumbnail").css({opacity:0.8});var p=b(this).clone();p.addClass("altgallery-clone");p.css({left:b(this).offset().left-k.offset().left,top:b(this).offset().top-k.offset().top,zIndex:10,opacity:1});z(p,{boxShadow:"5px 15px 13px rgba(0, 0, 0, 0.7)"});k.append(p);var K=p.find("img");p.animate({width:1.25*n,height:1.25*g,marginLeft:-n/8+l,marginTop:-g/8+s},{duration:"fast",easing:"linear",step:function(){K.css(F.fill(I.width,
I.height,p.width(),p.height()))}});p.click(function(){if(!c.drag)c.currentItem=o,p.unbind("mouseleave"),c.canvas.element.unbind("mouseleave",a),z(p,{boxShadow:"none"}),p.animate({left:c.currentPage*e,top:0,width:c.imageWidth,height:c.imageHeight,marginLeft:0,marginTop:0},{duration:"normal",step:function(){K.css(F.fill(I.width,I.height,p.width(),p.height()))},complete:function(){c.showImage()}});return!1});p.mouseleave(function(){c.cleanup();c.updateCaption(" ")})}});K.click(function(){if(!c.drag)c.currentItem=
o,c.showImage();return!1});var x=b("<img />");x.attr({src:f.thumb}).css({display:"block",position:"absolute",border:"none"}).css(F.fill(I.width,I.height,n,g));K.append(x);k.append(K)})})(o,c.items[o]);c.canvas.element.mouseleave(a);c.currentPage=0;c.preloader.hide()};H.prototype.showThumbnails=function(){function b(a,c){e.thumbnailsContainer.stop().animate({left:-e.currentPage*e.thumbnailsWidth},{duration:a||2*p.animation.duration,complete:function(){e.enableThumbnailsHover=!0;"function"==typeof c&&
c()}})}function a(c,d){if(0<e.currentPage)e.currentPage--,e.enableThumbnailsHover=!1,e.cleanup();b(c,d);e.updateNavigation()}function c(a,d){if(e.currentPage<Math.ceil(e.items.length/20)-1)e.currentPage++,e.enableThumbnailsHover=!1,e.cleanup();b(a,d);e.updateNavigation()}function d(){setTimeout(function(){e.drag=!1},100)}var e=this;e.slideshow&&e.slideshowStop();e.updateCaption(" ");e.imagesFrame.hide();e.thumbnailsFrame.show();e.showThumbnailsButton.hide();e.showImagesButton.show();e.prevButton.unbind("click").click(function(){a()});
e.nextButton.unbind("click").click(function(){c()});e.updateNavigation();var f=0;e.thumbnailsContainer.draggable({axis:"x",distance:30,start:function(b,a){e.drag=!0;f=a.position.left;e.cleanup()},stop:function(e,o){30<Math.abs(Math.abs(f)-Math.abs(o.position.left))?f<o.position.left?a(p.animation.duration,d):c(p.animation.duration,d):b(p.animation.duration,d)}});P(e.thumbnailsContainer)};H.prototype.updateNavigation=function(){var b=Math.ceil(this.items.length/20);0<this.currentPage?this.showPrevButton():
this.hidePrevButton();this.currentPage<b-1?this.showNextButton():this.hideNextButton()};H.prototype.updateCaption=function(b){(b=b||this.getCurrentItem().description)?this.caption.html(b):this.caption.html("Image "+(this.currentItem+1)+" / "+this.items.length)};H.prototype.loadImage=function(c,d){var e=this,c=c%e.items.length;e.items[c]!==a&&E(e.items[c].source,function(a){var f="altgallery-image-"+c;if(!e.imagesContainer.find("."+f).size()){f=b('<div class="'+f+'"></div>');f.css({position:"absolute",
left:e.imageWidth*c,top:0,width:e.imageWidth,height:e.imageHeight,overflow:"hidden"});var g=b('<img style="position:absolute;" />');g.attr("src",a.src);g.css(F.fill(a.width,a.height,e.imageWidth,e.imageHeight));f.append(g);e.imagesContainer.append(f)}"function"==typeof d&&d(a)})};H.prototype.open=function(a,c){var d=this,e="altgallery-image-"+d.currentItem;d.imagesContainer.find("."+e).size()?"function"==typeof c&&c():(d.preloader.show(),E(a.source,function(a){var f=b('<div class="'+e+'"></div>');
f.css({position:"absolute",left:d.imageWidth*d.currentItem,top:0,width:d.imageWidth,height:d.imageHeight,overflow:"hidden"});var k=b('<img style="position:absolute;" />');k.attr("src",a.src);k.css(F.fill(a.width,a.height,d.imageWidth,d.imageHeight));f.append(k);d.imagesContainer.append(f);d.preloader.hide();"function"==typeof c&&c()}));d.imagesContainer.stop().css({left:-d.imageWidth*d.currentItem});d.updateCaption();d.loadImage(a.id+1);d.loadImage(a.id-1)};H.prototype.place=function(b,a){this.imagesContainer.stop().animate({left:-this.imageWidth*
this.currentItem},{duration:b||2*p.animation.duration,complete:function(){"function"==typeof a&&a()}})};H.prototype.prev=function(b,a){var c=this;if(0<c.currentItem){c.currentItem--;var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();c.place(b,a);c.updateCaption();c.loadImage(c.currentItem-1)})}else c.currentItem=c.items.length-1,c.showImage()};H.prototype.next=function(b,a){var c=this;if(c.currentItem<c.items.length-1){c.currentItem++;
var d=setTimeout(function(){c.preloader.show()},500);c.loadImage(c.currentItem,function(){clearTimeout(d);c.preloader.hide();c.place(b,function(){c.slideshow&&c.slideshowStart();"function"==typeof a&&a()});c.updateCaption();c.loadImage(c.currentItem+1)})}else c.currentItem=0,c.showImage(),c.slideshow&&c.slideshowStart()};H.prototype.slideshowStart=function(){var b=this;b.showImage(!1);clearTimeout(b.slideshowTimer);b.slideshow=!0;b.slideshowButton.css({background:x(p.images.folder+"cubic-buttons.png")+
" no-repeat 0px -76px"});b.slideshowButton.unbind("click").click(function(){b.slideshowStop()});b.slideshowTimer=setTimeout(function(){b.next()},1E3*b.settings.slideshowDelay)};H.prototype.slideshowStop=function(){var b=this;b.slideshow=!1;clearTimeout(b.slideshowTimer);b.slideshowButton.css({background:x(p.images.folder+"cubic-buttons.png")+" no-repeat 0px -51px"});b.slideshowButton.unbind("click").click(function(){b.slideshowStart()})};H.prototype.cleanup=function(){this.canvas.element.find(".altgallery-clone").remove();
b(this.canvas.element).find(".altgallery-thumbnail").css({opacity:1})};S.prototype.showScrollbar=function(){var a=this,c=this.settings,d=this.canvas,e=b('<div class="altgallery-scrollbar"></div>'),f=Math.round(0.8*d.width())-36;e.css({position:"absolute",zIndex:1E3,left:(d.width()-f)/2,bottom:5,width:f+36,height:17,background:t(c.scrollbar.bgColor,c.scrollbar.bgAlpha/100),"-moz-border-radius":8,"-webkit-border-radius":8,borderRadius:8});if(b.browser.msie&&9>b.browser.version){var g=sprintf("%02x%s",
255*c.scrollbar.bgAlpha/100,y(c.scrollbar.bgColor).replace("#",""));e.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+g+",endColorstr=#"+g+")"})}var k=b('<div class="altgallery-scrollbar-handle"></div>'),n=f/a.items.length;k.css({position:"absolute",left:Math.round(a.currentItem*n),top:-10,width:Math.floor(n),height:30});var l=b("<div />");l.css({position:"relative",top:10,height:13,background:y(c.scrollbar.handleColor),opacity:c.scrollbar.handleAlpha/100,cursor:"ew-resize"});
l.hover(function(){l.css({opacity:1})},function(){l.css({opacity:c.scrollbar.handleAlpha/100})});k.append(l);k.draggable({axis:"x",containment:"parent",stop:function(b,c){a.currentItem=Math.floor(c.position.left/f*a.items.length);k.css({left:Math.round(a.currentItem*n)});a.animate()}});g=b("<div></div>");g.css({position:"relative",top:2,height:13,margin:"0 18px"});g.click(function(c){c=c.pageX-b(this).offset().left;a.currentItem=Math.floor(c/f*a.items.length);k.css({left:Math.round(a.currentItem*
n)});a.animate()});var s={position:"absolute",top:2,width:16,height:16,fontFamily:"Arial, Helvetica, sans-serif",fontSize:"10px",lineHeight:"14px",textAlign:"center",color:y(c.scrollbar.arrowsColor),opacity:c.scrollbar.arrowsAlpha/100,cursor:"pointer"},p=b("<div>&#9668;</div>");p.css(s);p.css({left:1});p.click(function(){a.prev()});e.append(p);p=b("<div>&#9658;</div>");p.css(s);p.css({right:1});p.click(function(){a.next()});e.append(p);g.append(k);e.append(g);d.element.append(e);P(k)};S.prototype.updateScrollbar=
function(){var b=this.canvas,a=(Math.round(0.8*b.width())-36)/this.items.length;b.element.find(".altgallery-scrollbar-handle").css({left:Math.round(this.currentItem*a)})};S.prototype.getItemStyle=function(b,a){var c=this.settings,d=this.canvas,e,f;e=this.getItemX(a);f=this.getItemZ(a);var k;k=Math.abs(e);var g=F.fit(b.width,b.height,c.maxImageWidth*(1>k?1:2>k?0.55:3>k?0.5:0.6-0.05*k),d.height()-60);return{zIndex:10*f,left:(d.width()-g.width)/2+e*d.width()/8+(e?e/k*c.maxImageWidth/3:0),top:(d.height()-
g.height)/2-30,width:g.width,height:g.height,opacity:e?0.8:1,transform:{rotateY:-(e?e/k:0)*c.imageAngle+"deg"}}};S.prototype.render=function(){function a(d,k){E(g[d].source,function(a){var n=c.getItemStyle(a,d),r=b('<a class="altgallery-item-'+d+'"></a>');g[d].link&&(r.attr("href",g[d].link),g[d].target&&r.attr("target",g[d].target));r.css({display:"block",position:"absolute",zIndex:n.zIndex,left:n.left,top:n.top,width:n.width,height:n.height,overflow:"visible",background:"#000",cursor:"pointer",
outline:"none"});p&&B(r,{rotateY:n.transform.rotateY});var s=b('<img src="" alt="" />');s.attr("src",a.src);l(s);s.css({display:"block",width:n.width,height:n.height,opacity:n.opacity});r.append(s);if(c.showReflections){a=s.clone();a.css({position:"absolute",opacity:e.reflectionAlpha/100,"-moz-transform":"scaleY(-1)","-webkit-transform":"scaleY(-1)","-o-transform":"scaleY(-1)","-ms-transform":"scaleY(-1)",transform:"scaleY(-1)",zIndex:1});var w=b('<div class="altgallery-overlay"></div>');w.css({position:"absolute",
top:n.height,width:n.width,height:n.height,background:f.element.css("backgroundColor"),zIndex:0});var v=b('<div class="altgallery-overlay"></div>');v.css({position:"absolute",top:n.height,width:n.width,height:n.height,zIndex:2});var n=f.element.css("backgroundColor"),q=[t(n,0),t(n,0.5),t(n,1)];b.browser.mozilla?v.css({background:"-moz-linear-gradient(top, "+q[0]+" 0%, "+q[1]+" 15%, "+q[2]+" 50%)"}):b.browser.webkit?v.css({background:"-webkit-linear-gradient(top, "+q[0]+" 0%, "+q[1]+" 15%, "+q[2]+
" 50%)"}):b.browser.opera?v.css({background:"-o-linear-gradient(top, "+q[0]+" 0%, "+q[1]+" 15%, "+q[2]+" 50%)"}):b.browser.msie?(n=y(n).replace("#",""),v.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00"+n+",endColorstr=#ff"+n+",GradientType=0)"})):v.css({background:"linear-gradient(top, "+q[0]+" 0%, "+q[1]+" 15%, "+q[2]+" 50%)"});r.append(a);r.append(w);r.append(v)}r.click(function(){if(!c.drag){c.currentItem+=k;if(0>c.currentItem)c.currentItem=0;else if(c.currentItem>=g.length)c.currentItem=
g.length-1;c.animate()}return!1}).hover(function(){s.css({opacity:1})},function(){s.css({opacity:k?0.8:1})});d==c.currentItem&&r.unbind("click").click(function(){if(c.drag)return!1});c.scene.append(r)})}var c=this,e=this.settings,f=this.canvas,g=this.items,p=!d();c.scene.empty();c.scene.css({"-webkit-perspective":400,"-moz-perspective":400,perspective:400});var k,n,w,s,q,v=0;s=c.currentItem;q=2*Math.max(s,g.length-s);for(n=1;n<=q;n++)k=s+(n%2?parseInt(n/2):-parseInt(n/2)),0<=k&&k<g.length&&function(b){setTimeout(function(){w=
c.getItemX(b);a(b,w)},100*v++)}(k);e.useScrollBar&&c.showScrollbar();b.browser.mozilla&&c.showReflections&&c.animate()};S.prototype.animate=function(){function b(d,g,k){E(e[d].source,function(b){function n(b){function c(a){return s[a]+(p[a]-s[a])*b/1E4}l.css({left:c("left"),top:c("top"),zIndex:parseInt(c("zIndex")),width:c("width"),height:c("height")});r.css({width:c("width"),height:c("height")});a.showReflections&&w.css({top:c("height"),width:c("width"),height:c("height")});f&&B(l,{rotateY:parseFloat(s.transform.rotateY)+
(parseFloat(p.transform.rotateY)-parseFloat(s.transform.rotateY))*b/1E4+"deg"})}var l=a.scene.find(".altgallery-item-"+d),r=l.find("img"),s={left:parseInt(l.css("left")),top:parseInt(l.css("top")),zIndex:parseInt(l.css("z-index")),width:l.width(),height:l.height(),opacity:l.find("img").css("opacity"),transform:B(l)},p=a.getItemStyle(b,d);k||l.show();l.unbind("click").click(function(){if(!a.drag){a.currentItem+=g;if(0>a.currentItem)a.currentItem=0;else if(a.currentItem>=e.length)a.currentItem=e.length-
1;a.animate()}return!1}).unbind("hover").hover(function(){r.first().css({opacity:1})},function(){r.first().css({opacity:g?0.8:1})});r.first().css({opacity:p.opacity});var w=l.find(".altgallery-overlay");l.stop().prop("animate",0);k?n(1E4):l.animate({animate:1E4},{duration:500*c.flipDuration,easing:"linear",step:function(b){n(b)},complete:function(){l.prop("animate",0);d==a.currentItem&&l.unbind("click").click(function(){if(a.drag)return!1})}})})}var a=this,c=this.settings,e=this.items,f=!d(),g,k,
n,l,s;l=a.currentItem;s=2*Math.max(l,e.length-l);for(k=1;k<=s;k++)if(g=l+(k%2?parseInt(k/2):-parseInt(k/2)),0<=g&&g<e.length){var p=Math.abs(a.currentItem-g);n=a.getItemX(g);4>p?b(g,n):(a.scene.find(".altgallery-item-"+g).hide(),b(g,n,!0))}c.useScrollBar&&a.updateScrollbar()};S.prototype.open=function(b){this.currentItem=b.id;this.animate()};S.prototype.prev=function(b){b=this.currentItem-(b||1);0>b&&(b=0);if(this.currentItem!=b)this.currentItem=b,this.animate()};S.prototype.next=function(b){b=this.currentItem+
(b||1);b>=this.items.length&&(b=this.items.length-1);if(this.currentItem!=b)this.currentItem=b,this.animate()};N.prototype.render=function(){var a=this,c=this.settings,d=this.canvas;d.element.css({fontFamily:c.fontName,fontSize:parseInt(c.fontSize)+"px",lineHeight:1.2*parseInt(c.fontSize)+"px"});(function(){var e=b('<div class="altgallery-imageFrame"></div>');e.css({width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,padding:c.frameSize,background:y(c.frameColor),borderRadius:c.cornerRadius/
2});var f=b('<div class="altgallery-image"></div>');f.css({position:"relative",width:d.width()-2*c.frameSize,height:d.height()-2*c.frameSize,overflow:"hidden",background:y(c.backgroundColor),borderRadius:c.cornerRadius/2-c.frameSize/4,cursor:"pointer"});var g=b('<img src="" alt="" />');l(f.children("img"));g.css({position:"absolute"});e.click(function(){a.next()});f.append(g);e.append(f);d.element.append(e);a.open(a.getCurrentItem())})();switch(c.initialState.toLowerCase()){default:case "show albums":this.showAlbums();
break;case "show thumbnails":this.showThumbnails();case "load image":case "start slideshow":}};N.prototype.showAlbums=function(){function a(){function f(){var b=v*s+1,a=v*s+s;if(a>c.albums.length)a=c.albums.length;t.html(b+"-"+a+" "+e.translation.Of+" "+c.albums.length);0>=v?(D.css({opacity:0.3,cursor:"default"}),D.unbind("click").click(function(){return!1})):(D.css({opacity:1,cursor:"pointer"}),D.unbind("click").click(K));v>=q-1?(y.css({opacity:0.3,cursor:"default"}),y.unbind("click").click(function(){return!1})):
(y.css({opacity:1,cursor:"pointer"}),y.unbind("click").click(B))}c.hideThumbnails();c.hideButtons();c.hideCaption();c.hideNavigation();var g=b('<div class="altgallery-albums"></div>'),k=d.width()-2*e.frameSize,n=e.iconHeight+115;g.css({position:"absolute",left:e.frameSize,top:(d.height()-n)/2,width:d.width()-2*e.frameSize,height:n,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var r=b('<div class="altgallery-albums-overlay"></div>');r.css({position:"absolute",
left:e.frameSize,top:(d.height()-n)/2,width:d.width()-2*e.frameSize,height:n+1,background:"#000",opacity:e.panelBackgroundAlpha/100,zIndex:1});d.element.append(r);n=b("<div></div>");n.css({position:"absolute",top:10,right:20});r=b('<a class="altgallery-close" href="#">'+e.translation.Close+"</a>");r.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:x(p.images.folder+"zen-close.png"),paddingLeft:12});
r.click(function(){c.hideAlbums();c.showButtons();c.showCaption();c.showNavigation();return!1});n.append(r);g.append(n);var s=Math.floor((k-20)/(e.iconWidth+e.iconPadding)),s=s>c.albums.length?c.albums.length:s,n=(e.iconWidth+e.iconPadding)*s-e.iconPadding,r=(e.iconWidth+e.iconPadding)*c.albums.length-e.iconPadding,q=Math.ceil(c.albums.length/s),v=0,u=b("<div>"+e.translation.Albums+"</div>");u.css({position:"absolute",left:9,top:0,padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",
fontWeight:"bold",background:"no-repeat left center",backgroundImage:x(p.images.folder+"zen-albums.png")});g.append(u);var t=b("<span></span>");t.css({marginLeft:"1em",fontWeight:"normal"});u.append(t);u=b("<div></div>");u.css({position:"absolute",left:(k-n)/2-4,top:42,width:n+4,height:e.iconHeight+70,overflow:"hidden"});var z=b("<div></div>");z.css({position:"relative",left:0,width:r});u.append(z);k=b("<div></div>");k.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var D=b('<a href="#" style="float:left;"></a>');
D.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:x(p.images.folder+"zen-prev.png")});var K=function(){0<v&&v--;var b=(e.iconWidth+e.iconPadding)*s*v;z.stop().animate({left:-b},2*p.animation.duration,"easeOutQuart");f();return!1};D.click(K);k.append(D);g.append(u);var y=b('<a href="#" style="float:left;"></a>');y.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:x(p.images.folder+
"zen-next.png")});var B=function(){v<q-1&&v++;var b=(e.iconWidth+e.iconPadding)*s*v;z.stop().animate({left:-b},2*p.animation.duration,"easeOutQuart");f();return!1};y.click(B);k.append(y);g.append(k);f();for(var C,k=0;k<c.albums.length;k++)(function(a,d){var f=b("<div></div>");f.css({position:"absolute",left:(e.iconWidth+e.iconPadding)*d,top:0,width:e.iconWidth+e.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var g=b('<div class="altgallery-thumbnail"></div>');g.css({position:"relative",
width:e.iconWidth-2,height:e.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:c.currentAlbum==d?"#000":"#fff",margin:"2px",cursor:"pointer"});E(a.items[0].thumb,function(a){var c=b('<img src="" alt="" />');c.attr("src",a.src);l(c);c.css({position:"absolute"});c.css(F.fill(a.width,a.height,e.iconWidth-2,e.iconHeight-2));g.append(c)},50*d);f.append(g);f.append('<div style="padding:7px 2px 2px; font-weight:bold;">'+(a.description||"Album "+(d+1))+"<div>");f.append('<div style="padding:1px 2px;">'+
a.items.length+" "+(1==a.items.length?e.translation.Image:e.translation.Images)+"<div>");f.hover(function(){z.find(".altgallery-thumbnail").css({borderWidth:"1px",margin:"2px"});g.css({borderWidth:"3px",margin:"0px"})},function(){g.css({borderWidth:"1px",margin:"2px"})}).click(function(){if(!C){if(c.currentAlbum!=d)c.currentItem=-1;c.currentAlbum=d;c.showThumbnails()}});z.append(f)})(c.albums[k],k);d.element.append(g);1<q&&(z.draggable({axis:"x",start:function(){C=!0},stop:function(b,a){a.position.left>
a.originalPosition.left?K():B();setTimeout(function(){C=!1},100)}}),P(g))}var c=this,d=this.canvas,e=this.settings;d.element.find(".altgallery-albums").size()||a()};N.prototype.hideAlbums=function(){this.canvas.element.find(".altgallery-albums, .altgallery-albums-overlay").remove()};N.prototype.showThumbnails=function(){function a(){function g(){var b=u*q+1,a=u*q+q;if(a>f.items.length)a=f.items.length;z.html(b+"-"+a+" "+e.translation.Of+" "+f.items.length);0>=u?(y.css({opacity:0.3,cursor:"default"}),
y.unbind("click").click(function(){return!1})):(y.css({opacity:1,cursor:"pointer"}),y.unbind("click").click(B));u>=v-1?(C.css({opacity:0.3,cursor:"default"}),C.unbind("click").click(function(){return!1})):(C.css({opacity:1,cursor:"pointer"}),C.unbind("click").click(G))}c.hideAlbums();c.hideButtons();c.hideCaption();c.hideNavigation();var k=b('<div class="altgallery-images"></div>'),n=d.width()-2*e.frameSize,r=e.iconHeight+75;k.css({position:"absolute",left:e.frameSize,top:(d.height()-r)/2,width:d.width()-
2*e.frameSize,height:r,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var s=b('<div class="altgallery-images-overlay"></div>');s.css({position:"absolute",left:e.frameSize,top:(d.height()-r)/2,width:d.width()-2*e.frameSize,height:r+1,background:"#000",opacity:e.panelBackgroundAlpha/100,zIndex:1});d.element.append(s);r=b("<div></div>");r.css({position:"absolute",top:10,right:20});1<c.albums.length&&(s=b('<a class="altgallery-back" href="#">'+e.translation.BackToAlbums+
"</a>"),s.css({marginRight:"1.5em",color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:x(p.images.folder+"zen-backToAlbums.png"),paddingLeft:14}),s.click(function(){c.showAlbums();return!1}),r.append(s));s=b('<a class="altgallery-close" href="#">'+e.translation.Close+"</a>");s.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",
backgroundImage:x(p.images.folder+"zen-close.png"),paddingLeft:12});s.click(function(){c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();return!1});r.append(s);k.append(r);var q=Math.floor((n-20)/(e.iconWidth+e.iconPadding)),q=q>f.items.length?f.items.length:q,r=(e.iconWidth+e.iconPadding)*q-e.iconPadding,s=(e.iconWidth+e.iconPadding)*f.items.length-e.iconPadding,v=Math.ceil(f.items.length/q),u=0,t=b("<div>"+e.translation.Images+"</div>");t.css({position:"absolute",left:9,top:0,
padding:10,paddingLeft:25,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:x(p.images.folder+"zen-thumbnails.png")});k.append(t);var z=b("<span></span>");z.css({marginLeft:"1em",fontWeight:"normal"});t.append(z);t=b("<div></div>");t.css({position:"absolute",left:(n-r)/2-4,top:42,width:r+4,height:e.iconHeight+4,overflow:"hidden"});var D=b("<div></div>");D.css({position:"relative",left:0,width:s});t.append(D);k.append(t);n=b("<div></div>");
n.css({position:"absolute",right:4,bottom:3,height:20,opacity:0.9});var y=b('<a href="#" style="float:left;"></a>');y.css({display:"block",cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:x(p.images.folder+"zen-prev.png")});var B=function(){0<u&&u--;var b=(e.iconWidth+e.iconPadding)*q*u;D.stop().animate({left:-b},2*p.animation.duration,"easeOutQuart");g();return!1};y.click(B);n.append(y);var C=b('<a href="#" style="float:left;"></a>');C.css({display:"block",
cssFloat:"left",width:16,height:16,marginRight:3,background:"no-repeat center",backgroundImage:x(p.images.folder+"zen-next.png")});var G=function(){u<v-1&&u++;var b=(e.iconWidth+e.iconPadding)*q*u;D.stop().animate({left:-b},2*p.animation.duration,"easeOutQuart");g();return!1};C.click(G);n.append(C);k.append(n);g();for(var H=!1,n=0;n<f.items.length;n++)(function(a,d){var f=b("<div></div>");f.css({position:"absolute",left:(e.iconWidth+e.iconPadding)*d,top:0,width:e.iconWidth+e.iconPadding+6,overflow:"hidden",
textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var g=b('<div class="altgallery-thumbnail"></div>');g.css({position:"relative",width:e.iconWidth-2,height:e.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:c.currentItem==d?"#000":"#fff",margin:"2px",cursor:"pointer"});E(a.thumb,function(a){var c=b('<img src="" alt="" />');c.attr("src",a.src);l(c);c.css({position:"absolute"});c.css(F.fill(a.width,a.height,e.iconWidth-2,e.iconHeight-2));g.append(c)},50*d);f.append(g);f.hover(function(){D.find(".altgallery-thumbnail").css({borderWidth:"1px",
margin:"2px"});g.css({borderWidth:"3px",margin:"0px"})},function(){g.css({borderWidth:"1px",margin:"2px"})}).click(function(){if(!H)c.currentItem=d,c.open(c.getCurrentItem())});D.append(f)})(f.items[n],n);d.element.append(k);1<v&&(D.draggable({axis:"x",start:function(){H=!0},stop:function(b,a){a.position.left>a.originalPosition.left?B():G();setTimeout(function(){H=!1},100)}}),P(k))}var c=this,d=this.canvas,e=this.settings,f=this.getCurrentAlbum();d.element.find(".altgallery-images").size()||a()};
N.prototype.hideThumbnails=function(){this.canvas.element.find(".altgallery-images, .altgallery-images-overlay").remove()};N.prototype.showButtons=function(){function a(){var d=b('<div class="altgallery-buttons"></div>');d.css({position:"absolute",right:c.settings.frameSize,top:25+c.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+c.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px",
"-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(b.browser.msie&&9>b.browser.version){var e=Math.round(255*parseInt(c.settings.buttonsBackgroundAlpha)/100),e=16>e?"0"+e.toString(16):e.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+e+"000000,endColorstr=#"+e+"000000)"})}c.settings.showAlbumsButton&&1<c.albums.length&&(e=b('<a href="#" style="float:left;"></a>'),
e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:x(p.images.folder+"zen-albums.png"),opacity:0.8}),e.click(function(){c.showAlbums();return!1}),d.append(e));c.settings.showThumbnailsButton&&(e=b('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:x(p.images.folder+"zen-thumbnails.png"),opacity:0.8}),e.click(function(){c.showThumbnails();
return!1}),d.append(e));c.canvas.element.append(d)}var c=this;if("never"!=c.settings.showButtons.toLowerCase()&&(c.settings.showAlbumsButton||c.settings.showThumbnailsButton))c.canvas.element.find(".altgallery-buttons").size()||a()};N.prototype.hideButtons=function(){this.canvas.element.find(".altgallery-buttons").remove()};N.prototype.showCaption=function(){this.hideCaption();if("never"!=this.settings.showCaption.toLowerCase()&&(this.getCurrentAlbum()&&this.getCurrentAlbum().description||this.getCurrentItem()&&
this.getCurrentItem().description)){var a=b('<div class="altgallery-caption"></div>');a.css({position:"absolute",left:this.settings.frameSize,top:25+this.settings.frameSize,padding:"4px 10px 5px 7px",color:"#fff",textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.3)",background:"rgba(0, 0, 0, "+this.settings.captionBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderLeft:"none","-moz-border-top-right-radius":"3px","-moz-border-bottom-right-radius":"3px","-webkit-border-top-right-radius":"3px",
"-webkit-border-bottom-right-radius":"3px","border-top-right-radius":"3px","border-bottom-right-radius":"3px"});if(b.browser.msie&&9>b.browser.version){var c=Math.round(255*parseInt(this.settings.captionBackgroundAlpha)/100),c=16>c?"0"+c.toString(16):c.toString(16);a.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+c+"000000,endColorstr=#"+c+"000000)"})}this.getCurrentAlbum().description&&a.append('<div style="font-weight:bold;">'+this.getCurrentAlbum().description+
"</div>");this.getCurrentItem().description&&a.append('<div style="">'+this.getCurrentItem().description+"</div>");this.canvas.element.append(a)}};N.prototype.hideCaption=function(){this.canvas.element.find(".altgallery-caption").remove()};N.prototype.showNavigation=function(){function a(){var d=b('<div class="altgallery-navigation"></div>');d.css({position:"absolute",right:c.settings.frameSize,bottom:25+c.settings.frameSize,padding:"3px 3px 3px 1px",background:"rgba(0, 0, 0, "+c.settings.buttonsBackgroundAlpha/
100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none","-moz-border-top-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-top-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","border-top-left-radius":"3px","border-bottom-left-radius":"3px"});if(b.browser.msie&&9>b.browser.version){var e=Math.round(255*parseInt(c.settings.buttonsBackgroundAlpha)/100),e=16>e?"0"+e.toString(16):e.toString(16);d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+
e+"000000,endColorstr=#"+e+"000000)"})}c.settings.showNavigationButton&&(e=b('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:x(p.images.folder+"zen-prev.png"),opacity:0.8}),e.click(function(){c.prev();return!1}),d.append(e),e=b('<a href="#" style="float:left;"></a>'),e.css({display:"block",cssFloat:"left",margin:"0 2px",width:16,height:16,background:"no-repeat center",backgroundImage:x(p.images.folder+
"zen-next.png"),opacity:0.8}),e.click(function(){c.next();return!1}),d.append(e));c.canvas.element.append(d)}var c=this;"never"!=c.settings.showButtons.toLowerCase()&&c.settings.showNavigationButton&&(c.canvas.element.find(".altgallery-navigation").size()||a())};N.prototype.hideNavigation=function(){this.canvas.element.find(".altgallery-navigation").remove()};N.prototype.open=function(a){var c=this,d=this.canvas,e=this.settings;c.hideAlbums();c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();
d.element.find(".altgallery-image img").hide();var f=d.element.find(".altgallery-imageFrame"),g=b('<img class="altgallery-preloader" src="'+p.images.loader+'" alt="" />');l(g);g.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});E(a.source,function(b){g.hide();d.element.find(".altgallery-preloader").remove();var f=d.element.find(".altgallery-image img");"fit"==e.imageScaleMode?f.css(F.fit(b.width,b.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize)):f.css(F.fill(b.width,
b.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize));f.attr("src",a.source).fadeIn(2*p.animation.duration);c.cache()});setTimeout(function(){d.element.find(".altgallery-preloader").remove();f.append(g)},500)};N.prototype.prev=function(){0<this.currentItem?this.currentItem--:this.currentItem=this.getCurrentAlbum().items.length-1;this.open(this.getCurrentItem())};N.prototype.next=function(){this.currentItem<this.getCurrentAlbum().items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem())};
var p={};b.altgallery=altgallery=function(c,d,e){function f(){g.each(function(){ba(this,c,d)})}e===a&&"function"!=typeof d&&(e=d,d=a);var g;e===a?(window.altgallery_id++,e="altgallery-"+window.altgallery_id,document.write('<div id="'+e+'"></div>'),g=b(document.getElementById(e))):g=b(e);c=b.extend(!0,{width:"550px",height:"400px",background:"none",images:{folder:Z+"img/",left:"left.png",right:"right.png",close:"close.png",loader:"loader.png"},animation:{duration:500},config:{settings:{}}},c);if(c.images.folder){c.images.folder=
c.images.folder.replace(/\/+$/,"")+"/";for(var l in c.images)"folder"!=l&&!c.images[l].match("/")&&(c.images[l]=c.images.folder+c.images[l])}if("string"==typeof c.config){g.css({visibility:"hidden"});var k={load:function(b,c,d){if(c!==a)switch(c.toLowerCase()){case "xml":this.loadXML(b,d);break;default:case "json":this.loadJSON(b,d)}else b.match(/(xml)$/i)?this.loadXML(b,d):this.loadJSON(b,d)},loadJSON:function(a,c){b.ajax({url:a,dataType:"json",success:function(a){k.parse(a,c)},error:function(){"function"==
typeof c&&c({})}})},loadXML:function(a,c){function d(a){var b;"undefined"==typeof b&&(b=function(){});b.ObjTree=function(){return this};b.ObjTree.prototype.attr_prefix="";b.ObjTree.prototype.parseDOM=function(b){if(b){this.__force_array={};if(this.force_array)for(var a=0;a<this.force_array.length;a++)this.__force_array[this.force_array[a]]=1;a=this.parseElement(b);this.__force_array[b.nodeName]&&(a=[a]);if(11!=b.nodeType){var c={};c[b.nodeName]=a;a=c}return a}};b.ObjTree.prototype.parseElement=function(a){if(7!=
a.nodeType){if(3==a.nodeType||4==a.nodeType)return null==a.nodeValue.match(/[^\x00-\x20]/)?void 0:a.nodeValue;var b,c={};if(a.attributes&&a.attributes.length){b={};for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d].nodeName;if("string"==typeof e){var f=a.attributes[d].nodeValue;f&&(e=this.attr_prefix+e,"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f))}}}if(a.childNodes&&a.childNodes.length){e=!0;b&&(e=!1);for(d=0;d<a.childNodes.length&&e;d++)f=a.childNodes[d].nodeType,
3==f||4==f||(e=!1);if(e){b||(b="");for(d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].nodeValue}else{b||(b={});for(d=0;d<a.childNodes.length;d++)if(e=a.childNodes[d].nodeName,"string"==typeof e&&(f=this.parseElement(a.childNodes[d])))"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f)}}return b}};b.ObjTree.prototype.addNode=function(a,b,c,d){this.__force_array[b]?(1==c&&(a[b]=[]),a[b][a[b].length]=d):1==c?a[b]=d:2==c?a[b]=[a[b],d]:a[b][a[b].length]=d};b=new b.ObjTree;b.attr_prefix=
"";return b.parseDOM(a)["#document"]}b.ajax({url:a,dataType:"xml",success:function(a){a=d(a);k.parse(a,c)},error:function(){"function"==typeof c&&c({})}})},parse:function(a,b){if(a.gallery){if(a.galleryName)a.gallery.galleryName=a.galleryName;a=a.gallery;if(a.items&&a.items.item)a.items=a.items.item.length?a.items.item:[a.items.item];if(a.albums){if(a.albums.album)a.albums=a.albums.album.length?a.albums.album:[a.albums.album];for(var c=0;c<a.albums.length;c++)if(a.albums[c].items.item)a.albums[c].items=
a.albums[c].items.item.length?a.albums[c].items.item:[a.albums[c].items.item]}}"function"==typeof b&&b(a)}};k.load(c.config,c.configType,function(a){g.css({visibility:"visible"});c.config=a;f()})}else f();return g};b.fn.altgallery=function(a,c){b.altgallery(a,c,this);return this};b.altbox=altbox=function(a,c){if(d!=top)var d=top,e=d.document;c=b.extend(!0,{frame:{color:"#000",borderRadius:0},mask:{color:"#000",opacity:0.7},images:{folder:Z+"img/",close:"close.png",loader:"loader.gif"},animation:{duration:700}},
c);if(c.images.folder){c.images.folder=c.images.folder.replace(/\/+$/,"")+"/";for(var f in c.images)"folder"!=f&&!c.images[f].match("/")&&(c.images[f]=c.images.folder+c.images[f])}var g=b('<div style="position:fixed; z-index:999; left:0; top:0; width:100%; height:100%; background:no-repeat center;"></div>');g.css({opacity:0,backgroundColor:c.mask.color,backgroundImage:x(c.images.loader)});b(e.body).append(g);g.animate({opacity:c.mask.opacity},c.animation.duration);var k=new Image;k.onload=function(){function f(){g.remove();
t.remove()}function l(){z.remove();q.opacity="hide";t.animate(q,0.67*c.animation.duration);y.animate({width:q.width-20,height:q.height-20},0.67*c.animation.duration);g.fadeOut(c.animation.duration,function(){f()});return!1}var o=b(d).width()-100,p=b(d).height()-100,q=F.fit(k.width/4,k.height/4,o,p,{noEnlarge:!0,minWidth:100,minHeight:100});q.left+=50;q.top+=50;var u=F.fit(k.width+20,k.height+20,o,p,{noEnlarge:!0,minWidth:120,minHeight:120});u.left+=50;u.top+=50;var t=b('<div style="position:fixed; z-index:1000;"></div>');
t.css(q);t.css({backgroundColor:c.frame.color,borderRadius:c.frame.borderRadius,MozUserSelect:"none",webkitUserSelect:"none",userSelect:"none"});t.hide();var y=b('<img src="'+a+'" alt="" style="display:block;" />');y.css({margin:"10px",width:q.width-20,height:q.height-20,borderRadius:8<c.frame.borderRadius?c.frame.borderRadius-8:0});var z=b('<a href="#" style="display:block; position:absolute; right:-12px; top:-10px; width:30px; height:30px; background:no-repeat center;"></a>');z.css({backgroundImage:x(c.images.close)});
t.append(y);b(e.body).append(t);(function(){g.css({backgroundImage:"none"});y.animate({width:u.width-20,height:u.height-20,margin:"10px"},c.animation.duration,"easeOutBack");u.opacity="show";t.animate(u,c.animation.duration,"easeOutBack",function(){t.append(z)})})();b(d).resize(function(){o=b(d).width()-100;p=b(d).height()-100;q=F.fit(k.width/4,k.height/4,o,p,{noEnlarge:!0,minWidth:100,minHeight:100});q.left+=50;q.top+=50;u=F.fit(k.width+20,k.height+20,o,p,{noEnlarge:!0,minWidth:120,minHeight:120});
u.left+=50;u.top+=50;t.css(u);y.css({width:u.width-20,height:u.height-20})});g.click(f);z.click(l);t.dblclick(l)};k.src=a}})(jQuery);
