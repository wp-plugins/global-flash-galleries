/**
 * altgallery, jQuery Plugin
 *
 * @version 0.9.4
 * @copyright 2011-2014 Flash-Gallery.com
 */
if(!JSON){var JSON;JSON||(JSON={});(function(){function c(c){return 10>c?"0"+c:c}function b(c){v.lastIndex=0;return v.test(c)?'"'+c.replace(v,function(c){var b=p[c];return"string"===typeof b?b:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function e(c,d){var v,B,N,D,E=h,p,y=d[c];y&&("object"===typeof y&&"function"===typeof y.toJSON)&&(y=y.toJSON(c));"function"===typeof z&&(y=z.call(d,c,y));switch(typeof y){case "string":return b(y);case "number":return isFinite(y)?String(y):
"null";case "boolean":case "null":return String(y);case "object":if(!y)return"null";h+=t;p=[];if("[object Array]"===Object.prototype.toString.apply(y)){D=y.length;for(v=0;v<D;v+=1)p[v]=e(v,y)||"null";N=0===p.length?"[]":h?"[\n"+h+p.join(",\n"+h)+"\n"+E+"]":"["+p.join(",")+"]";h=E;return N}if(z&&"object"===typeof z){D=z.length;for(v=0;v<D;v+=1)"string"===typeof z[v]&&(B=z[v],(N=e(B,y))&&p.push(b(B)+(h?": ":":")+N))}else for(B in y)Object.prototype.hasOwnProperty.call(y,B)&&(N=e(B,y))&&p.push(b(B)+
(h?": ":":")+N);N=0===p.length?"{}":h?"{\n"+h+p.join(",\n"+h)+"\n"+E+"}":"{"+p.join(",")+"}";h=E;return N}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
v=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,t,p={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},z;"function"!==typeof JSON.stringify&&(JSON.stringify=function(c,b,v){var B;t=h="";if("number"===typeof v)for(B=0;B<v;B+=1)t+=" ";else"string"===typeof v&&(t=v);if((z=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return e("",{"":c})});
"function"!==typeof JSON.parse&&(JSON.parse=function(c,b){function v(c,B){var d,e,h=c[B];if(h&&"object"===typeof h)for(d in h)Object.prototype.hasOwnProperty.call(h,d)&&(e=v(h,d),void 0!==e?h[d]=e:delete h[d]);return b.call(c,B,h)}var B;c=String(c);d.lastIndex=0;d.test(c)&&(c=c.replace(d,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return B=eval("("+c+")"),"function"===typeof b?v({"":B},""):B;throw new SyntaxError("JSON.parse");})})()}
jQuery.browser||function(){var c,b;c=navigator.userAgent;c=c.toLowerCase();b=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||0>c.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[];c=b[1]||"";b=b[2]||"0";var e={};c&&(e[c]=!0,e.version=b);e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0);jQuery.browser=e}();jQuery.fn.prop||(jQuery.fn.prop=jQuery.fn.attr);
jQuery.ui||function(c,b){function e(b,e){var t=b.nodeName.toLowerCase();if("area"===t){var t=b.parentNode,p=t.name;if(!b.href||!p||"map"!==t.nodeName.toLowerCase())return!1;t=c("img[usemap=#"+p+"]")[0];return!!t&&d(t)}return(/input|select|textarea|button|object/.test(t)?!b.disabled:"a"==t?b.href||e:e)&&d(b)}function d(b){return!c(b).parents().andSelf().filter(function(){return"hidden"===c.curCSS(this,"visibility")||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};c.ui.version||(c.extend(c.ui,{version:"1.8.24",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(b,e){return"number"===typeof b?this.each(function(){var d=
this;setTimeout(function(){c(d).focus();e&&e.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?c(document):b},zIndex:function(e){if(e!==b)return this.css("zIndex",e);if(this.length){e=c(this[0]);for(var d;e.length&&e[0]!==document;){d=e.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d)return d;e=e.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(c){c.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),c("<a>").outerWidth(1).jquery||c.each(["Width","Height"],function(e,d){function t(b,d,e,h){c.each(p,function(){d-=parseFloat(c.curCSS(b,"padding"+this,!0))||0;e&&(d-=parseFloat(c.curCSS(b,"border"+this+"Width",!0))||0);h&&(d-=parseFloat(c.curCSS(b,"margin"+this,!0))||0)});return d}var p="Width"===d?["Left","Right"]:["Top","Bottom"],z=d.toLowerCase(),M={innerWidth:c.fn.innerWidth,
innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+d]=function(e){return e===b?M["inner"+d].call(this):this.each(function(){c(this).css(z,t(this,e)+"px")})};c.fn["outer"+d]=function(b,e){return"number"!==typeof b?M["outer"+d].call(this,b):this.each(function(){c(this).css(z,t(this,b,!0,e)+"px")})}}),c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(b){return function(d){return!!c.data(d,b)}}):function(b,d,e){return!!c.data(b,
e[3])},focusable:function(b){return e(b,!isNaN(c.attr(b,"tabindex")))},tabbable:function(b){var d=c.attr(b,"tabindex"),t=isNaN(d);return(t||0<=d)&&e(b,!t)}}),c(function(){var b=document.body,d=b.appendChild(d=document.createElement("div"));d.offsetHeight;c.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=100===d.offsetHeight;c.support.selectstart="onselectstart"in d;b.removeChild(d).style.display="none"}),c.curCSS||(c.curCSS=c.css),c.extend(c.ui,{plugin:{add:function(b,
d,e){b=c.ui[b].prototype;for(var p in e)b.plugins[p]=b.plugins[p]||[],b.plugins[p].push([d,e[p]])},call:function(c,b,d){if((b=c.plugins[b])&&c.element[0].parentNode)for(var e=0;e<b.length;e++)c.options[b[e][0]]&&b[e][1].apply(c.element,d)}},contains:function(c,b){return document.compareDocumentPosition?c.compareDocumentPosition(b)&16:c!==b&&c.contains(b)},hasScroll:function(b,d){if("hidden"===c(b).css("overflow"))return!1;var e=d&&"left"===d?"scrollLeft":"scrollTop",p=!1;if(0<b[e])return!0;b[e]=1;
p=0<b[e];b[e]=0;return p},isOverAxis:function(c,b,d){return c>b&&c<b+d},isOver:function(b,d,e,p,z,M){return c.ui.isOverAxis(b,e,z)&&c.ui.isOverAxis(d,p,M)}}))}(jQuery);
jQuery.widget||function(c,b){if(c.cleanData){var e=c.cleanData;c.cleanData=function(b){for(var d=0,t;null!=(t=b[d]);d++)try{c(t).triggerHandler("remove")}catch(p){}e(b)}}else{var d=c.fn.remove;c.fn.remove=function(b,e){return this.each(function(){e||(!b||c.filter(b,[this]).length)&&c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(b){}});return d.call(c(this),b,e)})}}c.widget=function(b,d,e){var p=b.split(".")[0],z;b=b.split(".")[1];z=p+"-"+b;e||(e=d,d=c.Widget);c.expr[":"][z]=
function(d){return!!c.data(d,b)};c[p]=c[p]||{};c[p][b]=function(c,b){arguments.length&&this._createWidget(c,b)};d=new d;d.options=c.extend(!0,{},d.options);c[p][b].prototype=c.extend(!0,d,{namespace:p,widgetName:b,widgetEventPrefix:c[p][b].prototype.widgetEventPrefix||b,widgetBaseClass:z},e);c.widget.bridge(b,c[p][b])};c.widget.bridge=function(d,e){c.fn[d]=function(t){var p="string"===typeof t,z=Array.prototype.slice.call(arguments,1),M=this;t=!p&&z.length?c.extend.apply(null,[!0,t].concat(z)):t;
if(p&&"_"===t.charAt(0))return M;p?this.each(function(){var e=c.data(this,d),h=e&&c.isFunction(e[t])?e[t].apply(e,z):e;if(h!==e&&h!==b)return M=h,!1}):this.each(function(){var b=c.data(this,d);b?b.option(t||{})._init():c.data(this,d,new e(t,this))});return M}};c.Widget=function(c,b){arguments.length&&this._createWidget(c,b)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,d){c.data(d,this.widgetName,this);this.element=c(d);this.options=c.extend(!0,
{},this.options,this._getCreateOptions(),b);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(d,e){var t=d;if(0===arguments.length)return c.extend({},this.options);if("string"===typeof d){if(e===b)return this.options[d];t={};t[d]=e}this._setOptions(t);return this},_setOptions:function(b){var d=this;c.each(b,function(c,b){d._setOption(c,b)});return this},_setOption:function(c,b){this.options[c]=b;"disabled"===c&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,d,e){var p,z=this.options[b];e=e||{};d=c.Event(d);d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d.target=this.element[0];if(b=d.originalEvent)for(p in b)p in d||(d[p]=b[p]);this.element.trigger(d,e);return!(c.isFunction(z)&&!1===z.call(this.element[0],d,e)||d.isDefaultPrevented())}}}(jQuery);
jQuery.ui.mouse||function(c){var b=!1;c(document).mouseup(function(){b=!1});c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(d){if(!0===c.data(d.target,b.widgetName+".preventClickEvent"))return c.removeData(d.target,b.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!b){this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var d=this,v=1==e.which,h="string"==typeof this.options.cancel&&e.target.nodeName?c(e.target).closest(this.options.cancel).length:!1;if(!v||h||!this._mouseCapture(e))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted))return e.preventDefault(),!0;!0===c.data(e.target,this.widgetName+".preventClickEvent")&&c.removeData(e.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(c){return d._mouseMove(c)};this._mouseUpDelegate=function(c){return d._mouseUp(c)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);e.preventDefault();return b=!0}},_mouseMove:function(b){if(c.browser.msie&&!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&c.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery);
jQuery.ui.draggable||function(c){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var e=this.options;if(this.helper||e.disabled||c(b.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(b);if(!this.handle)return!1;e.iframeFix&&c(!0===e.iframeFix?"iframe":e.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(c(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var e=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
c.ui.ddmanager&&(c.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};c.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);
this.originalPageX=b.pageX;this.originalPageY=b.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);e.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,e){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
if(!e){var d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";c.ui.ddmanager&&c.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var e=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(e=c.ui.ddmanager.drop(this,b));this.dropped&&(e=this.dropped,this.dropped=
!1);for(var d=this.element[0],v=!1;d&&(d=d.parentNode);)d==document&&(v=!0);if(!v&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!e||"valid"==this.options.revert&&e||!0===this.options.revert||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)){var h=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==h._trigger("stop",b)&&h._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},
_mouseUp:function(b){c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,b);return c.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var e=!this.options.handle||!c(this.options.handle,this.element).length?!0:!1;c(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(e=!0)});
return e},_createHelper:function(b){var e=this.options;b=c.isFunction(e.helper)?c(e.helper.apply(this.element[0],[b])):"clone"==e.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==e.appendTo?this.element[0].parentNode:e.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));c.isArray(b)&&(b={left:+b[0],top:+b[1]||
0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],
this.offsetParent[0]))&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&c.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var c=this.element.position();return{top:c.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:c(window).scrollLeft())+c("document"==b.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:c(window).scrollTop())+(c("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var b=c(b.containment),e=b[0];if(e){b.offset();var d="hidden"!=c(e).css("overflow");this.containment=[(parseInt(c(e).css("borderLeftWidth"),10)||0)+(parseInt(c(e).css("paddingLeft"),
10)||0),(parseInt(c(e).css("borderTopWidth"),10)||0)+(parseInt(c(e).css("paddingTop"),10)||0),(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(c(e).css("borderLeftWidth"),10)||0)-(parseInt(c(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(c(e).css("borderTopWidth"),10)||0)-(parseInt(c(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=b}}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,e){e||(e=this.position);var d="absolute"==b?1:-1,v="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(v[0].tagName);return{top:e.top+this.offset.relative.top*d+this.offset.parent.top*d-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():h?0:v.scrollTop())*d),left:e.left+this.offset.relative.left*d+this.offset.parent.left*d-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():h?0:v.scrollLeft())*d)}},_generatePosition:function(b){var e=this.options,d="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
v=/(html|body)/i.test(d[0].tagName),h=b.pageX,t=b.pageY;if(this.originalPosition){var p;this.containment&&(this.relative_container?(p=this.relative_container.offset(),p=[this.containment[0]+p.left,this.containment[1]+p.top,this.containment[2]+p.left,this.containment[3]+p.top]):p=this.containment,b.pageX-this.offset.click.left<p[0]&&(h=p[0]+this.offset.click.left),b.pageY-this.offset.click.top<p[1]&&(t=p[1]+this.offset.click.top),b.pageX-this.offset.click.left>p[2]&&(h=p[2]+this.offset.click.left),
b.pageY-this.offset.click.top>p[3]&&(t=p[3]+this.offset.click.top));e.grid&&(t=e.grid[1]?this.originalPageY+Math.round((t-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY,t=p?!(t-this.offset.click.top<p[1]||t-this.offset.click.top>p[3])?t:!(t-this.offset.click.top<p[1])?t-e.grid[1]:t+e.grid[1]:t,h=e.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX,h=p?!(h-this.offset.click.left<p[0]||h-this.offset.click.left>p[2])?h:!(h-this.offset.click.left<
p[0])?h-e.grid[0]:h+e.grid[0]:h)}return{top:t-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():v?0:d.scrollTop()),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():v?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,e,d){d=d||this._uiHash();c.ui.plugin.call(this,b,[e,d]);"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute"));return c.Widget.prototype._trigger.call(this,b,e,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});c.extend(c.ui.draggable,{version:"1.8.24"});
c.ui.plugin.add("draggable","connectToSortable",{start:function(b,e){var d=c(this).data("draggable"),v=d.options,h=c.extend({},e,{item:d.element});d.sortables=[];c(v.connectToSortable).each(function(){var e=c.data(this,"sortable");e&&!e.options.disabled&&(d.sortables.push({instance:e,shouldRevert:e.options.revert}),e.refreshPositions(),e._trigger("activate",b,h))})},stop:function(b,e){var d=c(this).data("draggable"),v=c.extend({},e,{item:d.element});c.each(d.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,v))})},drag:function(b,e){var d=c(this).data("draggable"),v=this;c.each(d.sortables,function(){this.instance.positionAbs=
d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(v).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return e.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,
!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});c.ui.plugin.add("draggable","cursor",{start:function(){var b=c("body"),e=c(this).data("draggable").options;
b.css("cursor")&&(e._cursor=b.css("cursor"));b.css("cursor",e.cursor)},stop:function(){var b=c(this).data("draggable").options;b._cursor&&c("body").css("cursor",b._cursor)}});c.ui.plugin.add("draggable","opacity",{start:function(b,e){var d=c(e.helper),v=c(this).data("draggable").options;d.css("opacity")&&(v._opacity=d.css("opacity"));d.css("opacity",v.opacity)},stop:function(b,e){var d=c(this).data("draggable").options;d._opacity&&c(e.helper).css("opacity",d._opacity)}});c.ui.plugin.add("draggable",
"scroll",{start:function(){var b=c(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var e=c(this).data("draggable"),d=e.options,v=!1;if(e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName){if(!d.axis||"x"!=d.axis)e.overflowOffset.top+e.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?e.scrollParent[0].scrollTop=v=e.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-e.overflowOffset.top<
d.scrollSensitivity&&(e.scrollParent[0].scrollTop=v=e.scrollParent[0].scrollTop-d.scrollSpeed);if(!d.axis||"y"!=d.axis)e.overflowOffset.left+e.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?e.scrollParent[0].scrollLeft=v=e.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-e.overflowOffset.left<d.scrollSensitivity&&(e.scrollParent[0].scrollLeft=v=e.scrollParent[0].scrollLeft-d.scrollSpeed)}else{if(!d.axis||"x"!=d.axis)b.pageY-c(document).scrollTop()<d.scrollSensitivity?v=c(document).scrollTop(c(document).scrollTop()-
d.scrollSpeed):c(window).height()-(b.pageY-c(document).scrollTop())<d.scrollSensitivity&&(v=c(document).scrollTop(c(document).scrollTop()+d.scrollSpeed));if(!d.axis||"y"!=d.axis)b.pageX-c(document).scrollLeft()<d.scrollSensitivity?v=c(document).scrollLeft(c(document).scrollLeft()-d.scrollSpeed):c(window).width()-(b.pageX-c(document).scrollLeft())<d.scrollSensitivity&&(v=c(document).scrollLeft(c(document).scrollLeft()+d.scrollSpeed))}!1!==v&&(c.ui.ddmanager&&!d.dropBehaviour)&&c.ui.ddmanager.prepareOffsets(e,
b)}});c.ui.plugin.add("draggable","snap",{start:function(){var b=c(this).data("draggable"),e=b.options;b.snapElements=[];c(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var d=c(this),e=d.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:d.outerWidth(),height:d.outerHeight(),top:e.top,left:e.left})})},drag:function(b,e){for(var d=c(this).data("draggable"),v=d.options,h=v.snapTolerance,t=e.offset.left,p=t+d.helperProportions.width,z=e.offset.top,
M=z+d.helperProportions.height,S=d.snapElements.length-1;0<=S;S--){var O=d.snapElements[S].left,B=O+d.snapElements[S].width,N=d.snapElements[S].top,D=N+d.snapElements[S].height;if(O-h<t&&t<B+h&&N-h<z&&z<D+h||O-h<t&&t<B+h&&N-h<M&&M<D+h||O-h<p&&p<B+h&&N-h<z&&z<D+h||O-h<p&&p<B+h&&N-h<M&&M<D+h){if("inner"!=v.snapMode){var E=Math.abs(N-M)<=h,P=Math.abs(D-z)<=h,y=Math.abs(O-p)<=h,Q=Math.abs(B-t)<=h;E&&(e.position.top=d._convertPositionTo("relative",{top:N-d.helperProportions.height,left:0}).top-d.margins.top);
P&&(e.position.top=d._convertPositionTo("relative",{top:D,left:0}).top-d.margins.top);y&&(e.position.left=d._convertPositionTo("relative",{top:0,left:O-d.helperProportions.width}).left-d.margins.left);Q&&(e.position.left=d._convertPositionTo("relative",{top:0,left:B}).left-d.margins.left)}var K=E||P||y||Q;"outer"!=v.snapMode&&(E=Math.abs(N-z)<=h,P=Math.abs(D-M)<=h,y=Math.abs(O-t)<=h,Q=Math.abs(B-p)<=h,E&&(e.position.top=d._convertPositionTo("relative",{top:N,left:0}).top-d.margins.top),P&&(e.position.top=
d._convertPositionTo("relative",{top:D-d.helperProportions.height,left:0}).top-d.margins.top),y&&(e.position.left=d._convertPositionTo("relative",{top:0,left:O}).left-d.margins.left),Q&&(e.position.left=d._convertPositionTo("relative",{top:0,left:B-d.helperProportions.width}).left-d.margins.left));!d.snapElements[S].snapping&&(E||P||y||Q||K)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,c.extend(d._uiHash(),{snapItem:d.snapElements[S].item}));d.snapElements[S].snapping=E||P||y||Q||K}else d.snapElements[S].snapping&&
d.options.snap.release&&d.options.snap.release.call(d.element,b,c.extend(d._uiHash(),{snapItem:d.snapElements[S].item})),d.snapElements[S].snapping=!1}}});c.ui.plugin.add("draggable","stack",{start:function(){var b=c(this).data("draggable").options,b=c.makeArray(c(b.stack)).sort(function(b,e){return(parseInt(c(b).css("zIndex"),10)||0)-(parseInt(c(e).css("zIndex"),10)||0)});if(b.length){var e=parseInt(b[0].style.zIndex)||0;c(b).each(function(c){this.style.zIndex=e+c});this[0].style.zIndex=e+b.length}}});
c.ui.plugin.add("draggable","zIndex",{start:function(b,e){var d=c(e.helper),v=c(this).data("draggable").options;d.css("zIndex")&&(v._zIndex=d.css("zIndex"));d.css("zIndex",v.zIndex)},stop:function(b,e){var d=c(this).data("draggable").options;d._zIndex&&c(e.helper).css("zIndex",d._zIndex)}})}(jQuery);
jQuery.effects||jQuery.effects||function(c,b){function e(b){var d;return b&&b.constructor==Array&&3==b.length?b:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3])]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(d[1],
16),parseInt(d[2],16),parseInt(d[3],16)]:(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?z.transparent:z[c.trim(b).toLowerCase()]}function d(){var c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},d,e;if(c&&c.length&&c[0]&&c[c[0]])for(var h=c.length;h--;)d=c[h],"string"==typeof c[d]&&(e=d.replace(/\-(\w)/g,function(c,b){return b.toUpperCase()}),b[e]=
c[d]);else for(d in c)"string"===typeof c[d]&&(b[d]=c[d]);return b}function v(b){var d,e;for(d in b)e=b[d],(null==e||c.isFunction(e)||d in S||/scrollbar/.test(d)||!/color/i.test(d)&&isNaN(parseFloat(e)))&&delete b[d];return b}function h(c,b){var d={_:0},e;for(e in b)c[e]!=b[e]&&(d[e]=b[e]);return d}function t(b,d,e,h){"object"==typeof b&&(h=d,e=null,d=b,b=d.effect);c.isFunction(d)&&(h=d,e=null,d={});if("number"==typeof d||c.fx.speeds[d])h=e,e=d,d={};c.isFunction(e)&&(h=e,e=null);d=d||{};e=e||d.duration;
e=c.fx.off?0:"number"==typeof e?e:e in c.fx.speeds?c.fx.speeds[e]:c.fx.speeds._default;h=h||d.complete;return[b,d,e,h]}function p(b){return!b||("number"===typeof b||c.fx.speeds[b])||"string"===typeof b&&!c.effects[b]?!0:!1}c.effects={};c.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(b,d){c.fx.step[d]=function(b){if(!b.colorInit){var B;B=b.elem;var h=d,y;do{y=(c.curCSS||c.css)(B,h);if(""!=y&&"transparent"!=
y||c.nodeName(B,"body"))break;h="backgroundColor"}while(B=B.parentNode);B=e(y);b.start=B;b.end=e(b.end);b.colorInit=!0}b.elem.style[d]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var z={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],
cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,
255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},M=["add","remove","toggle"],S={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};c.effects.animateClass=function(b,e,D,p){c.isFunction(D)&&(p=D,D=null);return this.queue(function(){var t=
c(this),y=t.attr("style")||" ",z=v(d.call(this)),K,O=t.attr("class")||"";c.each(M,function(c,d){if(b[d])t[d+"Class"](b[d])});K=v(d.call(this));t.attr("class",O);t.animate(h(z,K),{queue:!1,duration:e,easing:D,complete:function(){c.each(M,function(c,d){if(b[d])t[d+"Class"](b[d])});"object"==typeof t.attr("style")?(t.attr("style").cssText="",t.attr("style").cssText=y):t.attr("style",y);p&&p.apply(this,arguments);c.dequeue(this)}})})};c.fn.extend({_addClass:c.fn.addClass,addClass:function(b,d,e,h){return d?
c.effects.animateClass.apply(this,[{add:b},d,e,h]):this._addClass(b)},_removeClass:c.fn.removeClass,removeClass:function(b,d,e,h){return d?c.effects.animateClass.apply(this,[{remove:b},d,e,h]):this._removeClass(b)},_toggleClass:c.fn.toggleClass,toggleClass:function(d,e,h,p,t){return"boolean"==typeof e||e===b?h?c.effects.animateClass.apply(this,[e?{add:d}:{remove:d},h,p,t]):this._toggleClass(d,e):c.effects.animateClass.apply(this,[{toggle:d},e,h,p])},switchClass:function(b,d,e,h,p){return c.effects.animateClass.apply(this,
[{add:d,remove:b},e,h,p])}});c.extend(c.effects,{version:"1.8.24",save:function(c,b){for(var d=0;d<b.length;d++)null!==b[d]&&c.data("ec.storage."+b[d],c[0].style[b[d]])},restore:function(c,b){for(var d=0;d<b.length;d++)null!==b[d]&&c.css(b[d],c.data("ec.storage."+b[d]))},setMode:function(c,b){"toggle"==b&&(b=c.is(":hidden")?"show":"hide");return b},getBaseline:function(c,b){var d,e;switch(c[0]){case "top":d=0;break;case "middle":d=0.5;break;case "bottom":d=1;break;default:d=c[0]/b.height}switch(c[1]){case "left":e=
0;break;case "center":e=0.5;break;case "right":e=1;break;default:e=c[1]/b.width}return{x:e,y:d}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var d={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},e=c("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),h=document.activeElement;try{h.id}catch(p){h=document.body}b.wrap(e);(b[0]===h||c.contains(b[0],h))&&c(h).focus();
e=b.parent();"static"==b.css("position")?(e.css({position:"relative"}),b.css({position:"relative"})):(c.extend(d,{position:b.css("position"),zIndex:b.css("z-index")}),c.each(["top","left","bottom","right"],function(c,e){d[e]=b.css(e);isNaN(parseInt(d[e],10))&&(d[e]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return e.css(d).show()},removeWrapper:function(b){var d,e=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(d=b.parent().replaceWith(b),(b[0]===
e||c.contains(b[0],e))&&c(e).focus(),d):b},setTransition:function(b,d,e,h){h=h||{};c.each(d,function(c,d){var p=b.cssUnit(d);0<p[0]&&(h[d]=p[0]*e+p[1])});return h}});c.fn.extend({effect:function(b,d,e,h){var p=t.apply(this,arguments),y={options:p[1],duration:p[2],callback:p[3]},p=y.options.mode,v=c.effects[b];return c.fx.off||!v?p?this[p](y.duration,y.callback):this.each(function(){y.callback&&y.callback.call(this)}):v.call(this,y)},_show:c.fn.show,show:function(c){if(p(c))return this._show.apply(this,
arguments);var b=t.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:c.fn.hide,hide:function(c){if(p(c))return this._hide.apply(this,arguments);var b=t.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:c.fn.toggle,toggle:function(b){if(p(b)||"boolean"===typeof b||c.isFunction(b))return this.__toggle.apply(this,arguments);var d=t.apply(this,arguments);d[1].mode="toggle";return this.effect.apply(this,d)},cssUnit:function(b){var d=this.css(b),
e=[];c.each(["em","px","%","pt"],function(c,b){0<d.indexOf(b)&&(e=[parseFloat(d),b])});return e}});var O={};c.each(["Quad","Cubic","Quart","Quint","Expo"],function(c,b){O[b]=function(b){return Math.pow(b,c+2)}});c.extend(O,{Sine:function(c){return 1-Math.cos(c*Math.PI/2)},Circ:function(c){return 1-Math.sqrt(1-c*c)},Elastic:function(c){return 0===c||1===c?c:-Math.pow(2,8*(c-1))*Math.sin((80*(c-1)-7.5)*Math.PI/15)},Back:function(c){return c*c*(3*c-2)},Bounce:function(c){for(var b,d=4;c<((b=Math.pow(2,
--d))-1)/11;);return 1/Math.pow(4,3-d)-7.5625*Math.pow((3*b-2)/22-c,2)}});c.each(O,function(b,d){c.easing["easeIn"+b]=d;c.easing["easeOut"+b]=function(c){return 1-d(1-c)};c.easing["easeInOut"+b]=function(c){return 0.5>c?d(2*c)/2:d(-2*c+2)/-2+1}})}(jQuery);var altgallery,altbox;
(function(c,b){function e(a){return"[object Array]"==Object.prototype.toString.call(a)}function d(a,c){return Math.floor(Math.random()*(c-a+1))+a}function v(a){var c="",f,x=a.length;for(f=0;f<x;f++)c+=a.charCodeAt(f).toString(16);return c}function h(a){for(var c in a)"object"==typeof a[c]?a[c]=h(a[c]):"true"==a[c]?a[c]=!0:"false"==a[c]?a[c]=!1:a[c]==parseInt(a[c])&&(a[c]=parseInt(a[c]));return a}function t(a){var c=[],f,x;for(f=0;f<a.length;f++)for(x=0;x<a[f].items.length;x++)c.push(a[f].items[x]);
return c}function p(){var a=document.getElementsByTagName("script");return a[a.length-1].src||location.href}function z(){return"ontouchstart"in document}function M(){return navigator.userAgent.match(/(iPhone|iPod|Android 2)/i)?!0:!1}function S(){if(ka===b){var a=location.hostname.toString().replace(/^www\./i,"");ka=!location.hostname||-1!=c.inArray(v(a),va)}return ka}function O(a,c){"object"==typeof a&&(c=a.target,a=a.link);c||(c="_blank");switch(c){case "_blank":window.open(a);break;case "_parent":parent.location.href=
a;break;case "_self":location.href=a;break;case "_top":top.location.href=a;break;default:top.frames[c].location.href=a}}function B(a,c,f){f===b&&"number"==typeof c&&(f=c,c=b);f=f||10;if(a&&W[a]===b){var x=new Image;W[a]=x;W[a].loaded=!1;W[a].callbacks=[];"function"==typeof c&&W[a].callbacks.push(c);setTimeout(function(){x.onload=function(){W[a].loaded=!0;for(var c=0;c<W[a].callbacks.length;c++)W[a].callbacks[c](W[a])};x.src=a},f)}else W[a].loaded?"function"==typeof c&&c(W[a]):"function"==typeof c&&
W[a].callbacks.push(c)}function N(a,q,f,x){f===b&&"number"==typeof q&&(f=q,q=b);f=f||10;if("string"==typeof a)return B(a,q,f);if(e(a)){x=x||[];var F=a.slice();setTimeout(function(){var a=F.shift(),a="string"==typeof a?a:a.source||a.src||c(a).attr("src");B(a,function(a){F.length?(x.push(a),N(F,q,f,x)):"function"==typeof q&&q(x)})},f)}}function D(a){return'url("'+a+'")'}function E(a){if("number"==typeof a)return"#"+sprintf("%06x",a);if("string"==typeof a){var c;return(c=a.match(/[0-9a-f]{3,6}$/i))?
3==c[0].length?"#"+c[0]+c[0]+c[1]+c[1]+c[2]+c[2]:"#"+c[0]:(c=a.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))?"#"+sprintf("%02x",c[1])+sprintf("%02x",c[2])+sprintf("%02x",c[3]):a}}function P(a,c){a=E(a);var f=a.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i);if(f){for(var x=[],F=1;3>=F;F++)x.push(parseInt(f[F],16));return c!==b?"rgba("+x[0]+", "+x[1]+", "+x[2]+", "+c+")":"rgb("+x[0]+", "+x[1]+", "+x[2]+")"}return"transparent"}function y(a,q){function f(a,c,f){for(var q in a)q.match("-")?
a[c+q]=a[q]:a[f+q.charAt(0).toUpperCase()+q.slice(1)]=a[q]}q===b&&(q=a,a=null);c.browser.mozilla?f(q,"-moz-","Moz"):c.browser.webkit?f(q,"-webkit-","webkit"):c.browser.opera?f(q,"-o-","O"):c.browser.msie&&f(q,"-ms-","ms");a&&c(a).css(q);return q}function Q(a,q){if(q===b)return q={},c(a).data("transform")||{};c(a).each(function(){var a=[],x;for(x in q)a.push(x+"("+q[x]+")");a=a.join(" ");c(this).data("transform",q).css({"-moz-transform":a,"-webkit-transform":a,"-khtml-transform":a,"-o-transform":a,
"-ms-transform":a,transform:a})});return c(a)}function K(a){c(a).css({display:"block",position:"static",cssFloat:"none",clear:"none",left:"auto",right:"auto",top:"auto",bottom:"auto",width:"auto",height:"auto",minWidth:"none",minHeight:"none",maxWidth:"none",maxHeight:"none",overflow:"visible",margin:0,padding:0,border:"none",background:"none",color:"#000000",fontFamily:"serif",fontSize:"16px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:"normal",lineHeight:"normal",opacity:1,
outline:"none",textAlign:"left",textIndent:0,textShadow:"none",visibility:"visible",whiteSpace:"normal",cursor:"inherit"})}function la(a){a.preventDefault()}function ea(a,q){q=c.extend({speed:10,width:32,height:32,frames:12,layout:"horizontal"},q);B(a);this.element=c("<div>");this.element.css({width:q.width,height:q.height,background:D(a),backgroundRepeat:"no-repeat",backgroundPosition:"0 0"});this.frame=0;this.get=function(){var a=this;this.element.start=function(){return a.start()};this.element.stop=
function(){return a.stop()};return this.element};this.start=function(){var a=this;clearInterval(this.interval);this.interval="horizontal"==q.layout?setInterval(function(){++a.frame>=q.frames&&(a.frame=0);a.element.css({backgroundPosition:(-a.frame*q.width).toString()+"px 0"})},1E3/q.speed):setInterval(function(){++a.frame>=q.frames&&(a.frame=0);a.element.css({backgroundPosition:"0 "+(-a.frame*q.height).toString()+"px"})},1E3/q.speed)};this.stop=function(){clearInterval(this.interval)}}function ua(a,
q){function f(){g&&g.remove();g=c('<a href="http://www.flash-gallery.com/" target="_blank" style="display:block;position:absolute;left:0;top:0;z-index:11000;width:90px;height:20px;overflow:hidden;font-family:Tahoma,Arial,Helvetica,sans-serif;font-size:9px;line-height:12px;text-align:left;text-decoration:none;text-shadow:none;color:#fff;background:rgba(0,0,0,0.7);opacity:0.7;border-radius:4px;"><span style="display:block;padding:4px 10px;text-transform:uppercase;font-size:8px;font-weight:bold;white-space:nowrap;">Photo Gallery</span><span style="display:block;padding:5px 10px 10px;font-size:9px;background:rgba(0,0,0,0.5);border-bottom-left-radius:4px;border-bottom-right-radius:4px;opacity:0;">Download free version of this gallery from Flash-Gallery.com</span></a>');
ma=737;if(!S()){var a=g.width();c.browser.opera&&g.css({width:100}).find("span:first").css({letterSpacing:"-1px"});c.browser.msie&&9>c.browser.version?(g.css({background:"#444"}).find("span:last").css({background:"#222"}),g.hover(function(){g.stop().animate({width:120},"fast",function(){g.animate({height:70},"fast",function(){g.find("span:last").show();d=!0})})},function(){g.find("span:last").hide();g.stop().animate({height:20},"fast",function(){g.animate({width:a},"fast",function(){d=!1})})})):g.hover(function(){g.stop().animate({width:120},
"fast",function(){g.animate({height:70,opacity:1},"fast",function(){g.find("span:last").animate({opacity:1},"slow",function(){d=!0})})})},function(){g.find("span:last").animate({opacity:0},"fast");g.stop().animate({height:20},"fast",function(){g.animate({width:a,opacity:0.7},"fast",function(){d=!1})})});z()&&g.click(function(){if(!d)return!1});x.container.append(g)}}var x=this;this.init=function(){var x=this.container=c('<div class="altgallery-canvas"></div>');K(x);x.css({display:"block",position:"relative",
width:q.width,height:q.height,cursor:"default"});y(x,{userSelect:"none"});this.element=c("<div/>");this.element.css({display:"block",position:"relative",width:q.width,height:q.height,overflow:"hidden",margin:0,padding:0,background:q.background});x.append(this.element);f();c(a).empty().append(x);var x=this.element,b=function(a){A||(A=!0,w=a.changedTouches[0],J=window.setTimeout(function(){A=!1;var a=w,c=document.createEvent("MouseEvent");c.initMouseEvent("mouseup",!0,!0,window,1,a.screenX,a.screenY,
a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(c);c=document.createEvent("MouseEvent");c.initMouseEvent("mousedown",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,2,null);a.target.dispatchEvent(c);c=document.createEvent("MouseEvent");c.initMouseEvent("contextmenu",!0,!0,window,1,a.screenX+50,a.screenY+5,a.clientX+50,a.clientY+5,!1,!1,!1,!1,2,null);a.target.dispatchEvent(c);C=!0;w=null},800))},g=function(){A&&(window.clearTimeout(J),A=!1,w=null)},F=function(a){var f=
"";if(!(1<a.touches.length)){switch(a.type){case "touchstart":if(c(a.changedTouches[0].target).is("select"))return;var f=a.changedTouches[0],q="mouseover",x=document.createEvent("MouseEvent");x.initMouseEvent(q,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);f.target.dispatchEvent(x);q="mousedown";x=document.createEvent("MouseEvent");x.initMouseEvent(q,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null);f.target.dispatchEvent(x);k?(window.clearTimeout(e),
f.target==d?(d=null,k=!1,q="click",x=document.createEvent("MouseEvent"),x.initMouseEvent(q,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),f.target.dispatchEvent(x),q="dblclick",x=document.createEvent("MouseEvent"),x.initMouseEvent(q,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),f.target.dispatchEvent(x)):(d=f.target,k=!0,e=window.setTimeout(function(){k=!1},600),b(a))):(d=f.target,k=!0,e=window.setTimeout(function(){k=!1},600),b(a));a.preventDefault();
return!1;case "touchmove":g();f="mousemove";a.preventDefault();break;case "touchend":if(C)return C=!1,a.preventDefault(),!1;g();f="mouseup";break;default:return}a=a.changedTouches[0];q=document.createEvent("MouseEvent");q.initMouseEvent(f,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(q);"mouseup"==f&&(k&&a.target==d)&&(q=document.createEvent("MouseEvent"),q.initMouseEvent("click",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,
0,null),a.target.dispatchEvent(q))}},d=null,k=!1,e=null,A=!1,w=null,J=null,C=!1;c.support.touch&&c(x).each(function(){this.addEventListener("touchstart",F,!1);this.addEventListener("touchmove",F,!1);this.addEventListener("touchend",F,!1);this.addEventListener("touchcancel",F,!1)})};this.empty=function(){this.element.empty()};this.width=function(a){return a===b?this.element.width():this.element.width(a)};this.height=function(a){return a===b?this.element.height():this.element.height(a)};this.resize=
function(a,c){this.element.css({width:a,height:c});this.container.css({width:a,height:c})};this.append=function(a){return this.element.append(a)};this.scaleFactor=1;this.scale=function(a){return a?(this.gallery&&this.gallery.scale?this.gallery.scale(a):(y(this.element,{"transform-origin":"0 0"}),Q(this.element,{scale:a})),this.scaleFactor=a):this.scaleFactor};this.initFullscreen=function(){if(q.fullscreen)switch(q.fullscreen){default:case "auto":z()&&this.enableFullscreen();break;case "always":this.enableFullscreen();
case "never":}};var F=null;this.enableFullscreen=function(){F||(F=c("<div/>"),F.css({position:"absolute",left:0,top:0,right:0,bottom:0,zIndex:1E4,cursor:"pointer"}),F.click(function(){x.fullscreen();return!1}),x.element.after(F),location.hash.match(/#altgallery.fullscreen.start\b/)&&x.fullscreen())};this.isFullscreen=!1;this.fullscreen=function(){function a(){var f=l.width(),q=l.height();if(f!=C||q!=h){var b=k,F=e,d;z()?(d=screen.width<screen.height&&c(window).width()>c(window).height()?screen.height:
screen.width,d=f/d*(Math.max(screen.width,screen.height)/c(window).width())):d=1;J.css({right:8*d,top:8*d,width:48*d,height:48*d});var n=f*p;b/F<f/q?(F=I.fit(b,F,f-64*d-2*n,q),x.element.css({zIndex:10,left:(f-F.width>128*d?(f-F.width)/2:F.left)+n,top:F.top})):(F=I.fit(b,F,f-2*n,q-64*d),x.element.css({zIndex:10,left:F.left+n,top:q-F.height>128*d?(q-F.height)/2:64*d}));x.scale(F.width/b);g.css({position:"fixed",left:8*d,top:8*d,zIndex:11E4});y(g,{"transform-origin":"0 0"});Q(g,{scale:(z()?2:1.5)*d});
G&&(x.container.show(),G=!1);C=f;h=q}}function b(f){if("resize"==f.type){f=c(window).width();var q=c(window).height();if(f==U&&q==V)return;U=f;V=q}l.empty().html("&nbsp;");t&&(clearTimeout(t),t=null);t=setTimeout(a,500)}function d(a){if(27==a.which)return x.exitFullscreen(),!1}var k=x.container.width(),e=x.container.height();if(!x.isFullscreen)if(x.isFullscreen=!0,self!=top)top.location.href=location.href+"#altgallery.fullscreen.start#altgallery.fullscreen.back";else{F&&F.hide();c(document.body).scrollTop(c(document.body).scrollTop()+
1).css({overflow:"hidden"});var l=c("<div/>");l.css({position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:11100,background:"#000",opacity:0.9});c(document.body).append(l);c(document).bind("touchmove",la);var G=!0;x.container.hide();x.element.wrap("<div/>");var A=x.element.parent();A.css({position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:1E5});x.container.css({position:"absolute",zIndex:11110});var w=c("<div/>");w.css({width:x.width(),height:x.height()});x.container.after(w);
var J=c("<img/>");J.attr({src:q.images.folder+"close-48.png"}).css({position:"absolute",right:8,top:8,cursor:"pointer"});A.append(J);var C,h,p=navigator.userAgent.match(/iPhone/i)?0.02:0,t=setTimeout(function(){l.empty().html("&nbsp;");a()},100),U=c(window).width(),V=c(window).height();setTimeout(function(){c(window).bind("resize scroll",b)},500);x.exitFullscreen=function(){c(window).unbind("resize scroll",b);clearTimeout(t);J.remove();location.hash.match(/#altgallery.fullscreen.back\b/)&&history.back();
x.scale(1);x.element.css({left:0,top:0});w.remove();x.container.css({position:"relative",zIndex:0});x.element.unwrap();l.remove();c(document.body).css({overflow:"auto"});c(document.body).unbind("keyup",d);c(document).unbind("touchmove",la);f();F&&F.show();x.isFullscreen=!1};J.click(function(){x.exitFullscreen();return!1});c(document.body).keyup(d)}};var g,d=!1;this.init()}function ca(a,q,f,x){var b=this;b.options=x||{};this.canvas=a;this.albums=q;this.items=t(q);if(this.items.length){this.currentItem=
0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.onOpen=function(){};b.onOpenItem=[];this.settings=c.extend(!0,{image:{scaleMode:"fit",cornerRadius:10,align:"center",transitionEffect:"fade",transitionDuration:1,useShadow:!0},caption:{visibleMode:"onRollOver",position:"bottom",bgColor:0,bgAlpha:30,color:16777215,fontName:"Arial",fontSize:11},thumbBar:{useThumbBar:!0,position:"bottom",scrollSpeed:10},thumbnail:{width:80,height:60,cornerRadius:10,alpha:70,outlineColor:3355443,
outlineColorOnRollOver:6710886,outlineColorOnClick:10066329,useShadow:!0},slideshow:{start:!1,delay:2.5,loop:!0,stopAutoOnClick:!0}},f||{});this.settings=h(this.settings);this.scaleFactor=1;if(z()&&(this.settings.thumbnail.width<0.1*a.width()||this.settings.thumbnail.height<0.1*a.height()))this.settings.thumbnail.width*=1.5,this.settings.thumbnail.height*=1.5;this.preloader=new ea(b.options.images.loader);b.settings.slideshow.start&&setTimeout(function(){b.slideshowStart()},500*b.settings.image.transitionDuration);
this.render()}}function R(a,q,f,x){this.options=x||{};this.canvas=a;this.albums=q;this.items=t(q);if(this.items.length){this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.defaultSettings={image:{scaleMode:"fill",padding:0,bgTintColor:16777215,bgBlur:!0},thumbnail:{width:80,height:60,alpha:70},caption:{showCaption:!0},buttons:{showImageNavigationButtons:!0,showLinkButton:!0,showFacebookButton:!0,showTwitterButton:!0,showSlideshowButton:!0,showFullscreenButton:!0},
slideshow:{start:!1,delay:2.5},translation:{image:"Image",clickToView:"Click to view",getLink:"Get link",shareWithFacebook:"Share with Facebook",tweet:"Tweet",startSlideshow:"Start slideshow",stopSlideshow:"Stop slideshow",fullscreenMode:"Fullscreen mode"}};this.settings=c.extend(!0,this.defaultSettings,f||{});this.settings=h(this.settings);navigator.userAgent.match(/Android/i)&&navigator.userAgent.match(/Chrome/i)&&(this.settings.image.bgBlur=!1);this.scaleFactor=1;this.scale2=z()?2:1;if(z()&&(this.settings.thumbnail.width<
0.1*a.width()||this.settings.thumbnail.height<0.1*a.height()))this.settings.thumbnail.width*=1.5,this.settings.thumbnail.height*=1.5;this.init()}}function Z(a,q,f,x){this.options=x||{};this.canvas=a;this.albums=q;this.items=t(q);this.items.length&&(this.currentItem=-1,this.getCurrentItem=function(){return this.items[this.currentItem]},this.defaultSettings={thumbnail:{width:120,height:90,alpha:85},colorScheme:{thumbsFrameColor:16777215,imageBGColor:1118481,useShadow:!0},imageCaption:{position:"top",
color:16777215,bgColor:0,bgAlpha:30,fontName:"Arial",fontSize:11,visibleMode:"always"}},this.settings=c.extend(!0,this.defaultSettings,f||{}),this.settings=h(this.settings),this.scale2=this.scaleFactor=1,this.page=0,this.render())}function L(a,q,f,x){this.options=x||{};this.canvas=a;this.albums=q;this.items=t(q);this.items.length&&(this.currentItem=0,this.getCurrentItem=function(){return this.items[this.currentItem]},this.defaultSettings={initialState:"Load Image",slideshowDelay:2,showCaption:!0,
base:{color:4080713,visibleFrame:5},buttons:{showSlideshowButton:!0,showThumbnailsButton:!0,bgColor:15066854}},this.settings=c.extend(!0,this.defaultSettings,f||{}),this.settings=h(this.settings),this.enableThumbnailsHover=!0,this.drag=!1,this.scaleFactor=1,this.scale2=z()?1.5:1,this.init())}function $(a,q,f,x){this.options=x||{};this.canvas=a;this.albums=q;this.items=t(q);this.items.length&&(this.currentItem=-1,this.getCurrentItem=function(){return this.items[this.currentItem]},this.defaultSettings=
{frame:{frameColor:16777215,frameSize:10,arrowsColor:0,buttonSize:40,useShadow:!0,shadowSize:5,alwaysShowButtons:!1},images:{alpha:100,visibleQuantity:2,margin:5},imageCaption:{color:16777215,frameColor:6710886,frameAlpha:80,bgColor:0,bgAlpha:80,fontName:"Arial",fontSize:11},slideshow:{start:!1,delay:2}},this.settings=c.extend(!0,this.defaultSettings,f||{}),this.settings=h(this.settings),this.scale2=this.scaleFactor=1,this.page=0,this.render())}function X(a,q,f,x){this.options=x||{};this.canvas=a;
this.albums=q;this.settings=c.extend(!0,{imageAngle:30,maxImageWidth:0,useHighlight:!0,useScrollBar:!0,showReflections:!0,solidReflection:!0,reflectionAlpha:80,slideShow:!1,slideShowDelay:2,flipDuration:1,startPosition:"center",colorScheme:"custom",preloader:{stripesAlpha:45,barColor:0,barAlpha:30,bgColor:0,bgAlpha:20,innerShadow:20,dropShadow:30},scrollbar:{bgColor:0,bgAlpha:40,handleColor:0,handleAlpha:40,arrowsColor:0,arrowsAlpha:40,innerShadow:20,dropShadow:20},caption:{textColor:16777215,bgColor:0,
bgAlpha:80,frameColor:16777215,frameAlpha:40,shadowAlpha:50,multilingual:!1,multilingualFontSize:12},background:{bgColor:16777215,transparentBG:!0}},f||{});this.settings=h(this.settings);this.settings.maxImageWidth||(this.settings.maxImageWidth=Math.round(a.width()/2.5));M()&&(this.settings.useScrollBar=!1);if(a=this.settings.showReflections)a=this.canvas.element.css("backgroundColor"),a=(E(a).match(/[0-9a-f]{6}$/i)?!0:!1)&&!(c.browser.msie&&9>c.browser.version);this.showReflections=a;this.items=
t(q);this.items.length&&(this.currentItem=0,this.getCurrentItem=function(){return this.items[this.currentItem]},this.getItemX=function(a){return-(this.currentItem-a)},this.getItemZ=function(a){return parseInt(this.items.length/2)-Math.abs(this.getItemX(a))},this.currentItem="left"==this.settings.startPosition?0:"right"==this.settings.startPosition?this.items.length:Math.floor((this.items.length-1)/2),this.scaleFactor=1,this.render(),this.settings.slideShow&&this.slideshowStart())}function da(a,q,
f,x){var b=this;b.options=x||{};this.canvas=a;this.albums=q;this.items=t(q);if(this.items.length){this.currentItem=0;this.getCurrentItem=function(){return this.items[this.currentItem]};this.onOpen=function(){};b.onOpenItem=[];this.settings=c.extend(!0,{image:{scaleMode:"fit",cornerRadius:10,align:"center",transitionEffect:"fade",transitionDuration:1,useShadow:!0},caption:{position:"top",color:16777215,bgColor:0,bgAlpha:30,fontName:"Arial",fontSize:11,visibleMode:"onRollOver"},thumbBar:{scrollSpeed:10,
position:"bottom",useThumbBar:!0},thumbnail:{size:30,cornerRadius:10,alpha:70,style:"gray",color:3355443,colorOnRollOver:6710886,colorOnClick:10066329,useShadow:!0,fontName:"Arial",fontSize:10,fontColor:0,fontColorOnRollOver:16777215,fontColorOnClick:16777215},buttons:{navigationButtons:!0,slideshowButton:!0,style:"black",size:30,cornerRadius:10,color:3355443,alpha:60},preloader:{usePreloader:!0,alpha:80},slideshow:{start:!1,delay:2.5,loop:!0,stopAutoOnClick:!0}},f||{});this.settings=h(this.settings);
this.scaleFactor=1;if(z()&&(this.settings.thumbnail.width<0.1*a.width()||this.settings.thumbnail.height<0.1*a.height()))this.settings.thumbnail.width*=1.5,this.settings.thumbnail.height*=1.5;this.preloader=new ea(b.options.images.loader);b.settings.slideshow.start&&setTimeout(function(){b.slideshowStart()},500*b.settings.image.transitionDuration);this.render()}}function ba(a,q,f,x){this.options=x||{};this.canvas=a;this.albums=q;this.items=t(q);this.items.length&&(this.currentItem=0,this.getCurrentItem=
function(){return this.items[this.currentItem]},this.getNextItem=function(a){return this.items[(this.currentItem+(a||1))%this.items.length]},this.defaultSettings={slideshow:!1,frameColor:16777215,useShadow:!0,visibleImages:5,maxAngle:5,image:{width:0,height:0},imageScaleMode:"fill",caption:{color:0,fontName:"Arial"},usePhotoNumbers:!0,translation:{back:"BACK",gotoLink:"GO TO LINK"},overflow:!0},this.settings=c.extend(!0,this.defaultSettings,f||{}),this.settings=h(this.settings),this.scaleFactor=1,
3>this.settings.visibleImages&&(this.settings.visibleImages=3),this.settings.visibleImages>this.items.length&&(this.settings.visibleImages=this.items.length),this.stack=[],this.init())}function T(a,q,f,x){this.options=x||{};this.canvas=a;this.albums=q;this.albums.length&&(this.currentAlbum=0,this.getCurrentAlbum=function(){return this.albums[this.currentAlbum]},this.currentItem=0,this.getCurrentItem=function(){return this.getCurrentAlbum().items[this.currentItem]},this.scaleFactor=1,this.settings=
c.extend(!0,{initialState:"Show Albums",imageScaleMode:"fill",frameSize:5,frameColor:"#ffffff",backgroundColor:"#aac5d8",cornerRadius:7,iconWidth:90,iconHeight:55,iconPadding:10,panelBackgroundAlpha:50,showCaption:"always",captionBackgroundAlpha:40,showButtons:"always",buttonsBackgroundAlpha:40,showAlbumsButton:!0,showThumbnailsButton:!0,showSlideshowButton:!0,showNavigationButton:!0,useEmbeddedFont:!0,fontName:"Arial",fontSize:11,translation:{Album:"Album",Albums:"Albums",Image:"Image",Images:"Images",
Close:"CLOSE",BackToAlbums:"BACK TO ALBUMS",LoadingImage:"Loading Image",Of:"of"}},f||{}),this.settings=h(this.settings),this.settings.useEmbeddedFont&&(this.settings.fontName="Tahoma, Verdana, sans-serif",this.settings.fontSize=9),this.currentState=this.settings.initialState.toLowerCase(),this.cache=function(){if(0<=this.currentItem){var a=this.getCurrentAlbum().items,c=[],f,q;for(q=this.currentItem+1;q<this.currentItem+3;q++)(f=a[(a.length+q)%a.length])&&(f=f.source)&&c.push(f);for(q=this.currentItem-
1;q>this.currentItem-2;q--)(f=a[(a.length+q)%a.length])&&(f=f.source)&&c.push(f);c.length&&N(c,100)}},this.render())}window.altgallery_id=window.altgallery_id||0;var ma,wa=67,va=["3132372e302e302e31","6c6f63616c686f7374","666c6173682d67616c6c6572792e636f6d"];sprintfWrapper={init:function(){if("undefined"==typeof arguments||1>arguments.length||"string"!=typeof arguments[0]||"undefined"==typeof RegExp)return null;for(var a=arguments[0],c=RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),
f=[],x=[],b=0,g=0,d=0,g=0,e="",m=null;m=c.exec(a);)m[9]&&(b+=1),d=c.lastIndex-m[0].length,x[x.length]=a.substring(g,d),g=c.lastIndex,f[f.length]={match:m[0],left:m[3]?!0:!1,sign:m[4]||"",pad:m[5]||" ",min:m[6]||0,precision:m[8],code:m[9]||"%",negative:0>parseInt(arguments[b])?!0:!1,argument:String(arguments[b])};x[x.length]=a.substring(g);if(0==f.length)return a;if(arguments.length-1<b)return null;a=null;for(a=0;a<f.length;a++)"%"==f[a].code?substitution="%":"b"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(2)),
substitution=sprintfWrapper.convert(f[a],!0)):"c"==f[a].code?(f[a].argument=String(String.fromCharCode(parseInt(Math.abs(parseInt(f[a].argument))))),substitution=sprintfWrapper.convert(f[a],!0)):"d"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument))),substitution=sprintfWrapper.convert(f[a])):"f"==f[a].code?(f[a].argument=String(Math.abs(parseFloat(f[a].argument)).toFixed(f[a].precision?f[a].precision:6)),substitution=sprintfWrapper.convert(f[a])):"o"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(8)),
substitution=sprintfWrapper.convert(f[a])):"s"==f[a].code?(f[a].argument=f[a].argument.substring(0,f[a].precision?f[a].precision:f[a].argument.length),substitution=sprintfWrapper.convert(f[a],!0)):"x"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(16)),substitution=sprintfWrapper.convert(f[a])):"X"==f[a].code?(f[a].argument=String(Math.abs(parseInt(f[a].argument)).toString(16)),substitution=sprintfWrapper.convert(f[a]).toUpperCase()):substitution=f[a].match,e+=x[a],e+=
substitution;return e+=x[a]},convert:function(a,c){a.sign=c?"":a.negative?"-":a.sign;var f=a.min-a.argument.length+1-a.sign.length,f=Array(0>f?0:f).join(a.pad);return a.left?"0"==a.pad||c?a.sign+a.argument+f.replace(/0/g," "):a.sign+a.argument+f:"0"==a.pad||c?a.sign+f+a.argument:f+a.sign+a.argument}};sprintf=sprintfWrapper.init;var ka,W={};c.extend(c.support,{touch:"ontouchstart"in document});p();var na=p().replace(/[^\/]*$/,""),I={fit:function(a,q,f,x,b){var g,d,e=a/q;b=c.extend({noEnlarge:!1,minWidth:16,
minHeight:16},b);g=f;d=f/e;d>x&&(d=x,g=d*e);g<b.minWidth&&(g=b.minWidth,d=g/e);d<b.minHeight&&(d=b.minHeight,g=d*e);if(b.noEnlarge&&(g>a||d>q))g=a,d=q;return{left:(f-g)/2,top:(x-d)/2,width:g,height:d,margin:0}},fill:function(a,c,f,b){var d=a/c;a=f;c=f/d;c<b&&(c=b,a=c*d);return{left:(f-a)/2,top:(b-c)/2,width:a,height:c,margin:0}}},H,oa=function(a,c,f){var b=[];null==c&&(c=document);null==f&&(f="*");c=c.getElementsByTagName(f);f=c.length;a=RegExp("(^|\\s)"+a+"(\\s|$)");for(j=i=0;i<f;i++)a.test(c[i].className)&&
(b[j]=c[i],j++);return b},ga=function(a,c){if(H.debug)try{switch(c){case "warn":console.warn("Pixastic:",a);break;case "error":console.error("Pixastic:",a);break;default:console.log("Pixastic:",a)}}catch(f){}};if("undefined"!=typeof pixastic_parseonload&&pixastic_parseonload){var pa=!1,ha=function(){if(!pa){pa=!0;for(var a=oa("pixastic",null,"img"),c=oa("pixastic",null,"canvas"),f=a.concat(c),b=0;b<f.length;b++)(function(){for(var a=f[b],c=[],q=a.className.split(" "),d=0;d<q.length;d++){var e=q[d];
"pixastic-"==e.substring(0,9)&&(e=e.substring(9),""!=e&&c.push(e))}if(c.length)if("img"==a.tagName.toLowerCase())if(q=new Image,q.src=a.src,q.complete)for(q=0;q<c.length;q++)(d=H.applyAction(a,a,c[q],null))&&(a=d);else q.onload=function(){for(var f=0;f<c.length;f++){var q=H.applyAction(a,a,c[f],null);q&&(a=q)}};else setTimeout(function(){for(var f=0;f<c.length;f++){var q=H.applyAction(a,a,c[f],null);q&&(a=q)}},1)})()}};document.write('<script defer src="//:" id="__onload_ie_pixastic__">\x3c/script>');
var ia=document.getElementById("__onload_ie_pixastic__");ia.onreadystatechange=function(){"complete"==ia.readyState&&(ia.parentNode.removeChild(ia),ha())};document.addEventListener&&document.addEventListener("DOMContentLoaded",ha,!1);var aa=window;aa.addEventListener?aa.addEventListener("load",ha,!1):aa.attachEvent&&aa.attachEvent("onload",ha)}var aa=document.createElement("canvas"),qa=!1;try{qa=!!("function"==typeof aa.getContext&&aa.getContext("2d"))}catch(xa){}var aa=function(){return qa},fa,Y=
document.createElement("canvas"),ra=!1;try{if("function"==typeof Y.getContext&&(fa=Y.getContext("2d")))ra="function"==typeof fa.getImageData}catch(ya){}fa=function(){return ra};var sa=!1,Y=document.createElement("canvas");if(aa()&&fa()){Y.width=Y.height=1;Y=Y.getContext("2d");Y.fillStyle="rgb(255,0,0)";Y.fillRect(0,0,1,1);var ja=document.createElement("canvas");ja.width=ja.height=1;var ta=ja.getContext("2d");ta.fillStyle="rgb(0,0,255)";ta.fillRect(0,0,1,1);Y.globalAlpha=0.5;Y.drawImage(ja,0,0);sa=
255!=Y.getImageData(0,0,1,1).data[2]}H={parseOnLoad:!1,debug:!1,applyAction:function(a,c,f,b){b=b||{};var d="canvas"==a.tagName.toLowerCase();if(d&&H.Client.isIE())return H.debug&&ga("Tried to process a canvas element but browser is IE."),!1;var g,e,n=!1;H.Client.hasCanvas()&&(n=!!b.resultCanvas,g=b.resultCanvas||document.createElement("canvas"),e=g.getContext("2d"));var m=a.offsetWidth,r=a.offsetHeight;d&&(m=a.width,r=a.height);if(0==m||0==r)if(null==a.parentNode){var u=a.style.position,s=a.style.left;
a.style.position="absolute";a.style.left="-9999px";document.body.appendChild(a);m=a.offsetWidth;r=a.offsetHeight;document.body.removeChild(a);a.style.position=u;a.style.left=s}else{H.debug&&ga("Image has 0 width and/or height.");return}if(-1<f.indexOf("(")&&(u=f,f=u.substr(0,u.indexOf("(")),u=u.match(/\((.*?)\)/),u[1])){u=u[1].split(";");for(s=0;s<u.length;s++)if(thisArg=u[s].split("="),2==thisArg.length)if("rect"==thisArg[0]){var l=thisArg[1].split(",");b[thisArg[0]]={left:parseInt(l[0],10)||0,top:parseInt(l[1],
10)||0,width:parseInt(l[2],10)||0,height:parseInt(l[3],10)||0}}else b[thisArg[0]]=thisArg[1]}b.rect?(b.rect.left=Math.round(b.rect.left),b.rect.top=Math.round(b.rect.top),b.rect.width=Math.round(b.rect.width),b.rect.height=Math.round(b.rect.height)):b.rect={left:0,top:0,width:m,height:r};u=!1;H.Actions[f]&&"function"==typeof H.Actions[f].process&&(u=!0);if(!u)return H.debug&&ga('Invalid action "'+f+'". Maybe file not included?'),!1;if(!H.Actions[f].checkSupport())return H.debug&&ga('Action "'+f+'" not supported by this browser.'),
!1;H.Client.hasCanvas()?(g!==a&&(g.width=m,g.height=r),n||(g.style.width=m+"px",g.style.height=r+"px"),e.drawImage(c,0,0,m,r),a.__pixastic_org_image?(g.__pixastic_org_image=a.__pixastic_org_image,g.__pixastic_org_width=a.__pixastic_org_width,g.__pixastic_org_height=a.__pixastic_org_height):(g.__pixastic_org_image=a,g.__pixastic_org_width=m,g.__pixastic_org_height=r)):H.Client.isIE()&&"undefined"==typeof a.__pixastic_org_style&&(a.__pixastic_org_style=a.style.cssText);c={image:a,canvas:g,width:m,height:r,
useData:!0,options:b};return!H.Actions[f].process(c)?!1:H.Client.hasCanvas()?(c.useData&&H.Client.hasCanvasImageData()&&(g.getContext("2d").putImageData(c.canvasData,b.rect.left,b.rect.top),g.getContext("2d").fillRect(0,0,0,0)),b.leaveDOM||(g.title=a.title,g.imgsrc=a.imgsrc,d||(g.alt=a.alt),d||(g.imgsrc=a.src),g.className=a.className,g.style.cssText=a.style.cssText,g.name=a.name,g.tabIndex=a.tabIndex,g.id=a.id,a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(g,a)),b.resultCanvas=
g):a},prepareData:function(a,c){var f=a.canvas.getContext("2d"),b=a.options.rect,f=f.getImageData(b.left,b.top,b.width,b.height),b=f.data;c||(a.canvasData=f);return b},process:function(a,c,f,b){if("img"==a.tagName.toLowerCase()){var d=new Image;d.src=a.src;if(d.complete){var g=H.applyAction(a,d,c,f);b&&b(g);return g}d.onload=function(){var g=H.applyAction(a,d,c,f);b&&b(g)}}if("canvas"==a.tagName.toLowerCase())return g=H.applyAction(a,a,c,f),b&&b(g),g},revert:function(a){if(H.Client.hasCanvas()){if("canvas"==
a.tagName.toLowerCase()&&a.__pixastic_org_image)return a.width=a.__pixastic_org_width,a.height=a.__pixastic_org_height,a.getContext("2d").drawImage(a.__pixastic_org_image,0,0),a.parentNode&&a.parentNode.replaceChild&&a.parentNode.replaceChild(a.__pixastic_org_image,a),a}else H.Client.isIE()&&"undefined"!=typeof a.__pixastic_org_style&&(a.style.cssText=a.__pixastic_org_style)},Client:{hasCanvas:aa,hasCanvasImageData:fa,hasGlobalAlpha:function(){return sa},isIE:function(){return!!document.all&&!!window.attachEvent&&
!window.opera}},Actions:{}};H.Actions.blurfast={process:function(a){var c=parseFloat(a.options.amount)||0,f=!!(a.options.clear&&"false"!=a.options.clear),c=Math.max(0,Math.min(5,c));if(H.Client.hasCanvas()){var b=a.options.rect,d=a.canvas.getContext("2d");d.save();d.beginPath();d.rect(b.left,b.top,b.width,b.height);d.clip();var g=Math.round(a.width/2),e=Math.round(a.height/2),n=document.createElement("canvas");n.width=g;n.height=e;for(var f=!1,c=Math.round(20*c),m=n.getContext("2d"),r=0;r<c;r++){var u=
Math.max(1,Math.round(g-r)),s=Math.max(1,Math.round(e-r));m.clearRect(0,0,g,e);m.drawImage(a.canvas,0,0,a.width,a.height,0,0,u,s);f&&d.clearRect(b.left,b.top,b.width,b.height);d.drawImage(n,0,0,u,s,0,0,a.width,a.height)}d.restore();a.useData=!1;return!0}if(H.Client.isIE())return f=10*c,a.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius="+f+")",a.image.style.marginLeft=(parseInt(a.image.style.marginLeft,10)||0)-Math.round(f)+"px",a.image.style.marginTop=(parseInt(a.image.style.marginTop,
10)||0)-Math.round(f)+"px",!0},checkSupport:function(){return H.Client.hasCanvas()||H.Client.isIE()}};ca.prototype.scale=function(a){this.scaleFactor=a;this.originalSize||(this.originalSize={width:this.canvas.width(),height:this.canvas.height()});this.canvas.resize(this.originalSize.width*a,this.originalSize.height*a);this.render({animate:!1})};ca.prototype.render=function(a){a=c.extend({animate:!0},a);var q=this,f=this.settings,b=this.canvas,d=this.items,g=this.scaleFactor;b.empty();var e=f.thumbnail.width,
n=f.thumbnail.height,m=c('<div class="altgallery-imageFrame"></div>'),r={position:"absolute"};if(f.thumbBar.useThumbBar)switch(f.thumbBar.position.toLowerCase()){default:case "bottom":r.left=10*g;r.top=10*g;r.width=b.width()-20*g;r.height=b.height()-(n+30)*g;break;case "top":r.left=10*g;r.bottom=10*g;r.width=b.width()-20*g;r.height=b.height()-(n+30)*g;break;case "left":r.right=10*g;r.top=10*g;r.width=b.width()-(e+30)*g;r.height=b.height()-20*g;break;case "right":r.left=10*g,r.top=10*g,r.width=b.width()-
(e+30)*g,r.height=b.height()-20*g}else r.left=10*g,r.top=10*g,r.width=b.width()-20*g,r.height=b.height()-20*g;m.css(r);b.element.append(m);if(f.thumbBar.useThumbBar){var u=function(){B(d[U].thumb,function(a){var f=c('<img src="'+a.src+'"/>');K(f);f.css({position:"absolute",border:"none"});f.css(I.fill(a.width,a.height,(e-4)*g,(n-4)*g));h[U].append(f);++U<d.length&&u()})},s=q.thumbBar=c('<div class="altgallery-thumbBar"></div>'),l,G,A,w,J,m={};switch(f.thumbBar.position.toLowerCase()){default:case "bottom":l=
"horizontal";G=b.width()-20*g;A=(n+4)*g;w=d.length*(e+5)*g-5*g;J=A;m.left=10*g;m.bottom=7*g;m.width=G;m.height=A;break;case "top":l="horizontal";G=b.width()-20*g;A=(n+4)*g;w=d.length*(e+5)*g-5*g;J=A;m.left=10*g;m.top=9*g;m.width=G;m.height=A;break;case "left":l="vertical";G=(e+4)*g;A=b.height()-20*g;w=G;J=d.length*(n+5)*g-5*g;m.left=9*g;m.top=10*g;m.width=G;m.height=A;break;case "right":l="vertical",G=(e+4)*g,A=b.height()-20*g,w=G,J=d.length*(n+5)*g-5*g,m.right=8*g,m.top=10*g,m.width=G,m.height=A}m.position=
"absolute";m.overflow="hidden";s.css(m);var C=c("<div/>");C.css({position:"relative",width:w,height:J});var h=[],p={position:"absolute",width:(e-4)*g,height:(n-4)*g,overflow:"hidden",border:2*g+"px solid",borderColor:E(f.thumbnail.outlineColor),opacity:f.thumbnail.alpha/100};c.extend(p,y({borderRadius:f.thumbnail.cornerRadius*g/2}));for(var t=y({boxShadow:g+"px "+g+"px "+2*g+"px rgba(0, 0, 0, 0.5)"}),U=0;U<d.length;U++)(function(a){var b=c('<a href="'+d[a].source+'"></a>'),x="horizontal"==l?a*(e+
5)*g:1,m="horizontal"==l?1:a*(n+5)*g;b.css(p).css({left:x,top:m});b.hover(function(){b.hasClass("altgallery-active")||(b.data("style",{opacity:b.css("opacity"),borderColor:b.css("borderTopColor")}),b.css({borderColor:E(f.thumbnail.outlineColorOnRollOver),opacity:1}))},function(){b.hasClass("altgallery-active")||b.css(b.data("style"))});q.onOpenItem[a]=function(){var c=s.find("a").eq(a);c.parent().find("a").removeClass("altgallery-active").css({opacity:f.thumbnail.alpha/100,borderColor:E(f.thumbnail.outlineColor)});
c.addClass("altgallery-active").data("style",{opacity:1,borderColor:E(f.thumbnail.outlineColorOnClick)}).css(c.data("style"));var q;if("horizontal"==l&&G<w){var b=0-(a*(e+5)*g-G/2+e*g/2),c=0-w+G;0<b&&(b=0);b<c&&(b=c);C.animate({left:b});C.unbind("mouseleave").mouseleave(function(){q=setTimeout(function(){C.animate({left:b},1E3)},1E3)})}else A<J&&(b=0-(a*(n+5)*g-A/2+n*g/2),c=0-J+A,0<b&&(b=0),b<c&&(b=c),C.animate({top:b}),C.unbind("mouseleave").mouseleave(function(){q=setTimeout(function(){C.animate({top:b},
1E3)},1E3)}));C.unbind("mouseenter").mouseenter(function(){clearTimeout(q)})};b.click(function(){if(!q.drag){var f=q.currentItem;q.currentItem=a;c(this).hasClass("altgallery-active")||q.open(d[a],{direction:a>=f?"next":"prev"})}return!1});C.append(b);f.thumbnail.useShadow&&b.css(t);h[a]=b})(U);U=0;u();s.append(C);var V=function(){clearInterval(v);z=!1},v,z=!1;"horizontal"==l&&G<w?(s.mousemove(function(a){if(!q.drag){var d=b.scale()||1;a=(a.pageX-c(this).offset().left)/d;a<30*d?z||(z=!0,C.stop(),v=
setInterval(function(){var a=parseInt(C.css("left"))+parseInt(f.thumbBar.scrollSpeed);0<a?(C.css("left",0),V()):C.css("left",a)},25)):a>G-30*d?z||(z=!0,C.stop(),v=setInterval(function(){var a=parseInt(C.css("left"))-parseInt(f.thumbBar.scrollSpeed),c=0-w+G;a<c?(C.css("left",c),V()):C.css("left",a)},25)):V()}}),C.draggable({axis:"x",start:function(){q.drag=!0},stop:function(a,c){var f=c.position.left,b=0-w+G;0<f?C.animate({left:0},"fast"):f<b&&C.animate({left:b},"fast");setTimeout(function(){q.drag=
!1},100)}})):A<J&&(s.mousemove(function(a){if(!q.drag){var d=b.scale()||1;a=(a.pageY-c(this).offset().top)/d;a<30*d?z||(z=!0,C.stop(),v=setInterval(function(){var a=parseInt(C.css("top"))+parseInt(f.thumbBar.scrollSpeed);0<a?(C.css("top",0),V()):C.css("top",a)},25)):a>A-30*d?z||(z=!0,C.stop(),v=setInterval(function(){var a=parseInt(C.css("top"))-parseInt(f.thumbBar.scrollSpeed),c=0-J+A;a<c?(C.css("top",c),V()):C.css("top",a)},25)):V()}}),C.draggable({axis:"y",start:function(){q.drag=!0},stop:function(a,
c){var f=c.position.top,b=0-J+A;0<f?C.animate({top:0},"fast"):f<b&&C.animate({top:b},"fast");setTimeout(function(){q.drag=!1},100)}}));s.mouseleave(function(){V()});b.element.append(s)}q.open(q.getCurrentItem(),{transitionEffect:a.animate?f.image.transitionEffect.toLowerCase():"none"})};ca.prototype.open=function(a,q){q=q||{};if(q.direction)var f=q.direction;var b=this,d=this.settings,g=this.scaleFactor,e=this.canvas.element.find(".altgallery-imageFrame"),n=this.preloader.get();n.css({position:"absolute",
left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"}).hide();e.append(n);var m=setTimeout(function(){n.show();b.preloader.start()},500);B(a.source,function(r){if(a.id===b.currentItem){clearTimeout(m);b.preloader.stop();n.remove();var u=d.image.scaleMode.toLowerCase(),s="fill"==u?I.fill(r.width,r.height,e.width(),e.height()):I.fit(r.width,r.height,e.width(),e.height()),l;a.link?(l=c("<a></a>"),l.attr("href",a.link),a.target&&l.attr("target",a.target)):l=c("<div/>");l.click(function(){if(b.drag)return!1});
l.addClass("altgallery-image");l.css({display:"block",position:"absolute",left:"fill"==u?0:s.left,top:"fill"==u?0:s.top,width:"fill"==u?e.width():s.width,height:"fill"==u?e.height():s.height,overflow:"hidden",textDecoration:"none"});y(l,{borderRadius:d.image.cornerRadius*g/2});d.image.useShadow&&y(l,{boxShadow:g+"px "+g+"px "+2*g+"px rgba(0, 0, 0, 0.5)"});var G=c('<img src="'+r.src+'"/>');K(G);G.css({position:"absolute",left:"fill"==u?s.left:0,top:"fill"==u?s.top:0,width:s.width,height:s.height});
l.append(G);var A=c("<div/>");a.description&&"never"!=d.caption.visibleMode.toLowerCase()&&(A.html(a.description.replace("\n","<br/>")),A.css({position:"absolute",left:0,width:s.width-20*g,padding:9*g+"px "+10*g+"px",fontFamily:d.caption.fontName,fontSize:d.caption.fontSize*g,lineHeight:1.25,color:E(d.caption.color),background:P(d.caption.bgColor,d.caption.bgAlpha/100)}),"top"==d.caption.position.toLowerCase()?(A.css({top:0,borderBottom:"1px solid",borderBottomColor:P(d.caption.bgColor,d.caption.bgAlpha/
100)}),"onrollover"==d.caption.visibleMode.toLowerCase()&&(z()||A.css({top:-(A.height()+18)}).hide(),l.hover(function(){A.show().stop().animate({top:0},b.options.animation.duration)},function(){A.stop().animate({top:-(A.height()+18)},b.options.animation.duration,function(){A.hide()})}))):(A.css({bottom:0,borderTop:"1px solid",borderTopColor:P(d.caption.bgColor,d.caption.bgAlpha/100)}),"onrollover"==d.caption.visibleMode.toLowerCase()&&(z()||A.css({bottom:-(A.height()+18)}).hide(),l.hover(function(){A.show().stop().animate({bottom:0},
b.options.animation.duration)},function(){A.stop().animate({bottom:-(A.height()+18)},b.options.animation.duration,function(){A.hide()})}))),l.append(A));u=d.thumbBar.position.toLowerCase();u=!("left"==u||"right"==u);switch(q.transitionEffect||d.image.transitionEffect.toLowerCase()){default:case "fade":e.animate({opacity:0},{duration:500*d.image.transitionDuration,easing:"linear",complete:function(){e.empty();e.append(l);e.animate({opacity:1},{duration:500*d.image.transitionDuration,easing:"swing",
complete:function(){b.onOpen(r)}})}});break;case "slide":e.find(".altgallery-image").not(":last").remove();var w=e.find(".altgallery-image"),s="prev"==f?1:-1,J="easeOutCubic",C=1E3*d.image.transitionDuration;if(u){G=e.outerWidth(!1)+10;w.size()&&w.stop().animate({left:w.position().left+G*s},C,J,function(){w.remove()});e.append(l);var h=l.position().left;l.css({left:h+G*-s}).animate({left:h},C,J,function(){b.onOpen(r)})}else G=e.outerHeight(!1)+10,w.size()&&w.stop().animate({top:w.position().top+G*
s},C,J,function(){w.remove()}),e.append(l),h=l.position().top,l.css({top:h+G*-s}).animate({top:h},C,J,function(){b.onOpen(r)});break;case "xfade":case "crossfade":e.css({opacity:1});e.find(".altgallery-image").not(":last").remove();w=e.find(".altgallery-image");s=1E3*d.image.transitionDuration;w.size()?(w.animate({opacity:0},{duration:s,easing:"linear",complete:function(){c(this).remove();b.onOpen(r)}}),e.append(l),l.css({opacity:0}).animate({opacity:1},{duration:s,easing:"linear"})):(e.append(l),
l.css({opacity:0}).animate({opacity:1},{duration:s,easing:"linear",complete:function(){b.onOpen(r)}}));break;case "none":e.html(l),b.onOpen(r)}var p,C=b.options.animation.duration,J="easeOutQuad",t={transitionEffect:"slide"};u?l.draggable({axis:"x",start:function(){p=l.position().left;A.hide()},stop:function(a,c){c.position.left>p+30*g?(l.animate({left:e.outerWidth(!1)+15*g},C,J),b.prev(t)):c.position.left<p-30*g?(l.animate({left:-(e.outerWidth(!1)+15*g)},C,J),b.next(t)):(l.animate({left:p},"fast"),
A.show())}}):l.draggable({axis:"y",start:function(){p=l.position().top;A.hide()},stop:function(a,c){c.position.top>p+30*g?(l.animate({top:e.outerHeight(!1)+15*g},C,J),b.prev(t)):c.position.top<p-30*g?(l.animate({top:-(e.outerHeight(!1)+15*g)},C,J),b.next(t)):(l.animate({top:p},"fast"),A.show())}})}});b.onOpenItem[parseInt(a.id)]()};ca.prototype.prev=function(a){a=a||{};a.direction="prev";0<this.currentItem?this.currentItem--:this.currentItem=this.items.length-1;this.open(this.getCurrentItem(),a)};
ca.prototype.next=function(a){a=a||{};a.direction="next";this.currentItem<this.items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem(),a)};ca.prototype.slideshowStart=function(){var a=this;a.slideshow=!0;a.onOpen=function(){a.slideshowTimer&&clearInterval(a.slideshowTimer);a.slideshowTimer=setTimeout(function(){a.next()},1E3*a.settings.slideshow.delay)};if(a.settings.slideshow.stopAutoOnClick){var c=function(){a.slideshowStop();a.canvas.element.unbind("click",c).find("a").unbind("click",
c)};a.canvas.element.bind("click",c).find("a").bind("click",c)}};ca.prototype.slideshowStop=function(){this.onOpen=function(){};this.slideshow=!1;clearInterval(this.slideshowTimer)};R.prototype.scale=function(a){this.scaleFactor=a;this.originalSize||(this.originalSize={width:this.canvas.width(),height:this.canvas.height()});this.canvas.resize(this.originalSize.width*a,this.originalSize.height*a);this.canvas.empty();this.init()};R.prototype.init=function(){var a=this,c=this.settings;a.prevItem=null;
a.initPreloader();a.initImage();a.initNavigation();a.initThumbnails();a.initCaption();a.initButtons();var f,b=a.currentItem;if((f=location.hash.match(/#galleryPhotoNumber=(\d+)/))||(f=location.href.match(/[?&]galleryPhotoNumber=(\d+)/)))b=f[1]-1;a.open(a.items[b],function(){c.slideshow.start&&a.slideshowStart()})};R.prototype.initPreloader=function(){var a=this.canvas;this.preloader=(new ea(this.options.images.loader)).get();this.preloader.attr({src:this.options.images.loader}).css({position:"absolute",
left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});a.append(this.preloader)};R.prototype.initImage=function(){var a=this,q=this.canvas,f=this.settings,b=this.scaleFactor;0==f.image.padding&&(a.zeroPadding=!0,f.image.padding=10);var d=c("<div/>");d.css({position:"absolute",left:0,top:0,width:q.width(),height:q.height()});q.append(d);if(!a.zeroPadding){var g=a.background=c("<div/>");g.css({position:"absolute",left:0,top:0,zIndex:0,width:q.width(),height:q.height(),overflow:"hidden",background:E(f.image.bgTintColor)});
d.append(g)}var e=a.imageFrame=c("<div/>");e.css({position:"absolute",left:f.image.padding*b,top:f.image.padding*b,zIndex:1,width:q.width()-2*f.image.padding*b,height:q.height()-2*f.image.padding*b,overflow:"visible"});d.append(e);q.scale();var n;e.draggable({axis:"x",start:function(a,c){n=c.position.left},stop:function(c,d){d.position.left>n+30?e.animate({left:q.width()},function(){e.empty();a.prev()}):d.position.left<n-30?e.animate({left:-q.width()},function(){e.empty();a.next()}):e.animate({left:f.image.padding*
b},"fast")}})};R.prototype.initNavigation=function(){this.settings.buttons.showImageNavigationButtons&&(this.initPrevButton(),this.initNextButton())};R.prototype.initPrevButton=function(){var a=this,q=this.canvas,f=this.scaleFactor,b=a.prevButton=c("<div/>");b.css({position:"absolute",left:-10*f,top:(q.height()-69*f)/2,zIndex:1,width:72*f,height:69*f,background:"no-repeat center 0",backgroundImage:D(a.options.images.folder+"aura-arrows.png"),backgroundSize:32*f+"px "+144*f+"px",opacity:0.5,cursor:"pointer"}).hover(function(){c(this).css({opacity:1})},
function(){c(this).css({opacity:0.5})}).click(function(){a.prev();return!1});q.append(b)};R.prototype.initNextButton=function(){var a=this,q=this.canvas,f=this.scaleFactor,b=a.nextButton=c("<div/>");b.css({position:"absolute",right:-10*f,top:(q.height()-69*f)/2,zIndex:1,width:72*f,height:69*f,background:"no-repeat center "+-75*f+"px",backgroundImage:D(a.options.images.folder+"aura-arrows.png"),backgroundSize:32*f+"px "+144*f+"px",opacity:0.5,cursor:"pointer"}).hover(function(){c(this).css({opacity:1})},
function(){c(this).css({opacity:0.5})}).click(function(){a.next();return!1});q.append(b)};R.prototype.initThumbnails=function(){var a=this,q=this.canvas,f=this.settings,b=this.items,d=this.scaleFactor,g=q.width(),e=a.thumbBar=c("<div/>");e.css({position:"absolute",left:0,bottom:0,zIndex:1,width:g,height:f.thumbnail.height*d+20*d+15+15*d*a.scale2,background:"rgba(0,0,0,0.5)"});var n=c("<div/>");n.css({position:"absolute",left:0,top:14+15*d*a.scale2,width:q.width(),height:1,background:"#fff",opacity:0.7});
y(n,{boxShadow:"0 1px 0 #000"});e.append(n);var m=c('<div class="altgallery-thumbnails"/>');m.css({position:"absolute",left:0,bottom:10*d});var r=b.length*(f.thumbnail.width*d+10),n=Math.ceil(r/g),g=1<n?0:(g-r)/2-5,u,s=!1;1<n&&(e.mousemove(function(a){a=a.pageX-c(this).offset().left;a/=q.scale()||1;50>a?s||(s=!0,u=setInterval(function(){var a=parseInt(m.css("left"))+10;0<a&&(a=0);m.css({left:a})},25)):a>q.width()-50?s||(s=!0,u=setInterval(function(){var a=parseInt(m.css("left"))-10,c=-(r-q.width()+
10);a<c&&(a=c);m.css({left:a})},25)):(s=!1,clearInterval(u))}).mouseleave(function(){s=!1;clearInterval(u)}),m.draggable({axis:"x",start:function(){a.drag=!0},stop:function(c,f){var b=f.position.left,d=-(r-q.width()+10);0<b?m.animate({left:0},"fast"):b<d&&m.animate({left:d},"fast");setTimeout(function(){a.drag=!1},100)}}));for(n=0;n<b.length;n++){var l=c("<a></a>");l.attr({href:b[n].source}).css({position:"absolute",left:10*d+n*(f.thumbnail.width*d+10*d)+g,bottom:0,width:f.thumbnail.width*d,height:f.thumbnail.height*
d,overflow:"hidden",opacity:parseInt(f.thumbnail.alpha)/100});(function(q,g){g.hover(function(){c(this).css({opacity:1});y(this,{boxShadow:"0 0 6px #fff"})},function(){q!=a.currentItem&&(c(this).css({opacity:parseInt(f.thumbnail.alpha)/100}),y(this,{boxShadow:"none"}))}).click(function(){a.drag||a.open(b[q],function(){});return!1});B(b[q].thumb,function(a){var b=c("<img/>");K(b);b.attr({src:a.src});b.css({position:"absolute"});b.css(I.fill(a.width,a.height,f.thumbnail.width*d,f.thumbnail.height*d));
g.append(b)},50*q)})(n,l);m.append(l)}e.append(m);q.append(e);var G=!0;q.element.mouseenter(function(){G&&e.stop().fadeIn()});q.element.mouseleave(function(){s=!1;clearInterval(u);G&&e.stop().fadeOut()});a.imageFrame.parent().click(function(){G?(G=!1,e.stop().fadeOut()):(G=!0,e.stop().fadeIn())})};R.prototype.initCaption=function(){var a=this.canvas,b=this.scaleFactor,f=this.caption=c("<div/>");if(this.settings.caption.showCaption){var d=b*this.scale2;f.css({position:"absolute",left:10*b,top:8,width:a.width()-
100,height:16*d,lineHeight:16*d+"px",overflow:"hidden",fontFamily:'"Times New Roman", Times, serif',fontSize:12*d+"px",fontWeight:"bold",color:"#fff",textShadow:"0 1px 0 #000"});this.thumbBar.append(f)}};R.prototype.initButtons=function(){function a(){c(this).css({opacity:1})}function b(){c(this).css({opacity:0.5})}var f=this,d=this.settings,e=this.scaleFactor,g=c("<div/>");g.css({position:"absolute",right:5,top:7});var k={cssFloat:"left",width:16*e*f.scale2,height:16*e*f.scale2,margin:"0 0 0 4px",
backgroundImage:D(f.options.images.folder+"aura-buttons.png"),backgroundRepeat:"no-repeat",backgroundSize:16*e*f.scale2+"px "+96*e*f.scale2+"px",opacity:0.5,cursor:"pointer"},n=f.linkButton=c("<div/>");d.buttons.showLinkButton&&(n.prop({title:d.translation.getLink}).css(k).css({backgroundPosition:"0 "+-40*e*f.scale2+"px"}).click(function(){var a=f.getCurrentItem();a.link&&O(a.link,a.target||"_blank")}).hover(a,b),g.append(n));d.buttons.showFacebookButton&&(n=c("<div/>"),n.prop({title:d.translation.shareWithFacebook}).css(k).css({backgroundPosition:"0 "+
-60*e*f.scale2+"px"}).click(function(){O("http://www.facebook.com/sharer.php?u="+location.href+"%23galleryPhotoNumber="+(f.currentItem+1)+"&t="+f.getCurrentItem().description||"","_blank")}).hover(a,b),g.append(n));d.buttons.showTwitterButton&&(n=c("<div/>"),n.prop({title:d.translation.tweet}).css(k).css({backgroundPosition:"0 "+-80*e*f.scale2+"px"}).click(function(){O("https://twitter.com/intent/tweet?url="+location.href+"%23galleryPhotoNumber="+(f.currentItem+1)+"&text="+f.getCurrentItem().description||
"","_blank")}).hover(a,b),g.append(n));if(d.buttons.showLinkButton||d.buttons.showFacebookButton||d.buttons.showTwitterButton)n=c("<div/>"),n.css({cssFloat:"left",width:1,height:14*e*f.scale2,margin:"0 3px 0 5px",background:"#fff"}),g.append(n);d.buttons.showSlideshowButton&&(n=c("<div/>"),n.prop({title:d.translation.startSlideshow}).css(k).css({backgroundPosition:"0 0"}).click(function(){f.slideshow?(f.slideshowStop(),c(this).css({backgroundPosition:"0 0"})):(f.slideshowStart(),c(this).css({backgroundPosition:"0 "+
-20*e*f.scale2+"px"}))}).hover(a,b),g.append(n));f.thumbBar.append(g)};R.prototype.update=function(){this.updateThumbnails();this.updateNavigation();this.updateCaption()};R.prototype.updateThumbnails=function(){var a=this,b=0;a.thumbBar.find(".altgallery-thumbnails a").each(function(){var f=c(this);b==a.currentItem?(f.css({opacity:1}),y(f,{boxShadow:"0 0 6px #fff"})):(f.css({opacity:parseInt(a.settings.thumbnail.alpha)/100}),y(f,{boxShadow:"none"}));b++})};R.prototype.updateNavigation=function(){this.settings.buttons.showImageNavigationButtons&&
(0==this.currentItem?this.prevButton.hide():this.prevButton.show(),this.currentItem==this.items.length-1?this.nextButton.hide():this.nextButton.show())};R.prototype.updateCaption=function(a){a=a||this.getCurrentItem().description||this.settings.translation.image+" "+(this.currentItem+1)+"/"+this.items.length;this.caption.html(a.replace("\n","<br/>"))};R.prototype.open=function(a,b){var f=this,d=this.canvas,e=this.settings,g=this.scaleFactor;if(a.id!==f.prevItem){f.currentItem=a.id;f.getCurrentItem().link?
f.linkButton.show():f.linkButton.hide();var k=setTimeout(function(){f.preloader.show();f.preloader.start()},500);B(a.source,function(a){clearTimeout(k);f.preloader.hide();f.preloader.stop();f.imageFrame.stop().css({left:e.image.padding*g});var m=c("<img/>");K(m);m.attr({src:a.src}).css({position:"absolute"});var r,u=f.imageFrame.width(),s=f.imageFrame.height();"fill"==e.image.scaleMode?(r=I.fill(a.width,a.height,u,s),r.width>u&&(r.width=u,r.left=0),r.height>s&&(r.height=s,r.top=0)):r=I.fit(a.width,
a.height,u,s);m.css(I.fill(a.width,a.height,r.width,r.height));var l=f.imageFrame.find("div"),u=c("<div/>");u.css({position:"absolute",overflow:"hidden"}).css(r).hide();y(u,{boxShadow:"0 6px 6px rgba(0,0,0,0.6)"});u.append(m);f.imageFrame.append(u);l.animate({opacity:"hide"},f.options.animation.duration);u.animate({opacity:"show"},f.options.animation.duration,function(){l.remove()});if(!f.zeroPadding){var G=c("<img/>");K(G);G.attr({src:a.src}).css({position:"absolute"});G.css(I.fill(a.width,a.height,
d.width(),d.height()));var A=f.background.find("div"),m=c("<div/>");m.css({opacity:0});m.append(G);f.background.append(m);if(e.image.bgBlur){var w=function(){try{H.process(G.get(0),"blurfast",{amount:1.5})}catch(a){if("NS_ERROR_NOT_AVAILABLE"==a.name)setTimeout(w,10);else throw a;}};w()}A.animate({opacity:0},2*f.options.animation.duration);m.animate({opacity:0.5},2*f.options.animation.duration,function(){A.remove()})}"function"==typeof b&&b(a);B(f.items[(f.currentItem+1)%f.items.length].source)});
f.update();f.prevItem=f.currentItem}};R.prototype.prev=function(a){0<this.currentItem?this.open(this.items[this.currentItem-1],a):this.open(this.items[this.items.length-1],a)};R.prototype.next=function(a){this.currentItem<this.items.length-1?this.open(this.items[this.currentItem+1],a):this.open(this.items[0],a)};R.prototype.slideshowStart=function(){var a=this,c=this.settings;if(!a.slideshow){var f=function(){a.slideshowTimeoutId=setTimeout(function(){a.next(f)},1E3*c.slideshow.delay+2E3)};a.slideshow=
!0;setTimeout(function(){a.next(f)},1E3*c.slideshow.delay)}};R.prototype.slideshowStop=function(){this.slideshow&&(this.slideshow=!1,clearTimeout(this.slideshowTimeoutId))};Z.prototype.scale=function(a){this.scaleFactor=a;this.originalSize||(this.originalSize={width:this.canvas.width(),height:this.canvas.height()});this.canvas.resize(this.originalSize.width*a,this.originalSize.height*a);this.canvas.empty();this.render({animate:!1});this.imageOpened&&this.open(this.getCurrentItem(),{animate:!1})};
Z.prototype.render=function(a){var b=this,f=this.canvas,d=this.items,e=this.settings,g=this.scaleFactor;a=c.extend({animate:!0},a);f.element.empty();var k=f.width(),n=f.height(),m=Math.floor(e.thumbnail.width*g),r=Math.floor(e.thumbnail.height*g),u=Math.floor((k-40)/m);1>u&&(u=1);var s=Math.floor((n-40)/r);1>s&&(s=1);var l=Math.ceil(d.length/u);s>l&&(s=l);var G=u*s,A=b.pagesCount=Math.ceil(d.length/G),w=Math.floor(m)+2*g,h=Math.floor(r)+2*g,C=Math.floor((k-w*u)/2-8*g),p=Math.floor((n-h*s)/2-8*g),
t=b.pageWidth=w*u,v=b.pageHeight=h*s,l=c('<div class="altgallery-frame"/>'),n={position:"absolute",left:C,top:p,width:Math.floor(k-2*(C+8*g))+14*g,height:Math.floor(n-2*(p+8*g))+14*g,background:E(e.colorScheme.thumbsFrameColor)},n=c.extend(n,y({borderRadius:4*g+"px"}));e.colorScheme.useShadow&&(n=c.extend(n,y({boxShadow:"0 0 "+10*g+"px rgba(0, 0, 0, 0.5)"})));l.css(n);f.element.append(l);k=c('<div class="altgallery-frameMask"/>');n=c.extend(n,{background:"#000",opacity:0.6,zIndex:20});n=c.extend(n,
y({boxShadow:"none"}));k.css(n).hide();f.element.append(k);f=c("<div/>");f.css({position:"absolute",left:8*g,top:8*g,width:t-2,height:v-2,overflow:"hidden"});var U=b.imagesContainer=c("<div/>");U.css({position:"relative",left:0,top:0,width:w*u*A-2,height:h*s-2});f.append(U);l.append(f);b.drag=!1;var V=0;U.draggable({axis:"x",start:function(a,c){V=c.position.left;b.drag=!0},stop:function(a,c){c.position.left>V+30*g?b.prevPage():c.position.left<V-30*g?b.nextPage():b.placePage({duration:"fast"});setTimeout(function(){b.drag=
!1},100)}});for(f=0;f<d.length;f++)A=f%u*w+Math.floor(f/G)*t,k=Math.floor(f/u)%s*h,function(f,g,n){var l=c("<img/>");K(l);var k=c("<a/>");k.attr({href:d[f].source}).css({display:"block",position:"absolute",left:Math.floor(g),top:Math.floor(n+0.5*r),width:m,height:r,overflow:"hidden",opacity:0,background:E(e.colorScheme.imageBGColor),border:"none",margin:0,padding:0}).click(function(){return!1});U.append(k);var s=function(){k.click(function(){b.drag||(b.currentItem=f,b.open(d[f],{left:f%u*w+C,top:n+
p}));return!1}).mouseover(function(){l.stop().animate({opacity:1},b.options.animation.duration/2)}).mouseleave(function(){l.stop().animate({opacity:e.thumbnail.alpha/100},b.options.animation.duration/2)})};a.animate&&f>=b.page*G&&f<b.page*G+G?setTimeout(function(){k.animate({top:n,opacity:1},{duration:b.options.animation.duration,complete:s})},200*f):(k.css({top:n,opacity:1}),s());B(d[f].thumb,function(a){l.attr({src:a.src}).css({display:"block",position:"absolute",margin:0,padding:0,border:"none",
opacity:e.thumbnail.alpha/100}).css(I.fill(a.width,a.height,m,r));k.append(l)},200*f)}(f,A,k);s=30*g;h=b.prevPageButton=c("<div/>");h.css({position:"absolute",left:0,top:v/2-22*g,width:40*g,height:60*g,cursor:"pointer"});h.click(function(){b.prevPage()});t=c("<div/>");t.css({position:"absolute",left:5*g,top:15*g,width:s,height:s,background:D(b.options.images.folder+"left.png"),backgroundSize:s+"px "+s+"px",cursor:"pointer"});y(t,{borderRadius:4*g+"px"});h.append(t);l.append(h);h=b.nextPageButton=
c("<div/>");h.css({position:"absolute",right:0,top:v/2-22*g,width:40*g,height:60*g,cursor:"pointer"});h.click(function(){b.nextPage()});v=c("<div/>");v.css({position:"absolute",right:5*g,top:15*g,width:s,height:s,background:D(b.options.images.folder+"right.png"),backgroundSize:s+"px "+s+"px",cursor:"pointer"});y(v,{borderRadius:4*g+"px"});h.append(v);l.append(h);l.mouseover(function(){b.showControls()});l.mouseleave(function(){b.hideControls()});b.hideControls();b.showControls();b.placePage({animate:!1})};
Z.prototype.hideControls=function(){this.prevPageButton.hide();this.nextPageButton.hide()};Z.prototype.showControls=function(){0<this.page&&this.prevPageButton.show();this.page<this.pagesCount-1&&this.nextPageButton.show()};Z.prototype.open=function(a,q){var f=this,d=this.canvas,e=this.settings,g=this.scaleFactor;q=c.extend({animate:!0},q);f.imageOpened=!0;var k=c("<div>"),n=c('<img src="'+a.thumb+'"/>');K(n);var m=(new ea(f.options.images.loader)).get();m.css({position:"absolute",left:"50%",top:"50%",
zIndex:10,margin:"-16px 0 0 -16px"});var r=setTimeout(function(){k.append(m);m.start()},500);B(a.thumb,function(m){function s(){var b=c('<div class="captionContainer"></div>');b.css({position:"absolute",left:8*g,top:8*g,width:l.width,height:l.height,overflow:"hidden",cursor:"pointer"});k.append(b);if(a.description){var m=parseInt(e.imageCaption.fontSize),m=m||f.defaultSettings.imageCaption.fontSize,s=c("<div><div>"+a.description.replace("\n","<br/>")+"</div></div>");s.css({position:"absolute",left:0,
width:l.width,fontFamily:e.imageCaption.fontName,fontSize:m*g+"px",lineHeight:1.25,color:E(e.imageCaption.color),background:P(e.imageCaption.bgColor,e.imageCaption.bgAlpha/100)});b.append(s);var m="1px solid "+P(e.imageCaption.bgColor,e.imageCaption.bgAlpha/100),u=f.options.animation.duration;s.children("div").css({padding:10*g});"bottom"==e.imageCaption.position.toLowerCase()?(s.css({borderTop:m}),s.css({bottom:-s.outerHeight(!1)}),q.animate?s.animate({bottom:0},u,"easeOutQuad"):s.css({bottom:0})):
(s.css({borderBottom:m}),s.css({top:-s.outerHeight(!1)}),q.animate?s.animate({top:0},u,"easeOutQuad"):s.css({top:0}))}var w=c('<a class="altgallery-close"></a>');w.css({position:"absolute",right:-20*g,top:-19*g,width:40*g,height:40*g,zIndex:1,background:"no-repeat center",backgroundImage:D(f.options.images.close),backgroundSize:30*g+"px "+30*g+"px",cursor:"pointer"});z()&&w.css({width:47*g,height:45*g,backgroundSize:40*g+"px "+40*g+"px"});w.click(function(){f.imageOpened=!1;c(this).remove();s&&s.remove();
r.opacity="hide";k.animate(r,f.options.animation.duration,function(){c(this).remove()});n.animate(A,f.options.animation.duration);c(".altgallery-frameMask",f.canvas.element).fadeOut(f.options.animation.duration)});k.append(w);b.click(function(){h||(w.remove(),s&&s.remove(),r.opacity="hide",k.animate(r,f.options.animation.duration,function(){c(this).remove();f.next()}),n.animate(A,f.options.animation.duration))});var h,p;k.draggable({axis:"x",start:function(a,c){h=!0;p=c.position.left;w.hide()},stop:function(a,
c){c.position.left>p+30?k.animate({left:d.width()},function(){f.prev()}):c.position.left<p-30?k.animate({left:-d.width()},function(){f.next()}):k.animate({left:p},"fast",function(){w.show()});setTimeout(function(){h=!1},100)}})}c(".altgallery-imageFrame",f.canvas.element).remove();c(".altgallery-frameMask",f.canvas.element).fadeIn(f.options.animation.duration);k.addClass("altgallery-imageFrame").css({position:"absolute",padding:8*g,background:E(e.colorScheme.imageBGColor),zIndex:30}).hide();var l=
I.fit(m.width,m.height,f.canvas.width()-48*g,f.canvas.height()-48*g),r={left:l.left+16*g+l.width/3,top:l.top+16*g+l.height/3,width:l.width/3,height:l.height/3};q.left!==b&&(r.left=q.left);q.top!==b&&(r.top=q.top);k.css(r);m=I.fit(m.width,m.height,f.canvas.width()-48*g,f.canvas.height()-48*g);var A={left:m.left+16*g+m.width/3,top:m.top+16*g+m.height/3,width:m.width/3,height:m.height/3,margin:0,padding:0,border:"none",maxWidth:"none",maxHeight:"none",cursor:"pointer"};n.css(A);k.append(n);f.canvas.element.append(k);
var w={left:l.left+16*g,top:l.top+16*g,width:l.width,height:l.height};q.animate?(n.animate(m,f.options.animation.duration),k.animate(c.extend(w,{opacity:"show"}),f.options.animation.duration,s)):(n.css(m),k.css(w).show(),s())});B(a.source,function(){clearTimeout(r);m.stop();m.remove();n.attr("src",a.source)})};Z.prototype.prev=function(){this.currentItem--;0>this.currentItem&&(this.currentItem=this.items.length-1);this.open(this.getCurrentItem())};Z.prototype.next=function(){this.currentItem++;this.currentItem>=
this.items.length&&(this.currentItem=0);this.open(this.getCurrentItem())};Z.prototype.placePage=function(a){var b=this;a=c.extend({animate:!0,duration:b.options.animation.duration},a);a.animate?(b.hideControls(),b.imagesContainer.animate({left:-(b.page*b.pageWidth)},{duration:a.duration,complete:function(){b.showControls()}})):b.imagesContainer.css({left:-(b.page*b.pageWidth)})};Z.prototype.prevPage=function(){this.page--;0>this.page&&(this.page=0);this.placePage()};Z.prototype.nextPage=function(){this.page++;
this.page>=this.pagesCount&&(this.page=this.pagesCount-1);this.placePage()};L.prototype.scale=function(a){this.scaleFactor=a;this.originalSize||(this.originalSize={width:this.canvas.width(),height:this.canvas.height()});this.canvas.resize(this.originalSize.width*a,this.originalSize.height*a);this.canvas.empty();this.init()};L.prototype.init=function(){var a=this.settings;this.initFrame();this.initNavigation();this.initCaption();this.initButtons();this.initThumbnails();this.initImage();switch(a.initialState.toLowerCase()){case "show thumbnails":this.showThumbnails();
break;default:case "load image":case "show image":this.showImage();break;case "start slideshow":this.showImage(),this.slideshowStart()}};L.prototype.initFrame=function(){var a=this.canvas,b=this.settings,f=this.scaleFactor,d=this.scale2,e=this.frame=c("<div/>"),g=a.width()-10*f,k=a.height()-10*f;e.css({position:"absolute",left:5*f,top:5*f,width:g,height:k,overflow:"hidden",background:E(b.buttons.bgColor)});y(e,{borderRadius:5*f+"px",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)"});var n=this.content=c("<div/>"),
g=this.contentWidth=g-18*f,d=this.contentHeight=k-(20+23*d)*f;n.css({position:"absolute",left:9*f,top:9*f,width:g,height:d,background:E(b.base.color)});y(n,{borderRadius:4*f+"px"});e.append(n);b=this.preloader=(new ea(this.options.images.loader)).get();b.css({position:"absolute",left:"50%",top:"50%",zIndex:100,margin:"-16px 0 0 -16px"});n.append(b);a.append(e)};L.prototype.initNavigation=function(){this.initPrevButton();this.initNextButton()};L.prototype.initPrevButton=function(){var a=this.settings,
b=this.scaleFactor,f=c("<div/>");f.css({position:"absolute",left:0,top:this.contentHeight/2-20*b,zIndex:10,width:21*b,height:60*b,background:E(a.buttons.bgColor),backgroundSize:25*b+"px "+150*b+"px",cursor:"default"});y(f,{borderRadius:10*b+"px",boxShadow:"5px 0 "+15*b+"px rgba(0, 0, 0, 0.5)"});this.frame.append(f);var d=c("<div/>");d.css({position:"absolute",left:0,top:this.contentHeight/2-30*b,zIndex:10,width:9*b,height:80*b,background:E(a.buttons.bgColor),cursor:"default"});this.frame.append(d);
var e=this.prevButton=c("<div/>");e.css({position:"absolute",left:0,top:this.contentHeight/2-20*b,zIndex:10,width:21*b,height:60*b,cursor:"pointer"});a=c("<div/>");a.css({marginTop:25*b,marginLeft:6*b,width:9*b,height:9*b,background:"url("+this.options.images.folder+"cubic-buttons.png) no-repeat",backgroundPosition:-8*b+"px "+-8*b+"px",backgroundSize:25*b+"px "+150*b+"px"});e.append(a);this.frame.append(e);var g;this.canvas.element.hover(function(){clearTimeout(g);f.stop().show().css({opacity:1}).animate({left:0});
e.stop().animate({left:0,opacity:1})},function(){g=setTimeout(function(){f.stop().animate({left:-12*b},function(){f.fadeOut()});e.stop().animate({left:-12*b,opacity:0})},100)});this.hidePrevButton=function(){f.css({visibility:"hidden"});d.css({visibility:"hidden"});e.css({visibility:"hidden"})};this.showPrevButton=function(){f.css({visibility:"visible"});d.css({visibility:"visible"});e.css({visibility:"visible"})}};L.prototype.initNextButton=function(){var a=this.settings,b=this.scaleFactor,f=c("<div/>");
f.css({position:"absolute",right:0,top:this.contentHeight/2-20*b,zIndex:10,width:21*b,height:60*b,background:E(a.buttons.bgColor),cursor:"default"});y(f,{borderRadius:10*b+"px",boxShadow:"-5px 0 "+15*b+"px rgba(0, 0, 0, 0.5)"});this.frame.append(f);var d=c("<div/>");d.css({position:"absolute",right:0,top:this.contentHeight/2-30*b,zIndex:10,width:9*b,height:80*b,background:E(a.buttons.bgColor),cursor:"default"});this.frame.append(d);var e=this.nextButton=c("<div/>");e.css({position:"absolute",right:0,
top:this.contentHeight/2-20*b,zIndex:10,width:21*b,height:60*b,cursor:"pointer"});a=c("<div/>");a.css({marginTop:25*b,marginLeft:6*b,width:9*b,height:9*b,background:"url("+this.options.images.folder+"cubic-buttons.png) no-repeat",backgroundPosition:-8*b+"px "+-33*b+"px",backgroundSize:25*b+"px "+150*b+"px"});e.append(a);this.frame.append(e);var g;this.canvas.element.hover(function(){clearTimeout(g);f.stop().show().css({opacity:1}).animate({right:0});e.stop().animate({right:0,opacity:1})},function(){g=
setTimeout(function(){f.stop().animate({right:-12*b},function(){f.fadeOut()});e.stop().animate({right:-12*b,opacity:0})},100)});this.hideNextButton=function(){f.css({visibility:"hidden"});d.css({visibility:"hidden"});e.css({visibility:"hidden"})};this.showNextButton=function(){f.css({visibility:"visible"});d.css({visibility:"visible"});e.css({visibility:"visible"})}};L.prototype.initCaption=function(){var a=this.scaleFactor,b=this.scale2,f=this.caption=c("<div/>");f.css({position:"absolute",left:10*
a,bottom:10*a*b,width:this.contentWidth-60*a,height:14*a*b,lineHeight:14*a*b+"px",overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:11*a*b+"px",color:"#777"});this.frame.append(f)};L.prototype.initButtons=function(){var a=this,b=this.settings,f=this.scaleFactor,d=this.scale2,e=function(){c(this).css({borderColor:"#fff #bbb #bbb #fff"});y(this,{boxShadow:"0 0 2px rgba(0, 0, 0, 0.2)"})},g=function(){c(this).css({borderColor:"transparent"});y(this,{boxShadow:"none"})},k=23*f*d,n=25*
f*d+"px "+150*f*d+"px";if(b.buttons.showSlideshowButton){var m=a.slideshowButton=c("<div/>");m.css({position:"absolute",right:(b.buttons.showThumbnailsButton?32:8)*f*d,bottom:5*f,width:k,height:k,background:D(a.options.images.folder+"cubic-buttons.png")+" no-repeat",backgroundPosition:"0px "+-51*f*d+"px",backgroundSize:n,border:"1px solid",borderColor:"transparent",cursor:"pointer"});y(m,{borderRadius:"3px 4px"});m.hover(e,g);m.click(function(){a.showImage();a.slideshowStart()});a.frame.append(m)}b.buttons.showThumbnailsButton&&
(b=a.showThumbnailsButton=c("<div/>"),b.css({position:"absolute",right:8*f*d,bottom:5*f,width:k,height:k,background:D(a.options.images.folder+"cubic-buttons.png")+" no-repeat",backgroundPosition:"-1px "+-126*f*d+"px",backgroundSize:n,border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),y(b,{borderRadius:"3px 4px"}),b.hover(e,g),b.click(function(){a.showThumbnails()}),a.frame.append(b),b=a.showImagesButton=c("<div/>"),b.css({position:"absolute",right:8*f*d,bottom:5*f,width:k,height:k,
background:D(a.options.images.folder+"cubic-buttons.png")+" no-repeat",backgroundPosition:"-1px "+-101*f*d+"px",backgroundSize:n,border:"1px solid",borderColor:"transparent",cursor:"pointer"}).hide(),y(b,{borderRadius:"3px 4px"}),b.hover(e,g),b.click(function(){a.showImage()}),a.frame.append(b))};L.prototype.initImage=function(){var a=this.scaleFactor,b=this.imageWidth=this.contentWidth-2*this.settings.base.visibleFrame*a,f=this.imageHeight=this.contentHeight-2*this.settings.base.visibleFrame*a,d=
this.imagesFrame=c("<div/>");d.css({position:"absolute",left:this.settings.base.visibleFrame*a,top:this.settings.base.visibleFrame*a,width:b,height:f,overflow:"hidden"}).hide();y(d,{borderRadius:3*a+"px"});this.content.append(d);a=this.imagesContainer=c("<div/>");a.css({position:"relative",left:0,top:0});d.append(a)};L.prototype.showImage=function(a){var c=this,b=this.scaleFactor,d=function(){function a(){setTimeout(function(){c.drag=!1},100)}c.cleanup();c.thumbnailsFrame.hide();c.imagesFrame.show();
c.showImagesButton.hide();c.showThumbnailsButton.show();c.showPrevButton();c.showNextButton();c.prevButton.unbind("click").click(function(){c.slideshowStop();c.prev()});c.nextButton.unbind("click").click(function(){c.slideshowStop();c.next()});var d=0;c.imagesContainer.draggable({axis:"x",start:function(a,b){c.drag=!0;d=b.position.left},stop:function(e,x){x.position.left>d+30*b?c.prev(c.options.animation.duration,a):x.position.left<d-30*b?c.next(c.options.animation.duration,a):c.place(c.options.animation.duration,
a)}});c.imagesContainer.unbind("dblclick").dblclick(function(){c.showThumbnails()})};!1!==a?(c.hidePrevButton(),c.hideNextButton(),c.open(c.getCurrentItem(),d)):d()};L.prototype.initThumbnails=function(){function a(){b.cleanup()}var b=this,f=this.canvas,d=this.scaleFactor,e=b.thumbnailsWidth=b.contentWidth-2*b.settings.base.visibleFrame*d,g=b.thumbnailsHeight=b.contentHeight-2*b.settings.base.visibleFrame*d,k=b.thumbnailsFrame=c("<div/>");k.css({position:"absolute",left:b.settings.base.visibleFrame*
d,top:b.settings.base.visibleFrame*d,width:e,height:g,overflow:"hidden"}).hide();y(k,{borderRadius:3*d+"px"});b.content.append(k);var n=b.thumbnailsContainer=c('<div class="thumbnailsContainer"/>');n.css({position:"relative",left:0,top:0,width:e*Math.ceil(b.items.length/20),height:g});k.append(n);for(var m=Math.round((e-5)/5),r=Math.round((g-4)/4),u=Math.round((e-5*m)/10),s=Math.round((g-4*r)/8),d=0;d<b.items.length;d++)(function(d,g){B(g.thumb,function(x){var k=d%5,h=Math.floor(d%20/5),C=c('<a class="altgallery-thumbnail altgallery-thumbnail-'+
d+'"></a>');K(C);C.attr({href:g.source}).css({display:"block",position:"absolute",left:k*m+Math.floor(d/20)*e+1*k+u,top:h*r+1*h+s,width:m,height:r,overflow:"hidden",cursor:"pointer",zIndex:Math.floor(d%20/5)});y(C,{boxShadow:"0px 3px 3px rgba(0, 0, 0, 0.5)"});C.mouseover(function(){if(b.enableThumbnailsHover&&!b.drag){var s=0;0==k?s=m/8:4==k&&(s=-m/8);var u=0;0==h?u=r/8:3==h&&(u=-r/8);b.updateCaption(g.description||"Image "+(d+1)+" / "+b.items.length);b.cleanup();f.element.find(".altgallery-thumbnail").css({opacity:0.8});
var p=c(this).clone();p.addClass("altgallery-clone");var C=n.offset();p.css({left:c(this).offset().left-C.left,top:c(this).offset().top-C.top,zIndex:10,opacity:1});y(p,{boxShadow:"5px 15px 13px rgba(0, 0, 0, 0.7)"});n.append(p);var t=p.find("img");p.animate({width:1.25*m,height:1.25*r,marginLeft:-m/8+s,marginTop:-r/8+u},{duration:"fast",easing:"linear",step:function(){t.css(I.fill(x.width,x.height,p.width(),p.height()))}});p.click(function(){b.drag||(b.currentItem=d,p.unbind("mouseleave"),b.canvas.element.unbind("mouseleave",
a),y(p,{boxShadow:"none"}),p.animate({left:b.currentPage*e,top:0,width:b.imageWidth,height:b.imageHeight,marginLeft:0,marginTop:0},{duration:"normal",step:function(){t.css(I.fill(x.width,x.height,p.width(),p.height()))},complete:function(){b.showImage()}}));return!1});p.mouseleave(function(){b.cleanup();b.updateCaption(" ")})}});C.click(function(){b.drag||(b.currentItem=d,b.showImage());return!1});var p=c("<img/>");K(p);p.attr({src:g.thumb}).css({display:"block",position:"absolute",border:"none"}).css(I.fill(x.width,
x.height,m,r));C.append(p);n.append(C)})})(d,b.items[d]);b.canvas.element.mouseleave(a);b.currentPage=0;b.preloader.hide()};L.prototype.showThumbnails=function(){function a(a,c){e.thumbnailsContainer.stop().animate({left:-e.currentPage*e.thumbnailsWidth},{duration:a||2*e.options.animation.duration,complete:function(){e.enableThumbnailsHover=!0;"function"==typeof c&&c()}})}function c(b,f){0<e.currentPage&&(e.currentPage--,e.enableThumbnailsHover=!1,e.cleanup());a(b,f);e.updateNavigation()}function b(c,
f){e.currentPage<Math.ceil(e.items.length/20)-1&&(e.currentPage++,e.enableThumbnailsHover=!1,e.cleanup());a(c,f);e.updateNavigation()}function d(){setTimeout(function(){e.drag=!1},100)}var e=this,g=this.scaleFactor;e.slideshow&&e.slideshowStop();e.updateCaption(" ");e.imagesFrame.hide();e.thumbnailsFrame.show();e.showThumbnailsButton.hide();e.showImagesButton.show();e.prevButton.unbind("click").click(function(){c()});e.nextButton.unbind("click").click(function(){b()});e.updateNavigation();var k=0;
e.thumbnailsContainer.draggable({axis:"x",start:function(a,c){e.drag=!0;k=c.position.left;e.cleanup()},stop:function(n,m){m.position.left>k+30*g?c(e.options.animation.duration,d):m.position.left<k-30*g?b(e.options.animation.duration,d):a(e.options.animation.duration,d)}})};L.prototype.updateNavigation=function(){var a=Math.ceil(this.items.length/20);0<this.currentPage?this.showPrevButton():this.hidePrevButton();this.currentPage<a-1?this.showNextButton():this.hideNextButton()};L.prototype.updateCaption=
function(a){(a=a||this.getCurrentItem().description)?this.caption.html(a.replace("\n","<br/>")):this.caption.html("Image "+(this.currentItem+1)+" / "+this.items.length)};L.prototype.loadImage=function(a,d){var f=this;a%=f.items.length;f.items[a]!==b&&B(f.items[a].source,function(b){var e="altgallery-image-"+a;if(!f.imagesContainer.find("."+e).size()){e=c('<div class="'+e+'"></div>');e.css({position:"absolute",left:f.imageWidth*a,top:0,width:f.imageWidth,height:f.imageHeight,overflow:"hidden"});var g=
c('<img style="position:absolute;"/>');K(g);g.attr("src",b.src);g.css(I.fill(b.width,b.height,f.imageWidth,f.imageHeight));e.append(g);f.imagesContainer.append(e)}"function"==typeof d&&d(b)})};L.prototype.open=function(a,b){var f=this,d="altgallery-image-"+f.currentItem;f.imagesContainer.find("."+d).size()?"function"==typeof b&&b():(f.preloader.show(),f.preloader.start(),B(a.source,function(a){var e=c('<div class="'+d+'"></div>');e.css({position:"absolute",left:f.imageWidth*f.currentItem,top:0,width:f.imageWidth,
height:f.imageHeight,overflow:"hidden"});var k=c('<img style="position:absolute;"/>');K(k);k.attr("src",a.src);k.css(I.fill(a.width,a.height,f.imageWidth,f.imageHeight));e.append(k);f.imagesContainer.append(e);f.preloader.hide();f.preloader.stop();"function"==typeof b&&b()}));f.imagesContainer.stop().css({left:-f.imageWidth*f.currentItem});f.updateCaption();f.loadImage(a.id+1);f.loadImage(a.id-1)};L.prototype.place=function(a,c){this.imagesContainer.stop().animate({left:-this.imageWidth*this.currentItem},
{duration:a||2*this.options.animation.duration,complete:function(){"function"==typeof c&&c()}})};L.prototype.prev=function(a,c){var b=this;if(0<b.currentItem){b.currentItem--;var d=setTimeout(function(){b.preloader.show();b.preloader.start()},500);b.loadImage(b.currentItem,function(){clearTimeout(d);b.preloader.hide();b.preloader.stop();b.place(a,c);b.updateCaption();b.loadImage(b.currentItem-1)})}else b.currentItem=b.items.length-1,b.showImage()};L.prototype.next=function(a,c){var b=this;if(b.currentItem<
b.items.length-1){b.currentItem++;var d=setTimeout(function(){b.preloader.show();b.preloader.start()},500);b.loadImage(b.currentItem,function(){clearTimeout(d);b.preloader.hide();b.preloader.stop();b.place(a,function(){b.slideshow&&b.slideshowStart();"function"==typeof c&&c()});b.updateCaption();b.loadImage(b.currentItem+1)})}else b.currentItem=0,b.showImage(),b.slideshow&&b.slideshowStart()};L.prototype.slideshowStart=function(){var a=this;a.showImage(!1);clearTimeout(a.slideshowTimer);a.slideshow=
!0;a.slideshowButton.css({backgroundPosition:"0px "+-76*this.scaleFactor*this.scale2+"px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStop()});a.slideshowTimer=setTimeout(function(){a.next()},1E3*a.settings.slideshowDelay)};L.prototype.slideshowStop=function(){var a=this;a.slideshow=!1;clearTimeout(a.slideshowTimer);a.slideshowButton.css({backgroundPosition:"0px "+-51*this.scaleFactor*this.scale2+"px"});a.slideshowButton.unbind("click").click(function(){a.slideshowStart()})};L.prototype.cleanup=
function(){this.canvas.element.find(".altgallery-clone").remove();c(this.canvas.element).find(".altgallery-thumbnail").css({opacity:1})};$.prototype.scale=function(a){this.scaleFactor=a;this.originalSize||(this.originalSize={width:this.canvas.width(),height:this.canvas.height()});this.canvas.resize(this.originalSize.width*a,this.originalSize.height*a);this.canvas.empty();this.render({animate:!1});this.imageOpened&&this.open(this.getCurrentItem(),{animate:!1})};$.prototype.render=function(a){var b=
this,f=this.canvas,d=this.items,e=this.settings,g=this.scaleFactor;a=c.extend({animate:!0},a);f.element.empty();var k=f.width(),n=f.height(),m=e.images.margin*g,r=e.frame.useShadow?e.frame.shadowSize*g:0,u=e.frame.frameSize*g,s=k-2*r,k=n-2*r,l=e.images.visibleQuantity,h=b.pageWidth=s-2*u+m,A=b.pageHeight=k-2*u,w=h/l-m,p=b.pagesCount=Math.ceil(d.length/l),C=w+m,n=c('<div class="altgallery-frame"/>'),t={position:"absolute",left:r,top:r,width:s,height:k,background:E(e.frame.frameColor)},t=c.extend(t,
y({borderRadius:4*g+"px"}));e.frame.useShadow&&(t=c.extend(t,y({boxShadow:"0 0 "+r+"px rgba(0, 0, 0, 0.67)"})));n.css(t);f.element.append(n);s=c('<div class="altgallery-frameMask"/>');t=c.extend(t,{background:"#000",opacity:0.6,zIndex:20});t=c.extend(t,y({boxShadow:"none"}));s.css(t).hide();f.element.append(s);f=c("<div/>");f.css({position:"absolute",left:u,top:u,width:h-m,height:A,overflow:"hidden"});var v=b.imagesContainer=c("<div/>");v.css({position:"relative",left:0,top:0,width:C*l*p,height:1*
A});f.append(v);n.append(f);b.drag=!1;var z=0;v.draggable({axis:"x",start:function(a,c){z=c.position.left;b.drag=!0},stop:function(a,c){c.position.left>z+30*g?b.prevPage():c.position.left<z-30*g?b.nextPage():b.placePage({duration:"fast"});setTimeout(function(){b.drag=!1},100)}});for(m=0;m<d.length;m++)f=m%l*C+Math.floor(m/l)*h,function(f,g,m){var n=c("<img/>");K(n);var s=c("<a/>");s.attr({href:d[f].source}).css({display:"block",position:"absolute",left:Math.floor(g),top:Math.floor(m+0.5*A),width:w,
height:A,overflow:"hidden",opacity:0,border:"none",margin:0,padding:0}).click(function(){return!1});v.append(s);var k=function(){s.click(function(){b.drag||(b.currentItem=f,b.open(d[f],{left:f%l*C+r,top:m+r}));return!1}).mouseover(function(){n.stop().animate({opacity:1},b.options.animation.duration/2)}).mouseleave(function(){n.stop().animate({opacity:e.images.alpha/100},b.options.animation.duration/2)})};a.animate&&f>=b.page*l&&f<b.page*l+l?setTimeout(function(){s.animate({top:m,opacity:1},{duration:b.options.animation.duration,
complete:k})},200*(f+1)):(s.css({top:m,opacity:1}),k());B(d[f].thumb,function(a){n.attr({src:a.src}).css({display:"block",position:"absolute",margin:0,padding:0,border:"none",opacity:e.images.alpha/100}).css(I.fill(a.width,a.height,w,A));s.append(n)},200*f)}(m,f,0);m=30*g;h=4*g;f=b.prevPageButton=c("<div/>");f.css({position:"absolute",left:0,top:(k-60*g)/2,width:u+m,height:60*g,cursor:"pointer"});f.click(function(){b.prevPage()});p=c("<div/>");p.css({position:"absolute",left:u-h,top:15*g,width:m,
height:m,background:D(b.options.images.folder+"left.png"),backgroundSize:m+"px "+m+"px",cursor:"pointer"});y(p,{borderRadius:h+"px"});f.append(p);n.append(f);f=b.nextPageButton=c("<div/>");f.css({position:"absolute",right:0,top:(k-60*g)/2,width:u+m,height:60*g,cursor:"pointer"});f.click(function(){b.nextPage()});k=c("<div/>");k.css({position:"absolute",right:u-h,top:15*g,width:m,height:m,background:D(b.options.images.folder+"right.png"),backgroundSize:m+"px "+m+"px",cursor:"pointer"});y(k,{borderRadius:h+
"px"});f.append(k);n.append(f);n.mouseover(function(){b.showControls()});n.mouseleave(function(){b.hideControls()});b.hideControls();b.showControls();b.placePage({animate:!1})};$.prototype.hideControls=function(){this.prevPageButton.hide();this.nextPageButton.hide()};$.prototype.showControls=function(){0<this.page&&this.prevPageButton.show();this.page<this.pagesCount-1&&this.nextPageButton.show()};$.prototype.open=function(){};$.prototype.prev=function(){};$.prototype.next=function(){};$.prototype.placePage=
function(a){var b=this;a=c.extend({animate:!0,duration:b.options.animation.duration},a);a.animate?(b.hideControls(),b.imagesContainer.animate({left:-(b.page*b.pageWidth)},{duration:a.duration,complete:function(){b.showControls()}})):b.imagesContainer.css({left:-(b.page*b.pageWidth)})};$.prototype.prevPage=function(){this.page--;0>this.page&&(this.page=0);this.placePage()};$.prototype.nextPage=function(){this.page++;this.page>=this.pagesCount&&(this.page=this.pagesCount-1);this.placePage()};X.prototype.scale=
function(a){this.scaleFactor=a;this.originalSize||(this.originalSize={width:this.canvas.width(),height:this.canvas.height()});this.canvas.resize(this.originalSize.width*a,this.originalSize.height*a);this.render()};X.prototype.getItemStyle=function(a,c){var b=this.settings,d=this.canvas,e,g;e=this.getItemX(c);g=this.getItemZ(c);var k;k=Math.abs(e);var n=I.fit(a.width,a.height,b.maxImageWidth*this.scaleFactor*(1>k?1:2>k?0.55:3>k?0.5:0.6-0.05*k),d.height()-60);return{zIndex:10*g,left:(d.width()-n.width)/
2+e*d.width()/8+(e?e/k*b.maxImageWidth/3:0),top:(d.height()-n.height)/2-30,width:n.width,height:n.height,opacity:e?0.8:1,transform:{rotateY:-(e?e/k:0)*b.imageAngle+"deg"}}};X.prototype.render=function(){var a=this,b=this.settings,f=this.canvas,d=this.items;this.canvas.empty();this.scene=c('<div class="altgallery-scene"></div>');this.scene.css({position:"relative",width:f.width(),height:f.height()});this.canvas.element.append(this.scene);var e=f.scale()||1,g,k={touchstart:function(c){a.drag=!0;g=c.pageX},
touchend:function(c){c=c.pageX-g;var b=Math.abs(c)>a.canvas.width()/2?2:1;c>30*e?(setTimeout(function(){a.drag=!1},100),a.prev(b)):c<-30*e?(setTimeout(function(){a.drag=!1},100),a.next(b)):a.drag=!1},touchcancel:function(){setTimeout(function(){a.drag=!1},100)}},k=k||{};c(this.scene).each(function(){var a=!1,b=!1;c(this).mousedown(function(){a=!0;return!1}).mousemove(function(c){a&&(b?"function"==typeof k.touchmove&&k.touchmove(c):(b=!0,"function"==typeof k.touchstart&&k.touchstart(c)));return!1}).mouseup(function(c){a=
!1;b&&(b=!1,"function"==typeof k.touchend&&k.touchend(c));return!1}).mouseleave(function(c){a=!1;b&&(b=!1,"function"==typeof k.touchcancel&&k.touchcancel(c))})});var n=!M();a.scene.empty();a.scene.css({"-webkit-perspective":400,"-moz-perspective":400,perspective:400});var m=b.useHighlight,r,u,s,l,h,A=0;l=a.currentItem;h=2*Math.max(l,d.length-l);for(u=1;u<=h;u++)r=l+(u%2?parseInt(u/2):-parseInt(u/2)),0<=r&&r<d.length&&function(e){setTimeout(function(){s=a.getItemX(e);B(d[e].source,function(g){var l=
a.getItemStyle(g,e),k=c('<a class="altgallery-item-'+e+'"></a>');d[e].link&&(k.attr("href",d[e].link),d[e].target&&k.attr("target",d[e].target));k.css({display:"block",position:"absolute",zIndex:l.zIndex,left:l.left,top:l.top,width:l.width,height:l.height,overflow:"visible",background:m?"#000":"transparent",cursor:"pointer",outline:"none"});n&&Q(k,{rotateY:l.transform.rotateY});var r=c("<img/>");r.attr("src",g.src);K(r);r.css({display:"block",width:l.width,height:l.height,opacity:m?l.opacity:1});
k.append(r);if(a.showReflections){g=r.clone();g.css({position:"absolute",opacity:b.reflectionAlpha/100,"-moz-transform":"scaleY(-1)","-webkit-transform":"scaleY(-1)","-o-transform":"scaleY(-1)","-ms-transform":"scaleY(-1)",transform:"scaleY(-1)",zIndex:1});var u=c('<div class="altgallery-overlay"></div>');u.css({position:"absolute",top:l.height,width:l.width,height:l.height,background:f.element.css("backgroundColor"),zIndex:0});var F=c('<div class="altgallery-overlay"></div>');F.css({position:"absolute",
top:l.height,width:l.width,height:l.height,zIndex:2});var l=f.element.css("backgroundColor"),h=[P(l,0),P(l,0.5),P(l,1)];c.browser.mozilla?F.css({background:"-moz-linear-gradient(top, "+h[0]+" 0%, "+h[1]+" 15%, "+h[2]+" 50%)"}):c.browser.webkit?F.css({background:"-webkit-linear-gradient(top, "+h[0]+" 0%, "+h[1]+" 15%, "+h[2]+" 50%)"}):c.browser.opera?F.css({background:"-o-linear-gradient(top, "+h[0]+" 0%, "+h[1]+" 15%, "+h[2]+" 50%)"}):c.browser.msie?(l=E(l).replace("#",""),F.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00"+
l+",endColorstr=#ff"+l+",GradientType=0)"})):F.css({background:"linear-gradient(top, "+h[0]+" 0%, "+h[1]+" 15%, "+h[2]+" 50%)"});k.append(g);k.append(u);k.append(F)}k.click(function(){a.drag||(a.currentItem=e,0>a.currentItem?a.currentItem=0:a.currentItem>=d.length&&(a.currentItem=d.length-1),a.animate());return!1});m&&k.hover(function(){r.css({opacity:1})},function(){r.css({opacity:s?0.8:1})});e==a.currentItem&&k.unbind("click").click(function(){if(a.drag)return!1});a.scene.append(k)})},100*A++)}(r);
b.useScrollBar&&a.showScrollbar();c.browser.mozilla&&a.showReflections&&a.animate()};X.prototype.animate=function(){function a(a,g,m){B(d[a].source,function(n){function k(a){function b(c){return h[c]+(p[c]-h[c])*a/1E4}r.css({left:b("left"),top:b("top"),zIndex:parseInt(b("zIndex")),width:b("width"),height:b("height")});u.css({width:b("width"),height:b("height")});c.showReflections&&t.css({top:b("height"),width:b("width"),height:b("height")});e&&Q(r,{rotateY:parseFloat(h.transform.rotateY)+(parseFloat(p.transform.rotateY)-
parseFloat(h.transform.rotateY))*a/1E4+"deg"})}var r=c.scene.find(".altgallery-item-"+a),u=r.find("img"),h={left:parseInt(r.css("left")),top:parseInt(r.css("top")),zIndex:parseInt(r.css("z-index")),width:r.width(),height:r.height(),opacity:r.find("img").css("opacity"),transform:Q(r)},p=c.getItemStyle(n,a);m||r.show();r.unbind("click").click(function(){c.drag||(c.currentItem=a,0>c.currentItem?c.currentItem=0:c.currentItem>=d.length&&(c.currentItem=d.length-1),c.animate());return!1});b.useHighlight&&
(r.unbind("hover").hover(function(){u.first().css({opacity:1})},function(){u.first().css({opacity:g?0.8:1})}),u.first().css({opacity:p.opacity}));var t=r.find(".altgallery-overlay");r.stop().prop("animate",0);m?k(1E4):r.animate({animate:1E4},{duration:1E3*b.flipDuration,easing:"easeOutExpo",step:function(a){k(a)},complete:function(){r.prop("animate",0);a==c.currentItem&&r.unbind("click").click(function(){if(c.drag)return!1})}})})}var c=this,b=this.settings,d=this.items,e=!M(),g,k,n,m,r;m=c.currentItem;
r=2*Math.max(m,d.length-m);for(k=1;k<=r;k++)if(g=m+(k%2?parseInt(k/2):-parseInt(k/2)),0<=g&&g<d.length){var u=Math.abs(c.currentItem-g);n=c.getItemX(g);4>u?a(g,n):(c.scene.find(".altgallery-item-"+g).hide(),a(g,n,!0))}b.useScrollBar&&c.updateScrollbar()};X.prototype.showScrollbar=function(){var a=this,b=this.settings,f=this.canvas,d=this.scaleFactor,e=c('<div class="altgallery-scrollbar"></div>'),g=Math.round(0.8*f.width())-36*d;e.css({position:"absolute",zIndex:1E3,left:(f.width()-(g+36*d))/2,bottom:5*
d,width:g+36*d,height:17*d,background:P(b.scrollbar.bgColor,b.scrollbar.bgAlpha/100)});y(e,{borderRadius:8*d});if(c.browser.msie&&9>c.browser.version){var k=sprintf("%02x%s",255*b.scrollbar.bgAlpha/100,E(b.scrollbar.bgColor).replace("#",""));e.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+k+",endColorstr=#"+k+")"})}var n=c('<div class="altgallery-scrollbar-handle"></div>'),m=g/a.items.length;n.css({position:"absolute",left:Math.round(a.currentItem*m),top:-10,width:Math.floor(m),
height:30*d});var r=c("<div/>");r.css({position:"relative",top:10,height:13*d,background:E(b.scrollbar.handleColor),opacity:b.scrollbar.handleAlpha/100,cursor:"ew-resize"});r.hover(function(){r.css({opacity:1})},function(){r.css({opacity:b.scrollbar.handleAlpha/100})});n.append(r);n.draggable({axis:"x",containment:"parent",stop:function(c,b){a.currentItem=Math.floor(b.position.left/g*a.items.length);n.css({left:Math.round(a.currentItem*m)});a.animate()}});k=c("<div/>");k.css({position:"relative",
top:2*d,height:13*d,margin:"0 "+18*d+"px"});k.click(function(b){b=b.pageX-c(this).offset().left;a.currentItem=Math.floor(b/g*a.items.length);n.css({left:Math.round(a.currentItem*m)});a.animate()});var d={position:"absolute",top:2,width:16*d,height:16*d,fontFamily:"Arial, Helvetica, sans-serif",fontSize:10*d+"px",lineHeight:14*d+"px",textAlign:"center",color:E(b.scrollbar.arrowsColor),opacity:b.scrollbar.arrowsAlpha/100,cursor:"pointer"},u=c("<div>&#9668;</div>");u.css(d);u.css({left:1});u.click(function(){a.prev()});
e.append(u);u=c("<div>&#9658;</div>");u.css(d);u.css({right:1});u.click(function(){a.next()});e.append(u);k.append(n);e.append(k);f.element.append(e)};X.prototype.updateScrollbar=function(){var a=this.canvas,c=this.scaleFactor,c=(Math.round(0.8*a.width())-36*c)/this.items.length;a.element.find(".altgallery-scrollbar-handle").css({left:Math.round(this.currentItem*c)})};X.prototype.open=function(a){this.currentItem=a.id;this.animate()};X.prototype.prev=function(a){a=this.currentItem-(a||1);0>a&&(a=
0);this.currentItem!=a&&(this.currentItem=a,this.animate())};X.prototype.next=function(a){a=this.currentItem+(a||1);a>=this.items.length&&(a=0);this.currentItem!=a&&(this.currentItem=a,this.animate())};X.prototype.slideshowStart=function(){var a=this;a.slideshowStop();a.slideshowInterval=setInterval(function(){a.next()},1E3*a.settings.slideShowDelay)};X.prototype.slideshowStop=function(){this.slideshowInterval&&clearTimeout(this.slideshowInterval)};da.prototype.scale=function(a){this.scaleFactor=
a;this.originalSize||(this.originalSize={width:this.canvas.width(),height:this.canvas.height()});this.canvas.resize(this.originalSize.width*a,this.originalSize.height*a);this.render({animate:!1})};da.prototype.render=function(a){a=c.extend({animate:!0},a);var b=this,f=this.settings,d=this.canvas,e=this.items,g=this.scaleFactor;d.empty();var k=f.thumbnail.size*g,n=c('<div class="altgallery-imageFrame"></div>'),m={position:"absolute"};if(f.thumbBar.useThumbBar)switch(f.thumbBar.position.toLowerCase()){default:case "bottom":m.left=
10*g;m.top=10*g;m.width=d.width()-20*g;m.height=d.height()-(k+30*g);break;case "top":m.left=10*g;m.bottom=10*g;m.width=d.width()-20*g;m.height=d.height()-(k+30*g);break;case "left":m.right=10*g;m.top=10*g;m.width=d.width()-(k+30*g);m.height=d.height()-20*g;break;case "right":m.left=10*g,m.top=10*g,m.width=d.width()-(k+30*g),m.height=d.height()-20*g}else m.left=10*g,m.top=10*g,m.width=d.width()-20*g,m.height=d.height()-20*g;n.css(m);d.element.append(n);if(f.thumbBar.useThumbBar){var r=b.thumbBar=c('<div class="altgallery-thumbBar"></div>'),
u,s,l,h,p,n={};switch(f.thumbBar.position.toLowerCase()){default:case "bottom":u="horizontal";s=d.width()-20*g;l=k+4*g;h=e.length*(k+5*g)-5*g;p=l;n.left=10*g;n.bottom=7*g;n.width=s;n.height=l;break;case "top":u="horizontal";s=d.width()-20*g;l=k+4*g;h=e.length*(k+5*g)-5*g;p=l;n.left=10*g;n.top=9*g;n.width=s;n.height=l;break;case "left":u="vertical";s=k+4*g;l=d.height()-20*g;h=s;p=e.length*(k+5*g)-5*g;n.left=9*g;n.top=10*g;n.width=s;n.height=l;break;case "right":u="vertical",s=k+4*g,l=d.height()-20*
g,h=s,p=e.length*(k+5*g)-5*g,n.right=10*g,n.top=10*g,n.width=s,n.height=l}n.position="absolute";n.overflow="hidden";r.css(n);var w=c("<div/>");w.css({position:"relative",width:h,height:p});y({boxShadow:g+"px "+g+"px "+2*g+"px rgba(0, 0, 0, 0.5)"});n=f.thumbnail.fontSize*g;m=0.67*k;n>m&&(n=m);var m=(k-n)/2,t={position:"absolute",width:k,height:k-m,paddingTop:m,overflow:"hidden",textAlign:"center",textDecoration:"none",fontFamily:f.thumbnail.fontName,fontSize:n,lineHeight:n+"px",color:E(f.thumbnail.fontColor),
backgroundColor:E(f.thumbnail.color),opacity:f.thumbnail.alpha/100};c.extend(t,y({borderRadius:f.thumbnail.cornerRadius*g/2}));for(var C=y({boxShadow:g+"px "+g+"px "+2*g+"px rgba(0, 0, 0, 0.5)"}),n=0;n<e.length;n++)(function(a){var d=c('<a href="'+e[a].source+'"></a>'),m="horizontal"==u?a*(k+5*g):1,n="horizontal"==u?1:a*(k+5*g);d.html(a+1);d.css(t).css({left:m,top:n});f.thumbnail.useShadow&&d.css(C);d.hover(function(){d.hasClass("altgallery-active")||(d.data("style",{color:d.css("color"),backgroundColor:d.css("backgroundColor"),
opacity:d.css("opacity")}),d.css({color:E(f.thumbnail.fontColorOnRollOver),backgroundColor:E(f.thumbnail.colorOnRollOver),opacity:1}))},function(){d.hasClass("altgallery-active")||d.css(d.data("style"))});d.click(function(){if(!b.drag){var f=b.currentItem;b.currentItem=a;c(this).hasClass("altgallery-active")||b.open(e[a],{direction:a>=f?"next":"prev"})}return!1});b.onOpenItem[a]=function(){var c=r.find("a").eq(a);c.parent().find("a").removeClass("altgallery-active").css(t);c.addClass("altgallery-active").data("style",
{color:E(f.thumbnail.fontColorOnClick),backgroundColor:E(f.thumbnail.colorOnClick),opacity:1}).css(c.data("style"));var b;if("horizontal"==u&&s<h){var d=0-(a*(k+5*g)-s/2+k/2),c=0-h+s;0<d&&(d=0);d<c&&(d=c);w.animate({left:d});w.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){w.animate({left:d},1E3)},1E3)})}else l<p&&(d=0-(a*(k+5*g)-l/2+k/2),c=0-p+l,0<d&&(d=0),d<c&&(d=c),w.animate({top:d}),w.unbind("mouseleave").mouseleave(function(){b=setTimeout(function(){w.animate({top:d},1E3)},
1E3)}));w.unbind("mouseenter").mouseenter(function(){clearTimeout(b)})};w.append(d)})(n);r.append(w);var v=function(){clearInterval(z);B=!1},z,B=!1;"horizontal"==u&&s<h?(r.mousemove(function(a){if(!b.drag){var e=d.scale()||1;a=(a.pageX-c(this).offset().left)/e;a<30*e?B||(B=!0,w.stop(),z=setInterval(function(){var a=parseInt(w.css("left"))+parseInt(f.thumbBar.scrollSpeed);0<a?(w.css("left",0),v()):w.css("left",a)},25)):a>s-30*e?B||(B=!0,w.stop(),z=setInterval(function(){var a=parseInt(w.css("left"))-
parseInt(f.thumbBar.scrollSpeed),c=0-h+s;a<c?(w.css("left",c),v()):w.css("left",a)},25)):v()}}),w.draggable({axis:"x",start:function(){b.drag=!0},stop:function(a,c){var d=c.position.left,f=0-h+s;0<d?w.animate({left:0},"fast"):d<f&&w.animate({left:f},"fast");setTimeout(function(){b.drag=!1},100)}})):l<p&&(r.mousemove(function(a){if(!b.drag){var e=d.scale()||1;a=(a.pageY-c(this).offset().top)/e;a<30*e?B||(B=!0,w.stop(),z=setInterval(function(){var a=parseInt(w.css("top"))+parseInt(f.thumbBar.scrollSpeed);
0<a?(w.css("top",0),v()):w.css("top",a)},25)):a>l-30*e?B||(B=!0,w.stop(),z=setInterval(function(){var a=parseInt(w.css("top"))-parseInt(f.thumbBar.scrollSpeed),c=0-p+l;a<c?(w.css("top",c),v()):w.css("top",a)},25)):v()}}),w.draggable({axis:"y",start:function(){b.drag=!0},stop:function(a,c){var d=c.position.top,f=0-p+l;0<d?w.animate({top:0},"fast"):d<f&&w.animate({top:f},"fast");setTimeout(function(){b.drag=!1},100)}}));r.mouseleave(function(){v()});d.element.append(r)}b.open(b.getCurrentItem(),{transitionEffect:a.animate?
f.image.transitionEffect.toLowerCase():"none"})};da.prototype.open=function(a,b){b=b||{};if(b.direction)var d=b.direction;var e=this,h=this.settings,g=this.scaleFactor,k=this.canvas.element.find(".altgallery-imageFrame"),n=this.preloader.get();n.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"}).hide();k.append(n);var m=setTimeout(function(){n.show();e.preloader.start()},500);B(a.source,function(r){if(a.id===e.currentItem){clearTimeout(m);e.preloader.stop();n.remove();
var u=h.image.scaleMode.toLowerCase(),s="fill"==u?I.fill(r.width,r.height,k.width(),k.height()):I.fit(r.width,r.height,k.width(),k.height()),l;a.link?(l=c("<a></a>"),l.attr("href",a.link),a.target&&l.attr("target",a.target)):l=c("<div/>");l.click(function(){if(e.drag)return!1});l.addClass("altgallery-image");l.css({display:"block",position:"absolute",left:"fill"==u?0:s.left,top:"fill"==u?0:s.top,width:"fill"==u?k.width():s.width,height:"fill"==u?k.height():s.height,overflow:"hidden",textDecoration:"none"});
y(l,{borderRadius:h.image.cornerRadius*g/2});h.image.useShadow&&y(l,{boxShadow:g+"px "+g+"px "+2*g+"px rgba(0, 0, 0, 0.5)"});var p=c('<img src="'+r.src+'"/>');K(p);p.css({position:"absolute",left:"fill"==u?s.left:0,top:"fill"==u?s.top:0,width:s.width,height:s.height});l.append(p);var A=c("<div/>");a.description&&"never"!=h.caption.visibleMode.toLowerCase()&&(A.html(a.description.replace("\n","<br/>")),A.css({position:"absolute",left:0,width:s.width-20*g,padding:9*g+"px "+10*g+"px",fontFamily:h.caption.fontName,
fontSize:h.caption.fontSize*g,lineHeight:1.25,color:E(h.caption.color),background:P(h.caption.bgColor,h.caption.bgAlpha/100)}),"top"==h.caption.position.toLowerCase()?(A.css({top:0,borderBottom:"1px solid",borderBottomColor:P(h.caption.bgColor,h.caption.bgAlpha/100)}),"onrollover"==h.caption.visibleMode.toLowerCase()&&(z()||A.css({top:-(A.height()+18)}).hide(),l.hover(function(){A.show().stop().animate({top:0},e.options.animation.duration)},function(){A.stop().animate({top:-(A.height()+18)},e.options.animation.duration,
function(){A.hide()})}))):(A.css({bottom:0,borderTop:"1px solid",borderTopColor:P(h.caption.bgColor,h.caption.bgAlpha/100)}),"onrollover"==h.caption.visibleMode.toLowerCase()&&(z()||A.css({bottom:-(A.height()+18)}).hide(),l.hover(function(){A.show().stop().animate({bottom:0},e.options.animation.duration)},function(){A.stop().animate({bottom:-(A.height()+18)},e.options.animation.duration,function(){A.hide()})}))),l.append(A));u=h.thumbBar.position.toLowerCase();u=!("left"==u||"right"==u);switch(b.transitionEffect||
h.image.transitionEffect.toLowerCase()){default:case "fade":k.animate({opacity:0},{duration:500*h.image.transitionDuration,easing:"linear",complete:function(){k.empty();k.append(l);k.animate({opacity:1},{duration:500*h.image.transitionDuration,easing:"swing",complete:function(){e.onOpen(r)}})}});break;case "slide":k.find(".altgallery-image").not(":last").remove();var w=k.find(".altgallery-image"),s="prev"==d?1:-1,t="easeOutCubic",v=1E3*h.image.transitionDuration;if(u){p=k.outerWidth(!1)+10;w.size()&&
w.stop().animate({left:w.position().left+p*s},v,t,function(){w.remove()});k.append(l);var B=l.position().left;l.css({left:B+p*-s}).animate({left:B},v,t,function(){e.onOpen(r)})}else p=k.outerHeight(!1)+10,w.size()&&w.stop().animate({top:w.position().top+p*s},v,t,function(){w.remove()}),k.append(l),B=l.position().top,l.css({top:B+p*-s}).animate({top:B},v,t,function(){e.onOpen(r)});break;case "xfade":case "crossfade":k.css({opacity:1});k.find(".altgallery-image").not(":last").remove();w=k.find(".altgallery-image");
s=1E3*h.image.transitionDuration;w.size()?(w.animate({opacity:0},{duration:s,easing:"linear",complete:function(){c(this).remove();e.onOpen(r)}}),k.append(l),l.css({opacity:0}).animate({opacity:1},{duration:s,easing:"linear"})):(k.append(l),l.css({opacity:0}).animate({opacity:1},{duration:s,easing:"linear",complete:function(){e.onOpen(r)}}));break;case "none":k.html(l),e.onOpen(r)}var D,v=e.options.animation.duration,t="easeOutQuad",H={transitionEffect:"slide"};u?l.draggable({axis:"x",start:function(){D=
l.position().left;A.hide()},stop:function(a,c){c.position.left>D+30*g?(l.animate({left:k.outerWidth(!1)+15*g},v,t),e.prev(H)):c.position.left<D-30*g?(l.animate({left:-(k.outerWidth(!1)+15*g)},v,t),e.next(H)):(l.animate({left:D},"fast"),A.show())}}):l.draggable({axis:"y",start:function(){D=l.position().top;A.hide()},stop:function(a,c){c.position.top>D+30*g?(l.animate({top:k.outerHeight(!1)+15*g},v,t),e.prev(H)):c.position.top<D-30*g?(l.animate({top:-(k.outerHeight(!1)+15*g)},v,t),e.next(H)):(l.animate({top:D},
"fast"),A.show())}})}});e.onOpenItem[parseInt(a.id)]()};da.prototype.prev=function(a){a=a||{};a.direction="prev";0<this.currentItem?this.currentItem--:this.currentItem=this.items.length-1;this.open(this.getCurrentItem(),a)};da.prototype.next=function(a){a=a||{};a.direction="next";this.currentItem<this.items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem(),a)};da.prototype.slideshowStart=function(){var a=this;a.slideshow=!0;a.onOpen=function(){a.slideshowTimer&&clearInterval(a.slideshowTimer);
a.slideshowTimer=setTimeout(function(){a.next()},1E3*a.settings.slideshow.delay)};if(a.settings.slideshow.stopAutoOnClick){var c=function(){a.slideshowStop();a.canvas.element.unbind("click",c).find("a").unbind("click",c)};a.canvas.element.bind("click",c).find("a").bind("click",c)}};da.prototype.slideshowStop=function(){this.onOpen=function(){};this.slideshow=!1;clearInterval(this.slideshowTimer)};ba.prototype.scale=function(a){this.scaleFactor=a;this.originalSize||(this.originalSize={width:this.canvas.width(),
height:this.canvas.height()});this.canvas.resize(this.originalSize.width*a,this.originalSize.height*a);this.canvas.empty();this.init()};ba.prototype.init=function(){var a=this,b=this.settings,f=this.canvas,e=this.scaleFactor;b.overflow&&"hidden"!=b.overflow&&f.element.css({overflow:"visible"});a.imageWidth=b.image.width*e||Math.round(0.75*f.width());a.imageHeight=b.image.height*e||Math.round(0.67*f.height());a.stack=[];for(var h=0;h<b.visibleImages;h++){var g=c("<div/>");g.css({position:"absolute",
left:Math.floor((f.width()-a.imageWidth-20*e)/2),top:Math.floor((f.height()-a.imageHeight-57*e)/2),width:a.imageWidth+20*e,height:a.imageHeight+57*e,background:E(b.frameColor),zIndex:b.visibleImages-h});b.useShadow&&y(g,{boxShadow:"0 0 10px rgba(0,0,0,0.7)"});h&&Q(g,{rotate:(d(10*-b.maxAngle,10*b.maxAngle)/10).toString()+"deg"});var k=c('<div class="altgallery-imgFrame"/>');k.css({position:"absolute",left:10*e,top:10*e,width:a.imageWidth,height:a.imageHeight,overflow:"hidden",background:"#999",cursor:"pointer"});
k.click(function(){a.next()});g.append(k);k=c('<div class="altgallery-caption"/>');k.css({position:"absolute",left:10*e,top:a.imageHeight+12*e,width:a.imageWidth,height:42*e,overflow:"hidden",textAlign:"center",fontFamily:b.caption.fontName,fontSize:11*e+"px",lineHeight:14*e+"px",color:E(b.caption.color)});g.append(k);a.stack.push(g);f.append(a.stack[h])}a.open(a.getCurrentItem())};ba.prototype.preload=function(a,b){var d=this,e=this.settings;B(a.source,function(a){var g=b.find(".altgallery-imgFrame"),
k=c("<img/>");K(k);k.attr({src:a.src});k.css({position:"absolute"});var n="fit"==e.imageScaleMode.toLowerCase()?I.fit:I.fill;k.css(n(a.width,a.height,d.imageWidth,d.imageHeight));g.empty().append(k)})};ba.prototype.open=function(a){var b=this,d=this.settings,e=this.scaleFactor,h=this.stack[0];b.currentItem=a.id;var g=h.find(".altgallery-caption");g.empty();var k=c("<div/>");k.css({display:"inline-block"});d.usePhotoNumbers&&k.append(a.id+1+"/"+b.items.length+" ");k.append(a.description);g.append(k);
var n=k.height(),g=Math.floor((g.height()-n)/2);14<n&&k.css({textAlign:"left"});k.css({marginTop:0<g?g:0});var m=parseFloat(Q(h).rotate);0!=m&&h.animate({animate:100},{duration:200,easing:"linear",step:function(a){Q(h,{rotate:(m-m*a/100).toString()+"deg"})},complete:function(){h.prop({animate:0})}});var r=h.find(".altgallery-imgFrame");r.empty();var u=(new ea(b.options.images.loader)).get();u.css({position:"absolute",left:"50%",top:"50%",margin:"-16px 0 0 -16px"});r.append(u);u.start();B(a.source,
function(g){u.stop();u.remove();var m=c("<img/>");K(m);m.attr({src:g.src});m.css({position:"absolute"});var n="fit"==d.imageScaleMode.toLowerCase()?I.fit:I.fill;m.css(n(g.width,g.height,b.imageWidth,b.imageHeight));r.append(m);g={position:"absolute",padding:3*e+"px "+5*e+"px",fontFamily:"Arial, Helvetica, sans-serif",fontSize:10*e+"px",color:"#fff",background:P("#000000",0.7),cursor:"pointer"};var k=c('<div class="altgallery-back"/>');k.css(g).css({left:15*e,top:15*e});y(k,{borderRadius:5*e+"px"});
k.html(d.translation.back);k.click(function(){b.prev()});h.append(k);h.hover(function(){k.stop().fadeIn("fast")},function(){k.stop().fadeOut("fast")});if(a.link){var p=c('<div class="altgallery-link"/>');p.css(g).css({right:15*e,top:15*e});y(p,{borderRadius:5*e+"px"});p.html(d.translation.gotoLink);p.click(function(){O(a)});h.append(p);h.hover(function(){p.stop().fadeIn("fast")},function(){p.stop().fadeOut("fast")})}for(g=1;g<d.visibleImages-1;g++)(function(a){setTimeout(function(){b.preload(b.getNextItem(a),
b.stack[a])},500*(a-1))})(g)})};ba.prototype.prev=function(){var a=this,b=this.settings,f=this.stack[0],e=f.position();f.find(".altgallery-back, .altgallery-link").remove();var h=d(10*-b.maxAngle,10*b.maxAngle)/10;f.animate({animate:100},{duration:200,easing:"linear",step:function(a){Q(c(this),{rotate:(h*a/100).toString()+"deg"})},complete:function(){c(this).prop({animate:0})}});f=this.stack[this.stack.length-1];a.stack.pop();a.stack.unshift(f);var g=d(a.imageWidth,1.5*a.imageWidth),k=d(a.imageHeight/
2,a.imageHeight),n=d(10,60);f.animate({animate:1E3},{duration:0.8*a.options.animation.duration,easing:"easeOutQuart",step:function(a){f.css({left:e.left+g*a/1E3,top:e.top-k*a/1E3});Q(f,{rotate:(n*a/1E3).toString()+"deg"})},complete:function(){for(var c=0;c<a.stack.length;c++)a.stack[c].css({zIndex:a.stack.length-c});f.animate({animate:0},{duration:0.8*a.options.animation.duration,easing:"easeOutQuart",step:function(a){f.css({left:e.left+g*a/1E3,top:e.top-k*a/1E3});Q(f,{rotate:(0+n*a/1E3).toString()+
"deg"})}})}});a.currentItem--;0>a.currentItem&&(a.currentItem=a.items.length-1);a.open(a.getCurrentItem())};ba.prototype.next=function(){var a=this,c=this.settings,b=this.stack[0],e=b.position();b.find(".altgallery-back, .altgallery-link").remove();a.stack.shift();a.stack.push(b);var h=d(a.imageWidth,1.5*a.imageWidth),g=d(a.imageHeight/2,a.imageHeight),k=d(10,60),n=d(10*-c.maxAngle,10*c.maxAngle)/10;b.animate({animate:1E3},{duration:0.8*a.options.animation.duration,easing:"easeOutQuart",step:function(a){b.css({left:e.left+
h*a/1E3,top:e.top-g*a/1E3});Q(b,{rotate:(k*a/1E3).toString()+"deg"})},complete:function(){for(var c=0;c<a.stack.length;c++)a.stack[c].css({zIndex:a.stack.length-c});b.animate({animate:0},{duration:0.8*a.options.animation.duration,easing:"easeOutQuart",step:function(a){b.css({left:e.left+h*a/1E3,top:e.top-g*a/1E3});Q(b,{rotate:(n+k*a/1E3).toString()+"deg"})}})}});a.currentItem++;a.currentItem>=a.items.length&&(a.currentItem=0);a.open(a.getCurrentItem())};ba.prototype.slideshowStart=function(){var a=
this,c=a.settings;if(!a.slideshow){var b=function(){a.slideshowTimeoutId=setTimeout(function(){a.next(b)},1E3*c.slideshow.delay+2E3)};a.slideshow=!0;setTimeout(function(){a.next(b)},1E3*c.slideshow.delay)}};ba.prototype.slideshowStop=function(){this.slideshow&&(this.slideshow=!1,clearTimeout(this.slideshowTimeoutId))};T.prototype.scale=function(a){this.scaleFactor=a;this.originalSettings||(this.originalSettings=c.extend(!0,{},this.settings));this.settings=c.extend(!0,{},this.originalSettings);this.settings.frameSize*=
a;this.settings.cornerRadius*=a;this.settings.iconWidth*=a;this.settings.iconHeight*=a;this.settings.iconPadding*=a;this.settings.fontSize*=a;this.originalSize||(this.originalSize={width:this.canvas.width(),height:this.canvas.height()});this.canvas.resize(this.originalSize.width*a,this.originalSize.height*a);this.render()};T.prototype.render=function(){var a=this,b=this.settings,d=this.canvas,e=this.scaleFactor;d.empty();d.element.css({fontFamily:b.fontName,fontSize:parseInt(b.fontSize)+"px",lineHeight:1.2*
parseInt(b.fontSize)+"px"});var h=c('<div class="altgallery-imageFrame"></div>');h.css({width:d.width()-2*b.frameSize,height:d.height()-2*b.frameSize,padding:b.frameSize,background:E(b.frameColor),borderRadius:b.cornerRadius/2});var g=c('<div class="altgallery-image"></div>');g.css({position:"relative",width:d.width()-2*b.frameSize,height:d.height()-2*b.frameSize,overflow:"hidden",background:E(b.backgroundColor),borderRadius:b.cornerRadius/2-b.frameSize/4,cursor:"pointer"});b=c("<img/>");K(b);b.css({position:"absolute"});
h.click(function(){a.drag||a.next();return!1});var k;h.draggable({axis:"x",start:function(c,b){if("show thumbnails"==a.currentState||"show albums"==a.currentState)return!1;a.drag=!0;k=b.position.left;a.hideCaption();a.hideButtons();a.hideNavigation()},stop:function(c,b){b.position.left>k+30*e?h.animate({left:d.width()},function(){h.css({left:0});a.prev({transition:"none"})}):b.position.left<k-30*e?h.animate({left:-d.width()},function(){h.css({left:0});a.next({transition:"none"})}):h.animate({left:0},
function(){a.showButtons();a.showCaption();a.showNavigation()});setTimeout(function(){a.drag=!1},100)}});g.append(b);h.append(g);d.element.append(h);a.open(a.getCurrentItem(),{preserveState:!0});switch(a.currentState){default:case "show albums":this.showAlbums();break;case "show thumbnails":this.showThumbnails();case "load image":case "start slideshow":}};T.prototype.showAlbums=function(){var a=this,b=this.canvas,d=this.settings,e=this.scaleFactor;a.currentState="show albums";if(!b.element.find(".altgallery-albums").size()){var h=
function(){var b=s*r+1,c=s*r+r;c>a.albums.length&&(c=a.albums.length);p.html(b+"-"+c+" "+d.translation.Of+" "+a.albums.length);0>=s?(w.css({opacity:0.3,cursor:"default"}),w.unbind("click").click(function(){return!1})):(w.css({opacity:1,cursor:"pointer"}),w.unbind("click").click(v));s>=u-1?(y.css({opacity:0.3,cursor:"default"}),y.unbind("click").click(function(){return!1})):(y.css({opacity:1,cursor:"pointer"}),y.unbind("click").click(z))};a.hideThumbnails();a.hideButtons();a.hideCaption();a.hideNavigation();
var g=c('<div class="altgallery-albums"></div>'),k=b.width()-2*d.frameSize,n=d.iconHeight+115*e;g.css({position:"absolute",left:d.frameSize,top:(b.height()-n)/2,width:b.width()-2*d.frameSize,height:n,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var m=c('<div class="altgallery-albums-overlay"></div>');m.css({position:"absolute",left:d.frameSize,top:(b.height()-n)/2,width:b.width()-2*d.frameSize,height:n+1,background:"#000",opacity:d.panelBackgroundAlpha/100,
zIndex:1});b.element.append(m);n=c("<div/>");n.css({position:"absolute",top:0,right:0,padding:10*e});m=c('<a class="altgallery-close">'+d.translation.Close+"</a>");m.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:D(a.options.images.folder+"zen-close.png"),backgroundSize:Math.round(7*e)+"px "+Math.round(9*e)+"px",paddingLeft:12*e,cursor:"pointer"});m.click(function(){a.hideAlbums();a.showButtons();
a.showCaption();a.showNavigation();return!1});n.append(m);g.append(n);var r=Math.floor((k-20)/(d.iconWidth+d.iconPadding)),r=r>a.albums.length?a.albums.length:r,n=(d.iconWidth+d.iconPadding)*r-d.iconPadding,m=(d.iconWidth+d.iconPadding)*a.albums.length-d.iconPadding,u=Math.ceil(a.albums.length/r),s=0,l=c("<div>"+d.translation.Albums+"</div>");l.css({position:"absolute",left:9*e,top:0,padding:10*e,paddingLeft:23*e,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",
backgroundImage:D(a.options.images.folder+"zen-albums.png"),backgroundSize:Math.round(16*e)+"px "+Math.round(16*e)+"px"});g.append(l);var p=c("<span></span>");p.css({marginLeft:"1em",fontWeight:"normal"});l.append(p);l=c("<div/>");l.css({position:"absolute",left:(k-n)/2-4,top:42*e,width:n+4,height:d.iconHeight+70*e,overflow:"hidden"});var t=c("<div/>");t.css({position:"relative",left:0,width:m});l.append(t);k=c("<div/>");k.css({position:"absolute",right:4*e,bottom:3*e,height:20*e,opacity:0.9});var w=
c("<a/>");w.css({display:"block",cssFloat:"left",width:16*e,height:16*e,marginRight:3*e,background:"no-repeat center",backgroundImage:D(a.options.images.folder+"zen-prev.png"),backgroundSize:Math.round(11*e)+"px "+Math.round(10*e)+"px"});var v=function(){0<s&&s--;var b=(d.iconWidth+d.iconPadding)*r*s;t.stop().animate({left:-b},2*a.options.animation.duration,"easeOutQuart");h();return!1};w.click(v);k.append(w);g.append(l);var y=c("<a/>");y.css({display:"block",cssFloat:"left",width:16*e,height:16*
e,marginRight:3*e,background:"no-repeat center",backgroundImage:D(a.options.images.folder+"zen-next.png"),backgroundSize:Math.round(11*e)+"px "+Math.round(10*e)+"px"});var z=function(){s<u-1&&s++;var b=(d.iconWidth+d.iconPadding)*r*s;t.stop().animate({left:-b},2*a.options.animation.duration,"easeOutQuart");h();return!1};y.click(z);k.append(y);g.append(k);h();for(var E,k=0;k<a.albums.length;k++)(function(b,e){var g=c("<div/>");g.css({position:"absolute",left:(d.iconWidth+d.iconPadding)*e,top:0,width:d.iconWidth+
d.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var q=c('<div class="altgallery-thumbnail"></div>');q.css({position:"relative",width:d.iconWidth-2,height:d.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:a.currentAlbum==e?"#000":"#fff",margin:"2px",cursor:"pointer"});B(b.items[0].thumb,function(a){var b=c("<img/>");b.attr("src",a.src);K(b);b.css({position:"absolute"});b.css(I.fill(a.width,a.height,d.iconWidth-2,d.iconHeight-2));q.append(b)},50*e);g.append(q);
g.append('<div style="padding:7px 2px 2px; font-weight:bold;">'+(b.description||"Album "+(e+1))+"<div>");g.append('<div style="padding:1px 2px;">'+b.items.length+" "+(1==b.items.length?d.translation.Image:d.translation.Images)+"<div>");g.hover(function(){t.find(".altgallery-thumbnail").css({borderWidth:"1px",margin:"2px"});q.css({borderWidth:"3px",margin:"0px"})},function(){q.css({borderWidth:"1px",margin:"2px"})}).click(function(){E||(a.currentAlbum!=e&&(a.currentItem=0),a.currentAlbum=e,a.showThumbnails());
return!1});t.append(g)})(a.albums[k],k);b.element.append(g);1<u&&t.draggable({axis:"x",start:function(){E=!0},stop:function(a,b){b.position.left>b.originalPosition.left+30*e?v():b.position.left<b.originalPosition.left-30*e?z():t.animate({left:b.originalPosition.left},"fast");setTimeout(function(){E=!1},100)}})}};T.prototype.hideAlbums=function(){this.canvas.element.find(".altgallery-albums, .altgallery-albums-overlay").remove()};T.prototype.showThumbnails=function(){var a=this,b=this.canvas,d=this.settings,
e=this.getCurrentAlbum(),h=this.scaleFactor;a.currentState="show thumbnails";if(!b.element.find(".altgallery-images").size()){var g=function(){var a=l*u+1,b=l*u+u;b>e.items.length&&(b=e.items.length);t.html(a+"-"+b+" "+d.translation.Of+" "+e.items.length);0>=l?(v.css({opacity:0.3,cursor:"default"}),v.unbind("click").click(function(){return!1})):(v.css({opacity:1,cursor:"pointer"}),v.unbind("click").click(y));l>=s-1?(z.css({opacity:0.3,cursor:"default"}),z.unbind("click").click(function(){return!1})):
(z.css({opacity:1,cursor:"pointer"}),z.unbind("click").click(E))};a.hideAlbums();a.hideButtons();a.hideCaption();a.hideNavigation();var k=c('<div class="altgallery-images"></div>'),n=b.width()-2*d.frameSize,m=d.iconHeight+75*h;k.css({position:"absolute",left:d.frameSize,top:(b.height()-m)/2,width:b.width()-2*d.frameSize,height:m,overflow:"hidden",color:"#fff",border:"1px #000",borderStyle:"solid none",zIndex:2});var r=c('<div class="altgallery-images-overlay"></div>');r.css({position:"absolute",left:d.frameSize,
top:(b.height()-m)/2,width:b.width()-2*d.frameSize,height:m+1,background:"#000",opacity:d.panelBackgroundAlpha/100,zIndex:1});b.element.append(r);m=c("<div/>");m.css({position:"absolute",top:0,right:0,padding:10*h});1<a.albums.length&&(r=c('<a class="altgallery-back">'+d.translation.BackToAlbums+"</a>"),r.css({marginRight:"1.5em",color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:D(a.options.images.folder+
"zen-backToAlbums.png"),backgroundSize:Math.round(9*h)+"px "+Math.round(9*h)+"px",paddingLeft:14*h,cursor:"pointer"}),r.click(function(){a.showAlbums();return!1}),m.append(r));r=c('<a class="altgallery-close">'+d.translation.Close+"</a>");r.css({marginRight:0,color:"#fff",fontWeight:"bold",textDecoration:"none",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",background:"no-repeat left center",backgroundImage:D(a.options.images.folder+"zen-close.png"),backgroundSize:Math.round(7*h)+"px "+Math.round(9*h)+"px",
paddingLeft:12*h,cursor:"pointer"});r.click(function(){a.hideThumbnails();a.showButtons();a.showCaption();a.showNavigation();return!1});m.append(r);k.append(m);var u=Math.floor((n-20)/(d.iconWidth+d.iconPadding)),u=u>e.items.length?e.items.length:u,m=(d.iconWidth+d.iconPadding)*u-d.iconPadding,r=(d.iconWidth+d.iconPadding)*e.items.length-d.iconPadding,s=Math.ceil(e.items.length/u),l=0,p=c("<div>"+d.translation.Images+"</div>");p.css({position:"absolute",left:9*h,top:0,padding:10*h,paddingLeft:23*
h,textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.5)",fontWeight:"bold",background:"no-repeat left center",backgroundImage:D(a.options.images.folder+"zen-thumbnails.png"),backgroundSize:Math.round(16*h)+"px "+Math.round(16*h)+"px"});k.append(p);var t=c("<span></span>");t.css({marginLeft:"1em",fontWeight:"normal"});p.append(t);p=c("<div/>");p.css({position:"absolute",left:(n-m)/2-4,top:42*h,width:m+4,height:d.iconHeight+4,overflow:"hidden"});var w=c("<div/>");w.css({position:"relative",left:0,width:r});p.append(w);
k.append(p);n=c("<div/>");n.css({position:"absolute",right:4*h,bottom:3*h,height:20*h,opacity:0.9});var v=c("<a/>");v.css({display:"block",cssFloat:"left",width:16*h,height:16*h,marginRight:3*h,background:"no-repeat center",backgroundImage:D(a.options.images.folder+"zen-prev.png"),backgroundSize:Math.round(11*h)+"px "+Math.round(10*h)+"px"});var y=function(){0<l&&l--;var b=(d.iconWidth+d.iconPadding)*u*l;w.stop().animate({left:-b},2*a.options.animation.duration,"easeOutQuart");g();return!1};v.click(y);
n.append(v);var z=c("<a/>");z.css({display:"block",cssFloat:"left",width:16*h,height:16*h,marginRight:3*h,background:"no-repeat center",backgroundImage:D(a.options.images.folder+"zen-next.png"),backgroundSize:Math.round(11*h)+"px "+Math.round(10*h)+"px"});var E=function(){l<s-1&&l++;var b=(d.iconWidth+d.iconPadding)*u*l;w.stop().animate({left:-b},2*a.options.animation.duration,"easeOutQuart");g();return!1};z.click(E);n.append(z);k.append(n);g();for(var H=!1,n=0;n<e.items.length;n++)(function(b,e){var g=
c("<div/>");g.css({position:"absolute",left:(d.iconWidth+d.iconPadding)*e,top:0,width:d.iconWidth+d.iconPadding+6,overflow:"hidden",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)"});var h=c('<div class="altgallery-thumbnail"></div>');h.css({position:"relative",width:d.iconWidth-2,height:d.iconHeight-2,overflow:"hidden",border:"1px solid",borderColor:a.currentItem==e?"#000":"#fff",margin:"2px",cursor:"pointer"});B(b.thumb,function(a){var b=c("<img/>");b.attr("src",a.src);K(b);b.css({position:"absolute"});
b.css(I.fill(a.width,a.height,d.iconWidth-2,d.iconHeight-2));h.append(b)},50*e);g.append(h);g.hover(function(){w.find(".altgallery-thumbnail").css({borderWidth:"1px",margin:"2px"});h.css({borderWidth:"3px",margin:"0px"})},function(){h.css({borderWidth:"1px",margin:"2px"})}).click(function(){H||(a.currentItem=e,a.open(a.getCurrentItem()));return!1});w.append(g)})(e.items[n],n);b.element.append(k);1<s&&w.draggable({axis:"x",start:function(){H=!0},stop:function(a,b){b.position.left>b.originalPosition.left+
30*h?y():b.position.left<b.originalPosition.left-30*h?E():w.animate({left:b.originalPosition.left},"fast");setTimeout(function(){H=!1},100)}})}};T.prototype.hideThumbnails=function(){this.canvas.element.find(".altgallery-images, .altgallery-images-overlay").remove()};T.prototype.showButtons=function(){var a=this,b=this.scaleFactor,d=z()?2:1;if("never"!=a.settings.showButtons.toLowerCase()&&(a.settings.showAlbumsButton||a.settings.showThumbnailsButton)&&!a.canvas.element.find(".altgallery-buttons").size()){var e=
c('<div class="altgallery-buttons"></div>');e.css({position:"absolute",right:a.settings.frameSize,top:25*b+a.settings.frameSize,padding:Math.round(3*b*d),paddingLeft:Math.round(1*b*d),paddingRight:Math.round(2*b*d),background:"rgba(0, 0, 0, "+a.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none"});y(e,{borderTopLeftRadius:3*b*d+"px",borderBottomLeftRadius:3*b*d+"px"});if(c.browser.msie&&9>c.browser.version){var h=Math.round(255*parseInt(a.settings.buttonsBackgroundAlpha)/
100),h=16>h?"0"+h.toString(16):h.toString(16);e.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+h+"000000,endColorstr=#"+h+"000000)"})}a.settings.showAlbumsButton&&1<a.albums.length&&(h=c("<a/>"),h.css({display:"block",cssFloat:"left",margin:"0 "+Math.round(2*b*d)+"px",width:16*b*d,height:16*b*d,background:"no-repeat center",backgroundImage:D(a.options.images.folder+"zen-albums.png"),backgroundSize:Math.floor(16*b*d)+"px "+Math.floor(16*b*d)+"px",opacity:0.8,
cursor:"pointer"}),h.click(function(){a.showAlbums();return!1}),e.append(h));a.settings.showThumbnailsButton&&(h=c("<a/>"),h.css({display:"block",cssFloat:"left",margin:"0 "+Math.round(2*b*d)+"px",width:16*b*d,height:16*b*d,background:"no-repeat center",backgroundImage:D(a.options.images.folder+"zen-thumbnails.png"),backgroundSize:Math.floor(16*b*d)+"px "+Math.floor(16*b*d)+"px",opacity:0.8,cursor:"pointer"}),h.click(function(){a.showThumbnails();return!1}),e.append(h));a.canvas.element.append(e)}};
T.prototype.hideButtons=function(){this.canvas.element.find(".altgallery-buttons").remove()};T.prototype.showCaption=function(){var a=this.scaleFactor,b=z()?2:1;this.hideCaption();if("never"!=this.settings.showCaption.toLowerCase()&&(this.getCurrentAlbum()&&this.getCurrentAlbum().description||this.getCurrentItem()&&this.getCurrentItem().description)){var d=c('<div class="altgallery-caption"></div>');d.css({position:"absolute",left:this.settings.frameSize,top:25*a+this.settings.frameSize,maxWidth:this.canvas.width()-
100,paddingTop:4*a*b,paddingRight:10*a*b,paddingBottom:5*a*b,paddingLeft:7*a*b,fontSize:parseInt(this.settings.fontSize)*b+"px",lineHeight:1.2*parseInt(this.settings.fontSize)*b+"px",color:"#fff",textShadow:"-1px 1px 0 rgba(0, 0, 0, 0.3)",background:"rgba(0, 0, 0, "+this.settings.captionBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderLeft:"none"});y(d,{borderTopRightRadius:Math.round(3*a*b)+"px",borderBottomRightRadius:Math.round(3*a*b)+"px"});c.browser.msie&&9>c.browser.version&&
(a=Math.round(255*parseInt(this.settings.captionBackgroundAlpha)/100),a=16>a?"0"+a.toString(16):a.toString(16),d.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+a+"000000,endColorstr=#"+a+"000000)"}));this.getCurrentAlbum().description&&d.append('<div style="font-weight:bold;">'+this.getCurrentAlbum().description.replace("\n","<br/>")+"</div>");this.getCurrentItem().description&&d.append('<div style="">'+this.getCurrentItem().description.replace("\n","<br/>")+
"</div>");this.canvas.element.append(d)}};T.prototype.hideCaption=function(){this.canvas.element.find(".altgallery-caption").remove()};T.prototype.showNavigation=function(){var a=this,b=this.scaleFactor,d=z()?2:1;if("never"!=a.settings.showButtons.toLowerCase()&&a.settings.showNavigationButton&&!a.canvas.element.find(".altgallery-navigation").size()){var e=c('<div class="altgallery-navigation"></div>');e.css({position:"absolute",right:a.settings.frameSize,bottom:25*b+a.settings.frameSize,padding:Math.round(3*
b*d),paddingLeft:Math.round(1*b*d),paddingRight:Math.round(2*b*d),background:"rgba(0, 0, 0, "+a.settings.buttonsBackgroundAlpha/100+")",border:"1px solid rgba(0, 0, 0, 0.8)",borderRight:"none"});y(e,{borderTopLeftRadius:Math.round(3*b*d)+"px",borderBottomLeftRadius:Math.round(3*b*d)+"px"});if(c.browser.msie&&9>c.browser.version){var h=Math.round(255*parseInt(a.settings.buttonsBackgroundAlpha)/100),h=16>h?"0"+h.toString(16):h.toString(16);e.css({borderColor:"#000",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+
h+"000000,endColorstr=#"+h+"000000)"})}a.settings.showNavigationButton&&(h=c("<a/>"),h.css({display:"block",cssFloat:"left",margin:"0 "+Math.round(2*b*d)+"px",width:16*b*d,height:16*b*d,background:"no-repeat center",backgroundImage:D(a.options.images.folder+"zen-prev.png"),backgroundSize:Math.floor(11*b*d)+"px "+Math.floor(10*b*d)+"px",opacity:0.8,cursor:"pointer"}),h.click(function(){a.prev();return!1}),e.append(h),h=c("<a/>"),h.css({display:"block",cssFloat:"left",margin:"0 "+Math.round(2*b*d)+
"px",width:16*b*d,height:16*b*d,background:"no-repeat center",backgroundImage:D(a.options.images.folder+"zen-next.png"),backgroundSize:Math.floor(11*b*d)+"px "+Math.floor(10*b*d)+"px",opacity:0.8,cursor:"pointer"}),h.click(function(){a.next();return!1}),e.append(h));a.canvas.element.append(e)}};T.prototype.hideNavigation=function(){this.canvas.element.find(".altgallery-navigation").remove()};T.prototype.open=function(a,b){var c=this,d=this.canvas,e=this.settings;b=b||{};b.preserveState||(c.currentState=
"load image");c.hideAlbums();c.hideThumbnails();c.showButtons();c.showCaption();c.showNavigation();var g=d.element.find(".altgallery-image img");K(g);g.css({position:"absolute"}).hide();var h=d.element.find(".altgallery-imageFrame"),n=(new ea(c.options.images.loader)).get();n.css({position:"absolute",left:"50%",top:"50%",zIndex:10,margin:"-16px 0 0 -16px"});var m=setTimeout(function(){h.append(n);n.start()},500);B(a.source,function(h){clearTimeout(m);n.stop();n.remove();switch(e.imageScaleMode){case "fit":g.css(I.fit(h.width,
h.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize));break;default:case "fill":g.css(I.fill(h.width,h.height,d.width()-2*e.frameSize,d.height()-2*e.frameSize));break;case "noScale":g.css({left:(d.width()-h.width)/2,top:(d.height()-h.height)/2})}g.attr("src",a.source);switch(b.transition){default:case "fade":g.stop().css({opacity:0}).show().animate({opacity:1},2*c.options.animation.duration,"easeOutQuad");break;case "none":g.show()}c.cache()})};T.prototype.prev=function(a){0<this.currentItem?
this.currentItem--:this.currentItem=this.getCurrentAlbum().items.length-1;this.open(this.getCurrentItem(),a)};T.prototype.next=function(a){this.currentItem<this.getCurrentAlbum().items.length-1?this.currentItem++:this.currentItem=0;this.open(this.getCurrentItem(),a)};c.altgallery=altgallery=function(a,d){function f(){h.each(function(){var d=this,f=a,g=function(){k=new ua(d,f)},d=c(d),h,k,l,q=S();h=f.config||{};h.settings=h.settings||{};var p=function(a){c(document).ready(function(){setTimeout(function(){var b=
function(a){if(a.match(/Art/i))return"art";if(a.match(/Aura/i))return"aura";if(a.match(/Box/i))return"box";if(a.match(/Cubic/i))return"cubic";if(a.match(/Line/i))return"line";if(a.match(/PhotoFlow/i))return"photoflow";if(a.match(/Promo/i))return"promo";if(a.match(/Stack/i))return"stack";if(a.match(/Zen/i))return"zen"};ma!=11*wa&&(a=[]);switch(f.type?f.type.toLowerCase():h.galleryName?f.type=b(h.galleryName):f.type="box"){case "art":l=new ca(k,a,h.settings,f);break;case "aura":l=new R(k,a,h.settings,
f);break;default:case "box":l=new Z(k,a,h.settings,f);break;case "cubic":l=new L(k,a,h.settings,f);break;case "line":l=new $(k,a,h.settings,f);break;case "photoflow":l=new X(k,a,h.settings,f);break;case "promo":l=new da(k,a,h.settings,f);break;case "stack":case "stackphoto":l=new ba(k,a,h.settings,f);break;case "zen":l=new T(k,a,h.settings,f)}k.gallery=l;k.initFullscreen();"function"==typeof f.callback&&f.callback(l)},100)})},t=function(a,b){var d=this;this.user=a;this.albumId=b;this.data={};this.title=
"";this.items=[];this.getData=function(a){c.ajax({url:"https://picasaweb.google.com/data/feed/base/user/"+this.user+"/albumid/"+this.albumId+"?alt=json",dataType:"json",success:function(b){d.data=b;if(b.feed&&(b.feed.title&&(d.title=b.feed.title.$t),b.feed.entry)){d.items=[];for(var c=0;c<b.feed.entry.length;c++)d.items.push({source:b.feed.entry[c].content.src,thumb:b.feed.entry[c].media$group.media$thumbnail[1].url,description:b.feed.entry[c].media$group.media$description.$t})}"function"==typeof a&&
a(d.data)},error:function(){"function"==typeof a&&a()}})}},x=function(a,b,d){var e=this;this.userID=a;this.photosetID=b;this.tags=d;this.data={};this.title="";this.items=[];this.getData=function(a){var b={};e.photosetID?(b.method="flickr.photosets.getPhotos",b.photoset_id=e.photosetID):e.userID&&(b.method="flickr.photos.search",b.user_id=e.userID,e.tags&&(b.tags=e.tags));c.ajax({url:"https://api.flickr.com/services/rest/?api_key=5cf54cd3339627429b8a28d5cbb6a4bb&format=json&jsoncallback=?",data:b,
dataType:"jsonp",success:function(b){e.data=b;var c;b.photoset?c=b.photoset.photo:b.photos&&(c=b.photos.photo);if(c&&c.length)for(b=0;b<c.length;b++)e.items.push({source:"//farm"+c[b].farm+".staticflickr.com/"+c[b].server+"/"+c[b].id+"_"+c[b].secret+"_b.jpg",thumb:"//farm"+c[b].farm+".staticflickr.com/"+c[b].server+"/"+c[b].id+"_"+c[b].secret+"_m.jpg",description:""});"function"==typeof a&&a(e.data)},error:function(){"function"==typeof a&&a()}})}},v=function(a,c,d,e,f){e===b&&(e=h.settings.imagesFolder?
h.settings.imagesFolder.replace(/\/+$/,"")+"/":"");f===b&&(f=f||h.settings.thumbnailsFolder?h.settings.thumbnailsFolder.replace(/\/+$/,"")+"/":e);B[a]={id:a,description:d};y(B[a],c,e,f)},y=function(a,b,c,d){c=c||"";d=d||"";a.items=a.items||[];for(var e=a.items.length,f=0;f<b.length&&(q||15>f);f++)a.items[e]={id:e,source:c+b[f].source,thumb:b[f].thumb?d+b[f].thumb:c+b[f].source,description:b[f].description||"",link:b[f].link||"",target:b[f].target||""},e++},z=function(){"function"==typeof p&&p(B)},
B=[],D=0;if(e(h.albums)&&h.albums.length){g();for(g=0;g<h.albums.length&&(q||3>g);g++)if(v(g,h.albums[g].items||[],h.albums[g].description,h.albums[g].imagesFolder,h.albums[g].thumbnailsFolder),h.albums[g].picasa&&(h.albums[g].picasa.user&&h.albums[g].picasa.albumID)&&(D++,function(a){setTimeout(function(){var b=new t(h.albums[a].picasa.user,h.albums[a].picasa.albumID);b.getData(function(){b.items.length&&y(B[a],b.items);D--})},10*D)}(g)),h.albums[g].flickr&&(h.albums[g].flickr.userID||h.albums[g].photosetID))D++,
function(a){setTimeout(function(){var b=new x(h.albums[a].flickr.userID,h.albums[a].flickr.photosetID,h.albums[a].flickr.tags);b.getData(function(){b.items.length&&y(B[a],b.items);D--})},10*D)}(g)}else{if(e(h.items)&&h.items.length)g(),v(0,h.items);else{var E=[];c(d).find("img").each(function(){E.push({source:c(this).parent("a").attr("href")||c(this).attr("src"),thumb:c(this).attr("src"),description:this.title})});v(0,E);g()}B[0]||v(0,[]);if(h.settings){if(h.settings.picasa&&h.settings.picasa.user&&
h.settings.picasa.albumID){D++;var F=new t(h.settings.picasa.user,h.settings.picasa.albumID);F.getData(function(){y(B[0],F.items);D--})}if(h.settings.flickr&&(h.settings.flickr.userID||h.settings.flickr.photosetID))D++,F=new x(h.settings.flickr.userID,h.settings.flickr.photosetID,h.settings.flickr.tags),F.getData(function(){y(B[0],F.items);D--})}}if(D)var H=setInterval(function(){1>D&&(clearInterval(H),z())},100);else z()})}var h;if(d===b){window.altgallery_id++;var p="altgallery-"+window.altgallery_id;
document.write('<div id="'+p+'"></div>');h=c(document.getElementById(p))}else h=c(d);a=c.extend(!0,{width:"550px",height:"400px",background:"none",images:{folder:na+"img/",left:"left.png",right:"right.png",close:"close.png",loader:"loader.png"},animation:{duration:500},fullscreen:!0},a);if(a.images.folder){a.images.folder=a.images.folder.replace(/\/+$/,"")+"/";for(var g in a.images)"folder"!=g&&!a.images[g].match("/")&&(a.images[g]=a.images.folder+a.images[g])}var k={load:function(a,c,d){if(c!==b)switch(c.toLowerCase()){default:case "xml":this.loadXML(a,
d);break;case "json":this.loadJSON(a,d)}else a.match(/(json|txt)$/i)?this.loadJSON(a,d):this.loadXML(a,d)},loadJSON:function(a,b){c.ajax({url:a,dataType:"json",success:function(a){k.parse(a,b)},error:function(){"function"==typeof b&&b({})}})},loadXML:function(a,b){c.ajax({url:a,dataType:"xml",success:function(a){var c;"undefined"==typeof c&&(c=function(){});c.ObjTree=function(){return this};c.ObjTree.prototype.attr_prefix="";c.ObjTree.prototype.parseDOM=function(a){if(a){this.__force_array={};if(this.force_array)for(var b=
0;b<this.force_array.length;b++)this.__force_array[this.force_array[b]]=1;b=this.parseElement(a);this.__force_array[a.nodeName]&&(b=[b]);if(11!=a.nodeType){var c={};c[a.nodeName]=b;b=c}return b}};c.ObjTree.prototype.parseElement=function(a){if(7!=a.nodeType){if(3==a.nodeType||4==a.nodeType)return null==a.nodeValue.match(/[^\x00-\x20]/)?void 0:a.nodeValue;var b,c={};if(a.attributes&&a.attributes.length){b={};for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d].nodeName;if("string"==typeof e){var f=
a.attributes[d].nodeValue;f&&(e=this.attr_prefix+e,"undefined"==typeof c[e]&&(c[e]=0),c[e]++,this.addNode(b,e,c[e],f))}}}if(a.childNodes&&a.childNodes.length){e=!0;b&&(e=!1);for(d=0;d<a.childNodes.length&&e;d++)f=a.childNodes[d].nodeType,3==f||4==f||(e=!1);if(e){b||(b="");for(d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].nodeValue}else{b||(b={});for(d=0;d<a.childNodes.length;d++)if(e=a.childNodes[d].nodeName,"string"==typeof e&&(f=this.parseElement(a.childNodes[d])))"undefined"==typeof c[e]&&(c[e]=
0),c[e]++,this.addNode(b,e,c[e],f)}}return b}};c.ObjTree.prototype.addNode=function(a,b,c,d){this.__force_array[b]?(1==c&&(a[b]=[]),a[b][a[b].length]=d):1==c?a[b]=d:2==c?a[b]=[a[b],d]:a[b][a[b].length]=d};c=new c.ObjTree;c.attr_prefix="";a=c.parseDOM(a)["#document"];k.parse(a,b)},error:function(){"function"==typeof b&&b({})}})},parse:function(a,b){if(a.gallery&&(a.galleryName&&(a.gallery.galleryName=a.galleryName),a=a.gallery,a.items&&a.items.item&&(a.items=a.items.item.length?a.items.item:[a.items.item]),
a.albums)){a.albums.album&&(a.albums=a.albums.album.length?a.albums.album:[a.albums.album]);for(var c=0;c<a.albums.length;c++)a.albums[c].items&&a.albums[c].items.item&&(a.albums[c].items=a.albums[c].items.item.length?a.albums[c].items.item:[a.albums[c].items.item])}"function"==typeof b&&b(a)}};"string"==typeof a.config?(h.css({visibility:"hidden"}),k.load(a.config,a.configType,function(b){h.css({visibility:"visible"});a.config=b;f()})):k.parse(a.config,function(b){a.config=b;f()});return h};c.fn.altgallery=
function(a){c.altgallery(a,this);return this};c.altbox=altbox=function(a,b){if(d!=top)var d=top,e=d.document;b=c.extend(!0,{frame:{color:"#000",borderRadius:0},mask:{color:"#000",opacity:0.7},images:{folder:na+"img/",close:"close.png",loader:"loader.gif"},animation:{duration:700}},b);if(b.images.folder){b.images.folder=b.images.folder.replace(/\/+$/,"")+"/";for(var h in b.images)"folder"!=h&&!b.images[h].match("/")&&(b.images[h]=b.images.folder+b.images[h])}var g=c("<div/>");g.css({position:"fixed",
zIndex:11E4,left:0,top:0,width:"100%",height:"100%",background:"no-repeat center",backgroundColor:b.mask.color,backgroundImage:D(b.images.loader),opacity:0});c(e.body).append(g);g.animate({opacity:b.mask.opacity},b.animation.duration);var k=new Image;k.onload=function(){function h(){g.remove();t.remove()}function m(){w.remove();s.opacity="hide";t.animate(s,0.67*b.animation.duration);v.animate({width:s.width-20,height:s.height-20},0.67*b.animation.duration);g.fadeOut(b.animation.duration,function(){h()});
return!1}var p=c(d).width()-100,u=c(d).height()-100,s=I.fit(k.width/4,k.height/4,p,u,{noEnlarge:!0,minWidth:100,minHeight:100});s.left+=50;s.top+=50;var l=I.fit(k.width+20,k.height+20,p,u,{noEnlarge:!0,minWidth:120,minHeight:120});l.left+=50;l.top+=50;var t=c("<div/>");t.css(s);t.css({position:"fixed",zIndex:111E3,backgroundColor:b.frame.color,borderRadius:b.frame.borderRadius,MozUserSelect:"none",webkitUserSelect:"none",userSelect:"none"});t.hide();var v=c('<img src="'+a+'"/>');v.css({display:"block",
margin:"10px",width:s.width-20,height:s.height-20,borderRadius:8<b.frame.borderRadius?b.frame.borderRadius-8:0});var w=c('<a href="#"/>');w.css({position:"absolute",right:-18,top:-17,width:40,height:40,background:"no-repeat center",backgroundImage:D(b.images.close)});z()&&w.css({right:-23,top:-22,width:50,height:50,backgroundSize:"40px 40px"});t.append(v);c(e.body).append(t);g.css({backgroundImage:"none"});v.animate({width:l.width-20,height:l.height-20,margin:"10px"},b.animation.duration,"easeOutBack");
l.opacity="show";t.animate(l,b.animation.duration,"easeOutBack",function(){t.append(w)});c(d).resize(function(){p=c(d).width()-100;u=c(d).height()-100;s=I.fit(k.width/4,k.height/4,p,u,{noEnlarge:!0,minWidth:100,minHeight:100});s.left+=50;s.top+=50;l=I.fit(k.width+20,k.height+20,p,u,{noEnlarge:!0,minWidth:120,minHeight:120});l.left+=50;l.top+=50;t.css(l);v.css({width:l.width-20,height:l.height-20})});g.click(h);w.click(m);t.dblclick(m)};k.src=a}})(jQuery);
